<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[html代码实现一些符号]]></title>
      <url>/2017/11/22/html%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%BA%9B%E7%AC%A6%E5%8F%B7/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/html.jpg" alt="title"><br><a id="more"></a></p>
<h2 id="整理常用的一些html特殊符号"><a href="#整理常用的一些html特殊符号" class="headerlink" title="整理常用的一些html特殊符号"></a>整理常用的一些html特殊符号</h2><p>在写html的时候经常会遇到一些特殊符号,例如<code>&gt;</code>等,大家都知道直接写<code>&lt;</code>或者<code>&gt;</code>等代码会报错,原因是因为<code>&lt;div&gt;&lt;/div&gt;</code>,标签是用这个符号的,代码执行的时候会以为你只写了一半,所以报错,今天就整理一写这些特殊符号用html怎么表示</p>
<table>
<thead>
<tr>
<th>html符号</th>
<th style="text-align:right">特殊符号</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;lt;</code></td>
<td style="text-align:right">&lt;</td>
<td style="text-align:center">小于或显示标记</td>
</tr>
<tr>
<td><code>&amp;gt;</code></td>
<td style="text-align:right">&gt;</td>
<td style="text-align:center">大于或者显示标记</td>
</tr>
<tr>
<td><code>&amp;amp;</code></td>
<td style="text-align:right">&amp;</td>
<td style="text-align:center">用于显示其他特殊字符</td>
</tr>
<tr>
<td><code>&amp;quot;</code></td>
<td style="text-align:right">&quot;</td>
<td style="text-align:center">引号</td>
</tr>
<tr>
<td><code>&amp;reg;</code></td>
<td style="text-align:right">&reg;</td>
<td style="text-align:center">已注册</td>
</tr>
<tr>
<td><code>&amp;copy;</code></td>
<td style="text-align:right">&copy;</td>
<td style="text-align:center">版权</td>
</tr>
<tr>
<td><code>&amp;trade;</code></td>
<td style="text-align:right">&trade;</td>
<td style="text-align:center">商标</td>
</tr>
</tbody>
</table>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.jb51.net/onlineread/htmlchar.htm" target="_blank" rel="external">HTML特殊字符编码对照表</a></p>
]]></content>
      
        
        <tags>
            
            <tag> html </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[请看我漂亮的坚持]]></title>
      <url>/2017/11/21/2017-11-21/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/jianchi.jpeg" alt="title"></p>
<h5 id="今天是2017年11月21日-一周年纪念"><a href="#今天是2017年11月21日-一周年纪念" class="headerlink" title="今天是2017年11月21日,一周年纪念~"></a>今天是2017年11月21日,一周年纪念~</h5><a id="more"></a>
<p>今天是2017年11月21日,嘿嘿,说的是一周年纪念不是爱情的纪念,因为去年的今天我入职第一家公司,从此开始了程序媛的生活~</p>
<p>记得2016年11月21日是个周一.那天下着雪,在经过一个多星期的奔波,还清晰的记得那会每天奔波的北京的各个地方,面试,很多时候,一天安排两个面试,而两个面试地点距离非常远,那会每天基本都没时间吃饭,一个星期,瘦了差不多10斤,晚上回来的时候就随便在路边买点吃的,整理今天一天面试中被问到的问题,没有回答上来或者回答不好的地方,就去网上查资料,看书查.珍惜每一次面试机会,终于找到了一家肯接受我的公司,周日那天,整整睡了一天,记得那天醒来就下午三点多了吧.<br>入职后的每一天都小心翼翼的,因为没有经验,遇到很多问题,经常加班到晚上11点才回来,然后晚上回来还要写代码到一两点,刚来北京那会,没有钱,租的那种500块钱一个人的床位,每天回来的时候大家都已经睡着了,小心翼翼的开开门,此时别人的一个转身我都害怕是被自己吵醒的,然后洗漱完,在床位上打开电脑,把屏幕调到最暗,开始解决今天遇到的在有道云笔记上记录的问题,实在太困了,就睡;那时,就是一个想法,好好干,别被开除了,还年轻,吃点苦算什么.累的时候就会跟自己对话,当初为什么要选择这一行,不是计算机专业出身,决定从事这一行业的时候,就想到要比别人付出更多才能补回来自己缺的一些东西.</p>
<p>记得当时还犯了一个很严重的错误,虽然只是写写静态页面,但是写了一个星期之后,技术老大(虽然当时研发只有他和我)发现我写的代码不兼容,我能看出他看着我很无奈的样子,我立马承认自己的错误,并给他保证不用重新写,是可以改好的,自己就主动申请加班,内心里想着不要开除我就好.</p>
<p>后来开始做移动端,技术老大说不然咱们就试试比较流行的框架,react , vue, angular,记得当时angular还是1.0,选技术栈的过程比较曲折,终于最后选择了vue,不知道有多少人和我又一样的感受,之前一直写jq,一下子换成vue,首先思考问题的角度都要转换一下,jq是直接操作DON的,但是vue不是.印象深刻的还有,当时记得写了两个星期vue,遇到很多问题,比如路由怎么实现,等等,技术老大说,咱们能hold住新技术么,不行就换回jq,我说:现在社区这么活跃,你遇到的问题大家都遇到过,肯定是可以解决的.真的很感谢,给我机会去尝试新技术.</p>
<p>也许是骨子里带着一股不服输的精神,坚持一直学,天道酬勤,终于后来慢慢在公司里有点权威,最起码,产品提的需求,别人实现不了,我可以实现.就是这样慢慢建立起了自信,经过自己的努力实现的那种成就感,很爽!</p>
<p>到今天整整一年了,技术上相比去年也增长了很多,大概在今年夏天的时候开始写自己的博客,在<a href="http://www.jianshu.com/u/92fec6da2d1a" target="_blank" rel="external">简书</a>上发表文章,看到下面有人给我评论,和我交流技术,真的很开心,看到很多人通过博客加我好友,支持我,鼓励我,给我提建议,还有前几天第一次在掘金上发表<a href="https://juejin.im/user/58c6a15544d9040068046025" target="_blank" rel="external">文章</a>,很多人给我点赞,还有大佬给我提建议,真的发自内心的感谢!</p>
<p>这一年接触了很多东西,写过vue,react,koa,玩过小程序,现在在用Meteor+react+mongoDB写全栈,但是对于具体的原理了解的可能还不是很深入,所以接下来一年,我给自己制定的目标,学好js的基础,在此基础上学一些主流框架原理上的一些东西,还有目前实现产品提的需求已经不是什么大的问题了,问题是如果写好,比如代码的组织和性能等,总之路漫漫其兮远,慢慢一步一步脚踏实地的来.</p>
<p>大概就写到这儿吧,看到这篇文章的有缘人,不知道你是否和我一样也有这些经历,不过,肯定是和我一样希望让自己变得更优秀的人,只要用心学习,付出努力,技术肯定是会慢慢提高的.</p>
<p>给大家推荐几本书:</p>
<ul>
<li>Javascript高级程序设计(3),(记得我看的是第三版,或者<javascript>权威指南,讲的js的知识特别全)</javascript></li>
<li>你不知道的JavaScript系列(深入的讲解javascript)</li>
<li>深入理解es6</li>
<li>深入浅出react技术栈</li>
<li>图解http</li>
<li>大话设计模式</li>
<li>NodeJs实战</li>
</ul>
]]></content>
      
        <categories>
            
            <category> life </category>
            
        </categories>
        
        
        <tags>
            
            <tag> life </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[两句话理解js中的this]]></title>
      <url>/2017/11/16/this/</url>
      <content type="html"><![CDATA[<p><img src="http://s2.51cto.com/wyfs02/M00/88/9A/wKioL1f83IXiORmNAAC9J-tzq-k871.jpg-wh_651x-s_1446494838.jpg" alt="this"><br><a id="more"></a></p>
<p>前言: 一直都搞不清javascript中this的指向,<code>&lt;你不知道的javascript(上卷)&gt;</code>这本书中有3章都是在讲解this,去年第一次看完还是觉得似懂非懂的,一深入的问还是不清楚,现在在看一遍,真心觉得这本书里将的是真好,想深入了解一下的,这本书是一个不错的选择.</p>
<p>下面我就简单的说一下我的理解,用两句话记住了javascrpt中this的指向:</p>
<h1 id="this的指向"><a href="#this的指向" class="headerlink" title="this的指向"></a>this的指向</h1><ul>
<li>普通函数指向函数的调用者:有个简便的方法就是看函数前面有没有点,如果有点,那么就指向点前面的那个值;</li>
<li>箭头函数指向函数所在的所用域: 注意理解作用域,只有<code>函数的{}</code>构成作用域,<code>对象的{}</code>以及 <code>if(){}</code>都不构成作用域;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">    name: <span class="string">'objName'</span>,</div><div class="line">    say() &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;,</div><div class="line">    read: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">obj.say(); <span class="comment">// objName</span></div><div class="line">obj.read(); <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<ul>
<li>普通函数,调用者是obj,所以结果是 objname;也是理解<code>say()</code>是普通函数,前面有点,所以<code>this</code>指向<code>obj</code>;</li>
<li>箭头函数,this指向函数所在的作用域,当前的作用域为全局环境,所以<code>this.name</code>为<code>undefined</code>,</li>
<li>举下面的例子更清楚的了解一下箭头函数this的指向,箭头函数所在的作用域是普通函数<code>say</code>,<code>say()</code>的调用者是obj<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">    say: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>)</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">obj.say(); <span class="comment">// obj,此时this指的是定义他的obj</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="补充知识点"><a href="#补充知识点" class="headerlink" title="补充知识点"></a>补充知识点</h2><ul>
<li><p>浏览器默认的this为window</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">test(); <span class="comment">//window</span></div></pre></td></tr></table></figure>
</li>
<li><p>node.js中全局环境默认<code>this为{}</code>,普通函数中默认<code>this为global</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// &#123;&#125;</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">test(); <span class="comment">//global</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="来两道题检查你是否掌握了"><a href="#来两道题检查你是否掌握了" class="headerlink" title="来两道题检查你是否掌握了"></a>来两道题检查你是否掌握了</h2><h4 id="example1"><a href="#example1" class="headerlink" title="example1"></a>example1</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> length = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line"> <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span>  obj = &#123;</div><div class="line">    length: <span class="number">5</span>,</div><div class="line">    method: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    fn();</div><div class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>]();</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.method(fn, <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>输出 10, 2</p>
<p>刚开始看到这道题我也是蒙蒙的,现在也终于理解了,<br>method这个函数传入了两个参数,一个参数为fn(),fn()为普通函数,this指向函数的调用者,此时指向全局(也可以看这个函数前面没有<code>点</code>),所以运行结果为10,arguments是函数的所有参数,是一个类数组的对象,arguments<a href="">0</a>,可以看成是arguments.0(),调用这个函数的是arguments,此时this就是指<code>arguments</code>,this.length就是angument.length,就是传入的参数的总个数2</p>
<p>注: 上面例子在node环境中的运行结果为 undefined 2, <code>const length = 10</code>改成<code>global.length = 10;</code>是因为node环境下定义在全局的变量不会绑定到global,浏览器也会自动绑定到全局环境window</p>
<p>改成下面这样结果又是什么呢?<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> length = <span class="number">10</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">    length: <span class="number">5</span>,</div><div class="line">    method: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">        fn();</div><div class="line">        <span class="keyword">const</span> fun = <span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">        fun()；</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.method(fn, <span class="number">1</span>);</div></pre></td></tr></table></figure></p>
<p>10, 10</p>
<h4 id="example-2"><a href="#example-2" class="headerlink" title="example 2"></a>example 2</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.val = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    val: <span class="number">2</span>,</div><div class="line">    dbl: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.val *= <span class="number">2</span>;</div><div class="line">        val *= <span class="number">2</span>;</div><div class="line">        <span class="built_in">console</span>.log(val);</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.val);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">obj.dbl(); <span class="comment">// 2 4</span></div><div class="line"><span class="keyword">var</span> func = obj.dbl;</div><div class="line">func(); <span class="comment">// 8 8</span></div></pre></td></tr></table></figure>
<p>这个就是有点绕了,不过一步步来分析就很容易理解了:</p>
<p><code>obj.dbl()</code>;执行这行代码时，this指的是<code>obj</code>，所以<code>this.val === obj.val*=2</code>,最后结果为<code>4</code>,<code>val*=2 === window.val *= 2</code>，最后结果是<code>2</code></p>
<p><code>func()</code>，执行这行代码时，<code>func()</code>没有任何前缀，<code>this</code>指的是<code>window.func()</code>;所以此时this值得是<code>window</code>，<code>this.val === window.val *= 2</code>,此时<code>window.val</code> 为<code>4</code>，<code>val*=2 === window.val *2</code>,最后结果为<code>8</code>，最后<code>console.log(this.val)</code>,与<code>console.log(val)</code>,指的都是<code>window.val</code>，最后结果都是<code>8</code></p>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[初探React生命周期]]></title>
      <url>/2017/11/14/%E5%88%9D%E6%8E%A2React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      <content type="html"><![CDATA[<p><img src="http://static.open-open.com/lib/uploadImg/20151028/20151028165606_134.jpg" alt="title"><br><a id="more"></a></p>
<h1 id="react生命周期"><a href="#react生命周期" class="headerlink" title="react生命周期"></a>react生命周期</h1><h2 id="挂载和卸载过程"><a href="#挂载和卸载过程" class="headerlink" title="挂载和卸载过程"></a>挂载和卸载过程</h2><p>1,组件挂载是最基本的过程,这个过程主要做组件状态的初始化.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">// 1,这两个属性被声明成静态属性,意味着你也可以再类外面访问他们: App.propTypes和 App.defaultProps</span></div><div class="line">    <span class="keyword">static</span> propTypes = &#123;</div><div class="line">        <span class="comment">// props的类型检查</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> defaultProps = &#123;</div><div class="line">        <span class="comment">// props的默认类型</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.state = &#123;</div><div class="line">            <span class="comment">//</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 2,componentWillMount和componentDidMount分别代表了渲染前后的时刻</span></div><div class="line">    componentWillMount() &#123;</div><div class="line">        <span class="comment">// 在render方法之前执行</span></div><div class="line">    &#125;</div><div class="line">    componentDidMount() &#123;</div><div class="line">        <span class="comment">//render方法之后执行</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 3,这个初始化过程没什么特别的,包括读取初始state和props以及这两个生命周期的方法componentWillMount和componentDidMount,这些都只会在组件初始化时运行一次</span></div><div class="line">    <span class="comment">// 4,如果我们在componentWillMount中执行setState方法,会发生什么呢?组件会更新state,但是组件只渲染一次,初始化的state都可以放在this.state</span></div><div class="line">    <span class="comment">// 5,我们在componentDidMount中执行setState方法,又会发生什么呢?组件当然会再次更新,不过在初始化阶段就渲染了两次,这并不是一件好事.</span></div><div class="line">    <span class="comment">// 但是实际的情况是,有一些场景不得不需要setState,比如计算组件的宽高时,就不得不让组件先渲染,更新必要的信息,再次渲染</span></div><div class="line">    componentWillUnmount() &#123;</div><div class="line">        <span class="comment">// 组件卸载只有componentWillUnmount,这是一个卸载前状态</span></div><div class="line">        <span class="comment">// 在这个方法中,我们常常会执行一些清理方法,如事件回收或是清理定时器</span></div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                <span class="keyword">this</span> is demo</div><div class="line">            &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        );</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default App;</span></div></pre></td></tr></table></figure></p>
<h2 id="数据更新过程"><a href="#数据更新过程" class="headerlink" title="数据更新过程"></a>数据更新过程</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">        <span class="comment">// this.setState(&#123;&#125;)</span></div><div class="line">    &#125;</div><div class="line">    shouldComponentUpdate(nextProps, nextState) &#123;</div><div class="line">        <span class="comment">// return true</span></div><div class="line">        <span class="comment">// shouldComponentUpdate是一个特别的方法,他接受需要更新的props和state,让开发者增加必要的条件判断,让其在需要时更新.因此,当方法返回false的时候,组件不再向下执行生命周期方法</span></div><div class="line">    &#125;</div><div class="line">    componentWillUpdate(nextProps, nextState) &#123;</div><div class="line">        <span class="comment">// 需要提供更新的props和state</span></div><div class="line">        <span class="comment">// 这里不能执行setState</span></div><div class="line">    &#125;</div><div class="line">    componentDidUpdate(prevProps, prevState) &#123;</div><div class="line">        <span class="comment">// 提供更新前的props和state</span></div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">                <span class="keyword">this</span> is demo</div><div class="line">            &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        );</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default App;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>如果组件自身的state更新了,那么会依次执行shouldComponentUpdate,componentWillUpdate,render, componentDidUpdate.</p>
<blockquote>
<p>  shouldComponentUpdate是一个特别的方法,他接受需要更新的props和state,让开发者增加必要的条件判断,让其在需要时更新.因此,当方法返回false的时候,组件不再向下执行生命周期方法<br>  本质是用来进行正确的组件渲染(也是性能优化的手段之一):<br>  当父节点props改变的时候,在理想情况下,只渲染在一条链路省有相关props改变的节点即可,但是默认情况下,React会渲染所有的节点,因为shouldComponentUpdate默认返回true<br>  值得注意的是,无状态组件是没有生命周期方法的,这也意味着它没有shouldComponentUpdate,渲染到该类组件时,每次都会重新渲染,不少开发者在使用无状态组件开发的时候都会纠结这一点,为了更方心得使用,我们可以选择用Recompose库的pure方法;<br>  const optionmizeComponent = pure(ExpensiveComponent)<br>  pure方法做的事情就是将无状态组件转换成class语法加上PureRender后的组件</p>
</blockquote>
</li>
<li><p>如果组件是由父组件更新props而更新的,那么在shouldComponentUpdate之前会先执行componentWillReceiveProps方法,此方法可以作为React在props传入后,渲染之前setState的机会,在此方法中调用setState是不会二次渲染的</p>
<h2 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h2><p>React的生命周期流程我们用一张图来表示<br><img src="http://oo4xdz5i0.bkt.clouddn.com/reactLife.jpeg" alt="react生命周期"></p>
</li>
</ul>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="http://wangyaxing.top/">blog</a></p>
]]></content>
      
        <categories>
            
            <category> react </category>
            
        </categories>
        
        
        <tags>
            
            <tag> react </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[深入理解git系列]]></title>
      <url>/2017/11/02/git%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/git1.png" alt="title"><br><a id="more"></a><br>文章参考: <a href="http://git.oschina.net/progit/" target="_blank" rel="external">http://git.oschina.net/progit/</a></p>
<h1 id="1-git简介"><a href="#1-git简介" class="headerlink" title="1,git简介"></a>1,git简介</h1><h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><p>简而言之,就是可以报存你所有的修改,所有的历史版本;有了它,就可以将某个文件回溯到之前的状态,甚至可以将整个项目回退到过去某个时间点的状态;你可以比较文件的变化细节，查出最后是谁修改了哪个地方，从而找出导致怪异问题出现的原因，又是谁在何时报告了某个功能缺陷等等</p>
<h2 id="类别"><a href="#类别" class="headerlink" title="类别"></a>类别</h2><h3 id="集中化的版本控制系统-eg-svn"><a href="#集中化的版本控制系统-eg-svn" class="headerlink" title="集中化的版本控制系统(eg: svn)"></a>集中化的版本控制系统(eg: svn)</h3><p><img src="http://git.oschina.net/progit/figures/18333fig0102-tn.png" alt=""></p>
<h3 id="分布式版本控制系统-eg-git"><a href="#分布式版本控制系统-eg-git" class="headerlink" title="分布式版本控制系统(eg: git)"></a>分布式版本控制系统(eg: git)</h3><p><img src="http://git.oschina.net/progit/figures/18333fig0103-tn.png" alt=""></p>
<h2 id="文件的三种状态"><a href="#文件的三种状态" class="headerlink" title="文件的三种状态"></a>文件的三种状态</h2><p>对于任何一个文件，在 Git 内都只有三种状态：</p>
<ul>
<li>已提交（committed），已提交表示该文件已经被安全地保存在本地数据库中了；</li>
<li>已修改（modified,已修改表示修改了某个文件，但还没有提交保存；</li>
<li>已暂存（staged）。已暂存表示把已修改的文件放在下次提交时要保存的清单中。<br>git管理项目时,文件流转的三个工作区域:git的工作目录,暂存区域,本地仓库<br><img src="http://git.oschina.net/progit/figures/18333fig0106-tn.png" alt=""></li>
<li>每个项目都有一个Git目录(如果 git clone 出来的话，就是其中 .git 的目录)</li>
<li>从项目中取出某个版本的所有文件和目录，用以开始后续工作的叫做工作目录</li>
<li>所谓的暂存区域只不过是个简单的文件，一般都放在 Git 目录中<br><img src="http://oo4xdz5i0.bkt.clouddn.com/git.png" alt=""></li>
</ul>
<h1 id="2-git基础"><a href="#2-git基础" class="headerlink" title="2,git基础"></a>2,git基础</h1><h2 id="取得项目的Git仓库"><a href="#取得项目的Git仓库" class="headerlink" title="取得项目的Git仓库"></a>取得项目的Git仓库</h2><p>有两种方法:1,在现存的目录下,通过导入所有文件来创建新的Git仓库;2,从已有的Git仓库克隆出一个新的镜像仓库</p>
<ul>
<li><p>在工作目录中初始化新仓库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git init <span class="comment">// 初始化后，在当前目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中</span></div><div class="line">git add README <span class="comment">// 如果当前目录下有几个文件想要纳入版本控制,需要先用`git add`命令告诉git开始对这些文件进行跟踪,并进行提交</span></div><div class="line">git commit -m <span class="string">'initial project version'</span></div></pre></td></tr></table></figure>
</li>
<li><p>从现有仓库克隆<br>克隆仓库的命令格式为 git clone [url]。比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git://github.com/schacon/grit.git</div></pre></td></tr></table></figure>
</li>
</ul>
<p>当前目录下创建一个名为<code>grit</code>的目录,其中包含一个<code>.git</code>的目录用于保存下载下来的所有版本记录,然后从中取出最新版本的文件拷贝<br>如果希望在<code>git clone</code>的时候,自己定义要新建的项目目录的名称,可以再上面的命令的末尾指定新的名字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git://github.com/schacon/grit.git mygrit</div></pre></td></tr></table></figure></p>
<p>现在新建的目录就成了<code>mygrit</code></p>
<h2 id="文件状态"><a href="#文件状态" class="headerlink" title="文件状态"></a>文件状态</h2><p><code>git status</code> 可以查看文件目前处于什么状态<br><code>git add xx</code> 这是一个多功能命,根据目标文件的状态不同,此命令的效果也不同;可以用它开始跟踪新文件,或者把已跟踪的文件放到暂存区,还能用于合并时把有冲突的文件标记为已解决状态</p>
<h2 id="忽略某些文件"><a href="#忽略某些文件" class="headerlink" title="忽略某些文件"></a>忽略某些文件</h2><p>我们可以创建一个<code>.gitignore</code>的文件,列出要忽略的文件模式<br><code>.gitignore</code>的格式规范如下:</p>
<ul>
<li>所有空行或者以注释符号<code>#</code>开头的行都会被Git忽略</li>
<li>可以使用标准的glob模式匹配(shell所使用的简化了的正则表达式)</li>
<li>匹配模式最后跟反斜杠(/)说明要忽略的是目录</li>
<li>要忽略指定模式以外的文件或目录,可以再模式前加上(!)取反</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># 此为注释 – 将被 Git 忽略</div><div class="line">    # 忽略所有 .a 结尾的文件</div><div class="line">    *.a</div><div class="line">    # 但 lib.a 除外</div><div class="line">    !lib.a</div><div class="line">    # 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</div><div class="line">    /TODO</div><div class="line">    # 忽略 build/ 目录下的所有文件</div><div class="line">    build/</div><div class="line">    # 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</div><div class="line">    doc<span class="comment">/*.txt</span></div></pre></td></tr></table></figure>
<h2 id="查看已暂存和未暂存的更新"><a href="#查看已暂存和未暂存的更新" class="headerlink" title="查看已暂存和未暂存的更新"></a>查看已暂存和未暂存的更新</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git diff</div><div class="line">git diff --cached</div></pre></td></tr></table></figure>
<h2 id="提交更新"><a href="#提交更新" class="headerlink" title="提交更新"></a>提交更新</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git commit</div><div class="line">git commit -m&apos;docs: change readme&apos; // -m参数后跟提交的方式</div></pre></td></tr></table></figure>
<p><a href="https://blog.suisuijiang.com/git-commit-written-guide/" target="_blank" rel="external">git commit 规范参考</a></p>
<h2 id="跳过使用暂存区域-git-commit-a-m-39-feat-add-new-tasks-39"><a href="#跳过使用暂存区域-git-commit-a-m-39-feat-add-new-tasks-39" class="headerlink" title="跳过使用暂存区域 git commit -a -m&#39;feat: add new tasks&#39;"></a>跳过使用暂存区域 <code>git commit -a -m&#39;feat: add new tasks&#39;</code></h2><p>git 提供了一个跳过使用暂存区域的方式，只要在提交的时候给<code>git commit</code>加上<code>-a</code>选项，git就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 <code>git add</code>步骤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -a -m&apos;feat: add new tasks&apos;</div></pre></td></tr></table></figure></p>
<h2 id="移除文件-git-rm"><a href="#移除文件-git-rm" class="headerlink" title="移除文件 git rm"></a>移除文件 <code>git rm</code></h2><p>从git中移除某个文件，必须要从已跟踪文件清单移除（从暂存区域移除）,然后提交,<code>git rm</code>命令完成此项工作，并连带从工作目录中删除制定的文件，这样以后就不会出现在未跟踪文件清单了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm .test</div></pre></td></tr></table></figure></p>
<p>如果是简单从工作目录中手工删除文件，仅删除了工作目录中的，仍在追踪名单中<br>然后再运行 <code>git rm</code>记录此次移除文件的操作<br>最后提交就不会被跟踪了。但是如果删除文件之前修改过且已经放到暂存区，则必须要加<code>-f</code>(即force的首字母)<br>在实际项目中，经常会遇到下面的情况需要删除文件<br>想把文件从git仓库中删除，但是仍希望保留在工作目录中，就是仅从跟踪清单中删除，比如一些大型日志或一堆.a的编译文件，不小心纳入仓库，但是要移除追踪但不删除文件，以便稍后在<code>.gitignore</code>文件中补上，加参数<code>--cached</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm --cached readme.txt</div></pre></td></tr></table></figure></p>
<p>后面可以列出文件或者目录的名字，也可以使用 glob 模式。<br>注意到星号 * 之前的反斜杠 \，因为 Git 有它自己的文件模式扩展匹配方式，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git rm log/\*.log    // 此命令删除所有 log/ 目录下扩展名为 .log 的文件</div><div class="line">git rm \*~           //会递归删除当前目录及其子目录中所有 ~ 结尾的文件。必须加反斜杠</div></pre></td></tr></table></figure></p>
<h2 id="移动文件git-mv"><a href="#移动文件git-mv" class="headerlink" title="移动文件git mv"></a>移动文件<code>git mv</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git mv file_from file_to</div></pre></td></tr></table></figure>
<p>相当于运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mv README.txt README</div><div class="line">git rm README.txt</div><div class="line">git add README</div></pre></td></tr></table></figure></p>
<h2 id="查看提交历史-git-log"><a href="#查看提交历史-git-log" class="headerlink" title="查看提交历史 git log"></a>查看提交历史 <code>git log</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git log -p -2 // -p选项展开每次提交的内容差异， -2则仅显示最近两次更新， 做代码审查，或者快速浏览其他写作者提交的更新都做了哪些</div><div class="line">git log --stat // 仅显示简要的增改行数</div><div class="line">git log --pretty // 指定使用完全不同于默认风格的方式展示提交历史，比如`git log --pretty=oneline`将每个提示放在一行显示，另外还有short， full和fuller</div></pre></td></tr></table></figure>
<h4 id="format，可以定制要显示的记录格式，这样的输出便于后期编程提取分析"><a href="#format，可以定制要显示的记录格式，这样的输出便于后期编程提取分析" class="headerlink" title="format，可以定制要显示的记录格式，这样的输出便于后期编程提取分析"></a>format，可以定制要显示的记录格式，这样的输出便于后期编程提取分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git log --pretty=format:&quot;%h - %an, %ar : %s&quot;</div><div class="line">ca82a6d - Scott Chacon, 11 months ago : changed the version number</div><div class="line">085bb3b - Scott Chacon, 11 months ago : removed unnecessary test code</div><div class="line">a11bef0 - Scott Chacon, 11 months ago : first commit</div></pre></td></tr></table></figure>
<h4 id="用-oneline-或-format-时结合-–graph-选项，可以看到开头多出一些-ASCII-字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况"><a href="#用-oneline-或-format-时结合-–graph-选项，可以看到开头多出一些-ASCII-字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况" class="headerlink" title="用 oneline 或 format 时结合 –graph 选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况"></a>用 oneline 或 format 时结合 –graph 选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ git log --pretty=format:&quot;%h %s&quot; --graph</div><div class="line">    * 2d3acf9 ignore errors from SIGCHLD on trap</div><div class="line">    * 5e3ee11 Merge branch &apos;master&apos; of git://github.com/dustin/grit</div><div class="line">    |\</div><div class="line">    | * 420eac9 Added a method for getting the current branch.</div><div class="line">    * | 30e367c timeout code and tests</div><div class="line">    * | 5a09431 add timeout protection to grit</div><div class="line">    * | e1193f8 support for heads with slashes in them</div><div class="line">    |/</div><div class="line">    * d6016bc require time for xmlschema</div><div class="line">    * 11d191e Merge branch &apos;defunkt&apos; into local</div></pre></td></tr></table></figure>
<h4 id="列出了常用的格式占位符写法及其代表的意义。"><a href="#列出了常用的格式占位符写法及其代表的意义。" class="headerlink" title="列出了常用的格式占位符写法及其代表的意义。"></a>列出了常用的格式占位符写法及其代表的意义。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">选项 说明</div><div class="line">    %H 提交对象（commit）的完整哈希字串</div><div class="line">    %h 提交对象的简短哈希字串</div><div class="line">    %T 树对象（tree）的完整哈希字串</div><div class="line">    %t 树对象的简短哈希字串</div><div class="line">    %P 父对象（parent）的完整哈希字串</div><div class="line">    %p 父对象的简短哈希字串</div><div class="line">    %an 作者（author）的名字</div><div class="line">    %ae 作者的电子邮件地址</div><div class="line">    %ad 作者修订日期（可以用 -date= 选项定制格式）</div><div class="line">    %ar 作者修订日期，按多久以前的方式显示</div><div class="line">    %cn 提交者(committer)的名字</div><div class="line">    %ce 提交者的电子邮件地址</div><div class="line">    %cd 提交日期</div><div class="line">    %cr 提交日期，按多久以前的方式显示</div><div class="line">    %s 提交说明</div></pre></td></tr></table></figure>
<h4 id="一些其他常用的选项及其释义。"><a href="#一些其他常用的选项及其释义。" class="headerlink" title="一些其他常用的选项及其释义。"></a>一些其他常用的选项及其释义。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">选项 说明</div><div class="line">    -p 按补丁格式显示每个更新之间的差异。</div><div class="line">    --stat 显示每次更新的文件修改统计信息。</div><div class="line">    --shortstat 只显示 --stat 中最后的行数修改添加移除统计。</div><div class="line">    --name-only 仅在提交信息后显示已修改的文件清单。</div><div class="line">    --name-status 显示新增、修改、删除的文件清单。</div><div class="line">    --abbrev-commit 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。</div><div class="line">    --relative-date 使用较短的相对时间显示（比如，“2 weeks ago”）。</div><div class="line">    --graph 显示 ASCII 图形表示的分支合并历史。</div><div class="line">    --pretty 使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。</div></pre></td></tr></table></figure>
<h4 id="限制输入长度-–since-和-–unti"><a href="#限制输入长度-–since-和-–unti" class="headerlink" title="限制输入长度 –since 和 –unti"></a>限制输入长度 –since 和 –unti</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git log --since=2.weeks // 列出所有最近两周内的提交</div><div class="line">选项 说明</div><div class="line">    -(n) 仅显示最近的 n 条提交</div><div class="line">    --since, --after 仅显示指定时间之后的提交。</div><div class="line">    --until, --before 仅显示指定时间之前的提交。</div><div class="line">    --author 仅显示指定作者相关的提交。</div><div class="line">    --committer 仅显示指定提交者相关的提交。</div></pre></td></tr></table></figure>
<p>如果要查看 Git 仓库中，2017 年 10 月期间，Junio Hamano 提交的但未合并的测试脚本（位于项目的 t/ 目录下的文件），可以用下面的查询命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git log --pretty=&quot;%h - %s&quot; --author=gitster --since=&quot;2008-10-01&quot; \</div></pre></td></tr></table></figure></p>
<h2 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h2><h4 id="修改最后一次提交-git-commit-amend"><a href="#修改最后一次提交-git-commit-amend" class="headerlink" title="修改最后一次提交 git commit --amend"></a>修改最后一次提交 <code>git commit --amend</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git commit -m &apos;initial commit&apos;</div><div class="line">git add forgotten_file</div><div class="line">git commit --amend</div></pre></td></tr></table></figure>
<p>如果刚才提交时忘了暂存某些修改，可以先补上暂存操作，然后再运行 –amend 提交：上面的三条命令最终只是产生一个提交，第二个提交命令修正了第一个的提交内容。</p>
<h4 id="取消已经暂存的文件-git-reset-HEAD-lt-file-gt"><a href="#取消已经暂存的文件-git-reset-HEAD-lt-file-gt" class="headerlink" title="取消已经暂存的文件 git reset HEAD &lt;file&gt;..."></a>取消已经暂存的文件 <code>git reset HEAD &lt;file&gt;...</code></h4><p>有两个修改过的文件，我们想要分开提交，但不小心用 git add . 全加到了暂存区域。该如何撤消暂存其中的一个文件呢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset HEAD benchmarks.rb</div></pre></td></tr></table></figure></p>
<h4 id="取消对文件的修改-git-checkout-lt-file-gt"><a href="#取消对文件的修改-git-checkout-lt-file-gt" class="headerlink" title="取消对文件的修改 git checkout -- &lt;file&gt;.."></a>取消对文件的修改 <code>git checkout -- &lt;file&gt;..</code></h4><p>如果觉得刚才对 benchmarks.rb 的修改完全没有必要，该如何取消修改，回到之前的状态（也就是修改之前的版本）呢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -- benchmarks.rb</div></pre></td></tr></table></figure></p>
<p>任何已经提交到 Git 的都可以被恢复。即便在已经删除的分支中的提交，或者用 –amend 重新改写的提交，都可以被恢复（关于数据恢复的内容见第九章）。所以，你可能失去的数据，仅限于没有提交过的</p>
<h2 id="远程仓库的使用"><a href="#远程仓库的使用" class="headerlink" title="远程仓库的使用"></a>远程仓库的使用</h2><ul>
<li>查看当前的远程库 <code>git remove -v</code>,名为 origin 的远程库，Git 默认使用这个名字来标识你所克隆的原始仓库</li>
<li>添加远程仓库<code>git remote add [shortname] [url]</code></li>
<li>从远程仓库抓取数据<code>git fetch [remote-name]</code></li>
<li>推送数据到远程仓库 <code>git push [remote-name] [branch-name]</code></li>
<li>查看某个远程仓库信息<code>git remote show [remote-name]</code></li>
<li>远程仓库的删除和重命名 <code>git remote rename pb paul</code> <code>git remote rename rm [remote-name]</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">git remove -v</div><div class="line">git remote add pb git://github.com/paulboone/ticgit.git</div><div class="line">git fetch pb // </div><div class="line">git push origin master  //把本地的 master 分支推送到 origin 服务器上</div><div class="line">git remote show origin // 要看所克隆的 origin 仓库</div><div class="line"></div><div class="line">$ git remote rename pb paul</div><div class="line">    $ git remote</div><div class="line">    origin</div><div class="line">    paul</div><div class="line"></div><div class="line">git remote rm paul</div><div class="line">    $ git remote</div><div class="line">    origin</div></pre></td></tr></table></figure>
</li>
</ul>
<p>git fetch 命令只是将远端的数据拉到本地仓库，并不自动合并到当前工作分支,git pull 命令自动抓取数据下来，然后将远端分支自动合并到本地仓库中当前分支</p>
<h2 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h2><ul>
<li>列显已有的标签 <code>git tag</code></li>
<li>新建标签,含附注的标签</li>
</ul>
<h1 id="3，分支"><a href="#3，分支" class="headerlink" title="3，分支"></a>3，分支</h1><p>简单的分支与合并，实际工作中大体的工作流程<br>1，开发某个网站<br>2，为了实现某个需求，创建一个分支<br>3，在这个分支上开展工作；<br>假设此时，突然有个紧急的问题要修复，那么你可以按照下面的方式处理:<br>1,返回原先已经发布到生产服务器上的分支；<br>2，为这次紧急修补创建一个新分支，并在其中修复问题<br>3，通过测试后，回到生产服务器所在的分支，将修补分支合并进来，然后再推送到生产服务器上<br>4，切换到之前实现新需求的分支，继续工作</p>
<h2 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h2><ul>
<li>新建分支 <code>git branch xx</code>,这条命令是新建了一个分支，但是当前工作分支仍在mater分支上，要想把当前工作分支切换到新建的分支上，要执行<code>git checkout xx</code></li>
</ul>
<p>新建并切换到某分支<code>git checkout -b xx</code>相当与下面这两条命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch xx</div><div class="line">git checkout xx</div></pre></td></tr></table></figure></p>
<p>切换分支的时候要确保你当前分支不存在没有提交的修改，否则git会阻止你切换分支</p>
<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><ul>
<li>删除分支 <code>git branch -d xx</code><h2 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h2></li>
<li><p>分支的合并，比如master分支要合并xx分支，首先切换到master分支，然后执行<code>git merge xx</code>,此时xx分支已经合并到master分支上，接下来删除xx分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git checkout master</div><div class="line">git merge xx</div><div class="line">git branch -d xx</div></pre></td></tr></table></figure>
</li>
<li><p>遇到冲突时的合并，如果在不同的分支中都修改看同一个文件，git就无法将两者合并到一起</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;&lt;<span class="xml"><span class="tag">&lt;&lt;&lt;&lt;&lt; <span class="attr">HEAD:index.html</span></span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span>contact : email.support@github.com<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="xml">    =======</span></div><div class="line">    &lt;div id="footer"&gt;</div><div class="line">    please contact us at support@github.com</div><div class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="xml">    &gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>=======</code>隔开的上半部分，即<code>HEAD</code>(即<code>master</code>分支，在运行<code>merge</code>命令时所切换到的分支)，下半部分是<code>xx</code>分支的内容<br>你可以二者选其一或者整合两者到一起，然后删除<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code>=======</code> 和 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>这些行.解决完所有冲突后，运行<code>git add</code>将他们标记为已解决状态(实际就是将该文件存到暂存区，因为一旦暂存，就表示冲突已经解决)</p>
<h2 id="分支的管理"><a href="#分支的管理" class="headerlink" title="分支的管理"></a>分支的管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git branch // 列出当前所有分支，注意看master分支前的 * 字符：它表示当前所在的分支</div><div class="line">git branch -v // 查看各个分支最后一个提交对象的信息</div><div class="line">git branch --merged // 筛选与当前分支合并的分支</div><div class="line">git branch --no-merged // 筛选与当前分支尚未合并的分支，此时如果使用`git branch -d xx`删除该分支会提示错误，因为这样会丢失数据，如果你确实想删除该分支上的改动，运行`git branch -D xx`强制删除</div></pre></td></tr></table></figure>
<h2 id="利用分支开发的工作流程"><a href="#利用分支开发的工作流程" class="headerlink" title="利用分支开发的工作流程"></a>利用分支开发的工作流程</h2><h3 id="长期分支"><a href="#长期分支" class="headerlink" title="长期分支"></a>长期分支</h3><p>在master分支中保留完全稳定的代码，即已经发布或即将发布的代码，与此同时，还有一个名为develop或next的平行分支，专门用于后续的开发<br>或仅用于稳定性测试 — 当然并不是说一定要绝对稳定，不过一旦进入某种稳定状态，便可以把它合并到 master 里。这样，在确保这些已完成的特性分支（短期分支，比如之前的 iss53 分支）能够通过所有测试，并且不会引入更多错误之后，就可以并到主干分支中，等待下一次的发布。<br>你可以用这招维护不同层次的稳定性。某些大项目还会有个 proposed（建议）或 pu（proposed updates，建议更新）分支，它包含着那些可能还没有成熟到进入 next 或 master 的内容。这么做的目的是拥有不同层次的稳定性：当这些分支进入到更稳定的水平时，再把它们合并到更高层分支中去。</p>
<h3 id="特性分支"><a href="#特性分支" class="headerlink" title="特性分支"></a>特性分支</h3><p>一个特性分支是指一个短期的，用来实现单一特性或与其相关工作的分支。</p>
<h2 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h2><p>远程分支是对远程仓库中分支的索引。<br>(远程仓库)/(分支名)表示远程分支</p>
<h3 id="推送远程分支"><a href="#推送远程分支" class="headerlink" title="推送远程分支"></a>推送远程分支</h3><p>git push (远程仓库名) (分支名)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> git push origin serverfix</div><div class="line"> Git 自动把 serverfix 分支名扩展为 refs/heads/serverfix:refs/heads/serverfix，意为“取出我在本地的 serverfix 分支，推送到远程仓库的 serverfix 分支中去”。</div><div class="line">仓库中去，仍旧称它为 server</div><div class="line">git push origin serverfix:serverfix</div><div class="line">上传我本地的 serverfix 分支到远程仓库中去，仍旧称它为 serverfix 分支</div><div class="line"></div><div class="line">git push origin serverfix:awesomebranch</div><div class="line">上传我本地的 serverfix 分支到远程仓库中去，称它为 awesomebranch 分支</div></pre></td></tr></table></figure></p>
<p>如果要把该远程分支的内容合并到当前分支，可以运行 git merge origin/serverfix</p>
<p>想要基于远程分支上新建一个新的分支 git checkout -b serverfix origin/serverfix</p>
<h3 id="跟踪远程分支"><a href="#跟踪远程分支" class="headerlink" title="跟踪远程分支"></a>跟踪远程分支</h3><p>从远程分支<code>checkout</code>出来的本地分支，成为跟踪分支。跟踪分支是一种和某个远程分支有直接联系的公司；<br>克隆仓库时，git通常会自动创建一个名为<code>master</code>分支来跟踪<code>origin/master</code>;这正是 git push 和 git pull 一开始就能正常工作的原因</p>
<p> git checkout -b serverfix origin/serverfix 可以用 –track 简化:</p>
<p> git checkout –track origin/serverfix</p>
<p> 本地分支设定不同于远程分支的名字，只需在第一个版本的命令里换个名字:<br> git checkout -b sf origin/serverfix</p>
<h3 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h3><p> git push [远程名] :[分支名]</p>
<p> git push [远程名] [本地分支]:[远程分支],如果省略 [本地分支]，如果省略 [本地分支]</p>
<h2 id="分支的衍合"><a href="#分支的衍合" class="headerlink" title="分支的衍合"></a>分支的衍合</h2><p>把一个分支整合到另一个分支的办法有两种: merge rebase<br>使用衍合的目的是想要得到一个能在远程分支上干净应用的补丁,简单的说就是修改提交历史<br>一旦分支中的提交对象发布到公共仓库，就千万不要对该分支进行衍合操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git rebase --onto master server client</div><div class="line">取出 client 分支，找出 client 分支和 server 分支的共同祖先之后的变化，然后把它们在 master 上重演一遍”</div><div class="line"></div><div class="line">git rebase [主分支] [特性分支] 命令会先取出特性分支 server，然后在主分支 master 上重演：</div><div class="line">git rebase master server</div></pre></td></tr></table></figure></p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1509712673742&amp;di=2068d0d393412331fd913b9c8020ddab&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.kuqin.com%2Fupimg%2Fallimg%2F151228%2F20221CG3-2.png" alt="git"></p>
]]></content>
      
        <categories>
            
            <category> git </category>
            
        </categories>
        
        
        <tags>
            
            <tag> git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[WebRTC]]></title>
      <url>/2017/11/02/WebRTC/</url>
      <content type="html"><![CDATA[<p><img src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1501983814,3993636694&amp;fm=27&amp;gp=0.jpg" alt="WebRTC"><br><a id="more"></a></p>
<h1 id="1-WebRTC入门基础"><a href="#1-WebRTC入门基础" class="headerlink" title="1,WebRTC入门基础"></a>1,WebRTC入门基础</h1><h2 id="什么是WebRTC"><a href="#什么是WebRTC" class="headerlink" title="什么是WebRTC"></a>什么是WebRTC</h2><p>WebRtc(Web Real-Time Communication)支持网页浏览器进行实时语音对话或视频对话的技术;</p>
<p>浏览器本身不支持互相之间直接建立信道进行通信,都是通过服务器进行中转.比如现在有两个客户端,甲和乙,他们俩想要通信,首先需要甲和服务器.乙和服务器之间建立信道.甲给乙发送消息时,甲先将消息发送到服务器上,服务器对家的消息进行中转,发送到乙处,反过来也是一样.这样甲和乙之间的依次消息要通过两段信道,通信的效率同时受制于这两端信道的带宽.同时这样的信道并不适合数据流的传输</p>
<p>WebRTC是一个开源项目，旨在使得浏览器能为实时通信（RTC）提供简单的JavaScript接口;让浏览器提供JS的即时通信接口。这个接口所创立的信道并不是像WebSocket一样，打通一个浏览器与WebSocket服务器之间的通信，而是通过一系列的信令，建立一个浏览器与浏览器之间（peer-to-peer）的信道，这个信道可以发送任何数据，而不需要经过服务器。并且WebRTC通过实现MediaStream，通过浏览器调用设备的摄像头、话筒，使得浏览器之间可以传递音频和视频</p>
<h2 id="三个接口"><a href="#三个接口" class="headerlink" title="三个接口"></a>三个接口</h2><p>WebRTC实现了三个API,分别是:</p>
<ul>
<li>MediaStream: 通过MediaStream的API能够通过设备的摄像头及话筒获得视频,音频的同步流</li>
<li>RTCPeerConnection: RTCPeerConnection是WebRTC用于构建点对点之间稳定高效的流传输的组件</li>
<li>RTCDataChannel: RTCDataChannel使得浏览器之间(点对点)建立一个高吞吐量.低延时的信道,用于传输任意数据</li>
</ul>
<h3 id="MediaStream-getUserMedia"><a href="#MediaStream-getUserMedia" class="headerlink" title="MediaStream(getUserMedia)"></a>MediaStream(getUserMedia)</h3><p>通过MediaStream的API能够通过设备的摄像头及话筒获得视频,音频的同步流</p>
<h4 id="如果调用"><a href="#如果调用" class="headerlink" title="如果调用"></a>如果调用</h4><p>可以通过调用navigator.getUserMedia(),这个方法接受三个参数:<br>1,一个约束对象(constrains object)<br>2,一个调用成功的回调函数,如果调用成功,传递给他一个流对象<br>3,一个调用失败的额回调函数,如果调用失败,传递给他一个错误对象</p>
<h4 id="浏览器的兼容性"><a href="#浏览器的兼容性" class="headerlink" title="浏览器的兼容性"></a>浏览器的兼容性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">const getUserMedia = (navigator.getUserMedia || </div><div class="line">                    navigator.webkitGetUserMedia || </div><div class="line">                    navigator.mozGetUserMedia || </div><div class="line">                    navigator.msGetUserMedia);</div></pre></td></tr></table></figure>
<h4 id="约束对象"><a href="#约束对象" class="headerlink" title="约束对象"></a>约束对象</h4><p>可以被设置在<code>getUserMedia()</code>和<code>RTCPeerConnection</code>的 <code>addStream</code>方法中,这个约束对象是WebRTC用来指定接受什么样的流,其中可以定义如下属性</p>
<ul>
<li>video: 是否接受视频流</li>
<li>audio: 是否接受音频流</li>
<li>MinWidth: 视频流最小宽度</li>
<li>MaxWidth: 视频流最大宽度</li>
<li>MinHeight: 视频流最小高度</li>
<li>MaxHeight: 视频流最大高度</li>
<li>MinAspectRatio: 视频流最小宽高比</li>
<li>MaxAspectRatio: 视频流最大宽高比</li>
<li>MinFramerate: 视频流最小帧速率</li>
<li>MaxFramerate: 视频流最大帧速率</li>
</ul>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&lt;!doctype html&gt;</div><div class="line">&lt;html lang=<span class="string">"zh-CN"</span>&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;title&gt;GetUserMedia实例&lt;<span class="regexp">/title&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;video id=<span class="string">"video"</span> autoplay&gt;&lt;/video&gt;</div><div class="line">&lt;<span class="regexp">/body&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">"&gt;</span></div><div class="line"><span class="string">    var getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">    getUserMedia.call(navigator, &#123;</span></div><div class="line"><span class="string">        video: true,</span></div><div class="line"><span class="string">        audio: true</span></div><div class="line"><span class="string">    &#125;, function(localMediaStream) &#123;</span></div><div class="line"><span class="string">        var video = document.getElementById('video');</span></div><div class="line"><span class="string">        video.src = window.URL.createObjectURL(localMediaStream);</span></div><div class="line"><span class="string">        video.onloadedmetadata = function(e) &#123;</span></div><div class="line"><span class="string">            console.log("</span>Label: <span class="string">" + localMediaStream.label);</span></div><div class="line"><span class="string">            console.log("</span>AudioTracks<span class="string">" , localMediaStream.getAudioTracks());</span></div><div class="line"><span class="string">            console.log("</span>VideoTracks<span class="string">" , localMediaStream.getVideoTracks());</span></div><div class="line"><span class="string">        &#125;;</span></div><div class="line"><span class="string">    &#125;, function(e) &#123;</span></div><div class="line"><span class="string">        console.log('Reeeejected!', e);</span></div><div class="line"><span class="string">    &#125;);</span></div><div class="line"><span class="string">&lt;/script&gt;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">&lt;/html&gt;</span></div></pre></td></tr></table></figure>
<p>这里使用getUserMedia获得流之后,需要将其输出,一般绑定到<code>video</code>标签上输出,需要使用<code>window.URL.createObjectURL(localMediaStream)</code>来创造能在<code>video</code>中使用 <code>src</code>属性播放的Blob URL,注意在<code>video</code>上加入<code>autoplay</code>属性,否则只能扑火到一张图片<br>流创建完毕后可以通过label属性来获得其唯一的标识，还可以通过getAudioTracks()和getVideoTracks()方法来获得流的追踪对象数组（如果没有开启某种流，它的追踪对象数组将是一个空数组）</p>
<h2 id="PTCPeerConnection"><a href="#PTCPeerConnection" class="headerlink" title="PTCPeerConnection"></a>PTCPeerConnection</h2><p>WebRTC使用RTCPeerConnection来在浏览器之间传递流数据,这个流数据通道是点对点的,不需要经过服务器进行中转.但是这并不意味着我们能抛弃服务器.我们仍然需要它来为我们传递信令来建立这个信道.WebRTC没有定义用于建立信道的信令的协议：信令并不是RTCPeerConnection API的一部分</p>
<h4 id="信令"><a href="#信令" class="headerlink" title="信令"></a>信令</h4><p>既然没有定义具体的信令的协议，我们就可以选择任意方式（AJAX、WebSocket），采用任意的协议（SIP、XMPP）来传递信令，建立信道.比如可以用node的ws模块,在在WebSocket上传递信令<br>需要信令来交换的信息有三种：</p>
<ul>
<li>session的信息:用来初始化通信还有报错</li>
<li>网络配置: 比如IP地址和端口啥的</li>
<li>媒体适配: 发送方和接受方的浏览器能接受什么样的编码器和分辨率</li>
</ul>
<h3 id="通过服务器建立信道"><a href="#通过服务器建立信道" class="headerlink" title="通过服务器建立信道"></a>通过服务器建立信道</h3><p>就算WebRTC提供浏览器之间点对点信道的数据传输,但是建立这个信道,必须有服务器的参与,WebRTC需要服务器对其进行4方面的功能支持</p>
<ul>
<li>1,用户发现以及通信</li>
<li>2,信令传递</li>
<li>3,NAT/防火墙穿越</li>
<li>4,如果点对点通信建立失败,可以作为中转服务器</li>
</ul>
<h3 id="NAT-防火墙穿越技术"><a href="#NAT-防火墙穿越技术" class="headerlink" title="NAT/防火墙穿越技术"></a>NAT/防火墙穿越技术</h3><p>建立点对点信道的一个常见问题，就是NAT穿越技术。在处于使用了NAT设备的私有TCP/IP网络中的主机之间需要建立连接时需要使用NAT穿越技术。以往在VoIP领域经常会遇到这个问题。目前已经有很多NAT穿越技术，但没有一项是完美的，因为NAT的行为是非标准化的。这些技术中大多使用了一个公共服务器，这个服务使用了一个从全球任何地方都能访问得到的IP地址。在RTCPeeConnection中，使用ICE框架来保证RTCPeerConnection能实现NAT穿越</p>
<p>ICE，全名叫交互式连接建立（Interactive Connectivity Establishment）,一种综合性的NAT穿越技术，它是一种框架，可以整合各种NAT穿越技术如STUN、TURN（Traversal Using Relay NAT 中继NAT实现的穿透）。ICE会先使用STUN，尝试建立一个基于UDP的连接，如果失败了，就会去TCP（先尝试HTTP，然后尝试HTTPS），如果依旧失败ICE就会使用一个中继的TURN服务器。</p>
<h2 id="RTCDataChannel"><a href="#RTCDataChannel" class="headerlink" title="RTCDataChannel"></a>RTCDataChannel</h2><p>既然能建立点对点的信道来传递实时的视频,音频数据流.为什么不你能用这个信道传一点其他数据呢?RTCDataChannel就是用来干这个的,基于它我们可以再浏览器之间传输任意数据,DataChannel是建立在PeerConnection上的,不能单独使用</p>
<p>我们可以使用channel = pc.createDataCHannel(“someLabel”);来在PeerConnection的实例上创建Data Channel，并给与它一个标签<br>DataChannel使用方式几乎和WebSocket一样，有几个事件：</p>
<ul>
<li>onopen</li>
<li>onclose</li>
<li>onmessage</li>
<li>onerror</li>
</ul>
<p>同时它有几个状态，可以通过readyState获取：</p>
<ul>
<li>connecting: 浏览器之间正在试图建立channel</li>
<li>open：建立成功，可以使用send方法发送数据了</li>
<li>closing：浏览器正在关闭channel</li>
<li>closed：channel已经被关闭了<br>两个暴露的方法:</li>
<li>close(): 用于关闭channel</li>
<li>send()：用于通过channel向对方发送数据</li>
</ul>
<h3 id="通过Data-Channel发送文件大致思路"><a href="#通过Data-Channel发送文件大致思路" class="headerlink" title="通过Data Channel发送文件大致思路"></a>通过Data Channel发送文件大致思路</h3><p>JavaScript已经提供了File API从input[type=’file’]的元素中提取文件，并通过FileReader来将文件的转换成DataURL，这也意味着我们可以将DataURL分成多个碎片来通过Channel来进行文件传输</p>
<h1 id="2-信令"><a href="#2-信令" class="headerlink" title="2,信令"></a>2,信令</h1><h2 id="WebRTC的服务器"><a href="#WebRTC的服务器" class="headerlink" title="WebRTC的服务器"></a>WebRTC的服务器</h2><p>WebRTC提供了浏览器到浏览器（点对点）之间的通信，但并不意味着WebRTC不需要服务器。暂且不说基于服务器的一些扩展业务，WebRTC至少有两件事必须要用到服务器：</p>
<ol>
<li>浏览器之间交换建立通信的元数据（信令）必须通过服务器</li>
<li>为了穿越NAT和防火墙<h2 id="为什么需要信令"><a href="#为什么需要信令" class="headerlink" title="为什么需要信令"></a>为什么需要信令</h2>我们需要通过一系列的信令来建立浏览器之间的通信.而具体需要通过信令交换哪些内容,下面简单的列了一下<br>1,用来控制通信开启或者关闭的连接控制信息<br>2,发生错误时用来彼此告知的信息<br>3,媒体流元数据,比如像解码器,解码器的配置,带宽,媒体类型<br>4,用来建立安全连接的关键数据<br>5,外界所看到的网络上的数据,比如IP地址,端口等<br>在建立连接之前，浏览器之间显然没有办法传递数据。所以我们需要通过服务器的中转，在浏览器之间传递这些数据，然后建立浏览器之间的点对点连接。但是WebRTC API中并没有实现这些。</li>
</ol>
<h2 id="会话描述协议-Session-Description-Protocol"><a href="#会话描述协议-Session-Description-Protocol" class="headerlink" title="会话描述协议(Session Description Protocol)"></a>会话描述协议(Session Description Protocol)</h2><p>JSEP将客户端之前传递的信令分为两种:offer信令和answer信令.他们主要内容的格式都遵循会话描述协议(Session Description Protocol,简称SDP)<br>是一个在点对点连接中描述自己的字符串.我们可以将其封装在JSON中进行传输,在PeerConnection建立后将通过服务器中转后,将自己的SDP描述符和对方的SDP描述符交给PeerConnection就行了</p>
<h2 id="信令与PTCPeerConnection建立"><a href="#信令与PTCPeerConnection建立" class="headerlink" title="信令与PTCPeerConnection建立"></a>信令与PTCPeerConnection建立</h2><h4 id="1-通过offer和answer交换SDP描述符"><a href="#1-通过offer和answer交换SDP描述符" class="headerlink" title="1,通过offer和answer交换SDP描述符"></a>1,通过offer和answer交换SDP描述符</h4><p>大致上在两个用户（甲和乙）之间建立点对点连接流程应该是这个样子（这里不考虑错误的情况，RTCPeerConnection简称PC）：</p>
<ol>
<li>甲和乙各自建立一个PC实例</li>
<li>甲通过PC所提供的createOffer()方法建立一个包含甲的SDP描述符的offer信令</li>
<li>甲通过PC所提供的setLocalDescription()方法，将甲的SDP描述符交给甲的PC实例</li>
<li>甲将offer信令通过服务器发送给乙</li>
<li>乙将甲的offer信令中所包含的的SDP描述符提取出来，通过PC所提供的setRemoteDescription()方法交给乙的PC实例</li>
<li>乙通过PC所提供的createAnswer()方法建立一个包含乙的SDP描述符answer信令</li>
<li>乙通过PC所提供的setLocalDescription()方法，将乙的SDP描述符交给乙的PC实例</li>
<li>乙将answer信令通过服务器发送给甲</li>
<li>甲接收到乙的answer信令后，将其中乙的SDP描述符提取出来，调用setRemoteDescripttion()方法交给甲自己的PC实例</li>
</ol>
<p>甲和乙所创建的PC实例都包含了甲和乙的SDP描述符,接下来–获取连接两端主机的网络地址</p>
<h4 id="2-通过ICE框架建立NAT-防火墙穿越的连接"><a href="#2-通过ICE框架建立NAT-防火墙穿越的连接" class="headerlink" title="2,通过ICE框架建立NAT/防火墙穿越的连接"></a>2,通过ICE框架建立NAT/防火墙穿越的连接</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> iceServer = &#123;</div><div class="line">    <span class="string">"iceServers"</span>: [&#123;</div><div class="line">        <span class="string">"url"</span>: <span class="string">"stun:stun.l.google.com:19302"</span></div><div class="line">    &#125;]</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> pc = <span class="keyword">new</span> RTCPeerConnection(iceServer);</div></pre></td></tr></table></figure>
<p>当然这两个地址也需要交换,交换流程如下(RTCPeerConnection简称PC);<br>1,甲,乙各创建配置了ICE服务器的PC实例,并为其添加<code>onicecandidate</code>事件回调<br>2,当网络候选可用时,将会调用<code>onicecandidate</code>函数<br>3,在回调函数内部,甲或乙将网络候选色消息封装在ICE  Candidate命令中,通过服务器中转,传递给对方<br>4,甲或乙接收到对方通过服务器中转所发送过来ICE Candidate信令时,将其解析并并获得网络候选,将其通过PC实例的<code>addIceCandidate()</code>添加到PC实例中</p>
<p>这样连接就创建完成了,可以向RTCPeerConnection中通过<code>addStream()</code>加入流来传输媒体流出具.将流加入到RTCPeerConnection实例中,对方就可以通过<code>onaddstream</code>所绑定的回调函数监听到了,调用<code>addStream()</code>可以再连接完成之前,在连接建立之后,对方一样能监听到媒体流</p>
<h3 id="聊天室中的信令"><a href="#聊天室中的信令" class="headerlink" title="聊天室中的信令"></a>聊天室中的信令</h3><h4 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h4><p>1,打开页面连接到服务器<br>2,进入聊天室<br>3,与其他所有已在聊天室的用户建立点对点的连接,输入到页面<br>4,若有聊天室内其他用户离开,得到通知,关闭与其的连接并移除其在页面中的输出<br>5,若又有其他用户加入,应得到通知,建立与新加入用户的连接,并输出在页面上<br>6.离开页面,关闭所有连接</p>
<h4 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h4><p>以使用WebSocket为例<br>1,浏览器与服务器建立WebSocket连接<br>2,发送一个加入聊天室的信令(join),信令中需要包含用户所进入的聊天室名称<br>3,服务器根据用户所加入的房阿金,发送一个其他用户信令(peers);信令中包含聊天室其他用户的信息,浏览器根据信息来逐个构建与其他用户的点对点连接<br>4,若有用户离开,服务器发送一个用户离开信令(remove_peer),信令中包含离开的用户的信息,浏览器根据信息关闭与离开用户的信息,并作相应的清除操作<br>5,若有新用户加入,服务器发送一个用户加入信令(new_peer),信令中包含新加入的用户信息,浏览器根据信息来建立与这个新用户的点对点连接;<br>6,用户离开页面,关闭WebSocket连接</p>
<h4 id="服务器端实现"><a href="#服务器端实现" class="headerlink" title="服务器端实现"></a>服务器端实现</h4><p>由于用户可以只是建立连接，可能还没有进入具体房间，所以首先我们需要一个容器来保存所有用户的连接，同时监听用户是否与服务器建立了WebSocket的连接：<br>由于有房间的划分，所以我们需要在服务器上建立一个容器，用来保存房间内的用户信息。显然对象较为合适，键为房间名称，值为用户信息列表。</p>
<p>同时我们需要监听上面所说的用户加入房间的信令（join），新用户加入之后需要向新用户发送房间内其他用户信息（peers）和向房间内其他用户发送新用户信息（new_peer），以及用户离开时向其他用户发送离开用户的信息（remove_peer）:</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://segmentfault.com/a/1190000000436544" target="_blank" rel="external">使用WebRTC搭建前端视频聊天室——入门篇</a></li>
<li><a href="https://segmentfault.com/a/1190000000439103" target="_blank" rel="external">使用WebRTC搭建前端视频聊天室——信令篇</a></li>
<li><a href="https://segmentfault.com/a/1190000000733774" target="_blank" rel="external">使用WebRTC搭建前端视频聊天室——点对点通信篇</a></li>
<li><a href="https://segmentfault.com/a/1190000000733779" target="_blank" rel="external">使用WebRTC搭建前端视频聊天室——数据通道篇</a></li>
<li><a href="https://segmentfault.com/a/1190000005864228" target="_blank" rel="external">使用 WebRTC 构建简单的前端视频通讯</a></li>
<li><a href="http://ghmagical.com/article/page/id/3sHkVEi4K1JO" target="_blank" rel="external">直播和截图</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> WebRTC </category>
            
        </categories>
        
        
        <tags>
            
            <tag> WebRTC </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[数组减去另一数组(数组的每一项都是一个对象)]]></title>
      <url>/2017/10/21/%E6%95%B0%E7%BB%84%E5%87%8F%E5%8E%BB%E5%8F%A6%E4%B8%80%E6%95%B0%E7%BB%84-%E6%95%B0%E7%BB%84%E7%9A%84%E6%AF%8F%E4%B8%80%E9%A1%B9%E9%83%BD%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/timg.jpeg-blogImg" alt="title"><br>做聊天项目的时候遇要实现这样的一个功能: 邀请新的好友入群;点击邀请好友会弹出一个好友列表,显示你除了在群里面的好友外剩下的所有好友;<br>我的思路是取到你所有的好友,然后所有好友中过滤掉已经是群成员的好友<br><a id="more"></a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> users = [</div><div class="line">    &#123;</div><div class="line">        _id: <span class="number">1</span>,</div><div class="line">        name: <span class="string">'好友1'</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        _id: <span class="number">2</span>,</div><div class="line">        name: <span class="string">'好友1'</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        _id: <span class="number">3</span>,</div><div class="line">        name: <span class="string">'好友1'</span></div><div class="line">    &#125;,</div><div class="line">];</div><div class="line"><span class="keyword">const</span> groupMembers = [</div><div class="line">    &#123;</div><div class="line">        _id: <span class="number">1</span>,</div><div class="line">        name: <span class="string">'好友1'</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        _id: <span class="number">2</span>,</div><div class="line">        name: <span class="string">'好友1'</span></div><div class="line">    &#125;,</div><div class="line">]</div></pre></td></tr></table></figure>
<p>现在一步一步来看数组的操作</p>
<h2 id="一-两个数组里的每一项分别为元素时"><a href="#一-两个数组里的每一项分别为元素时" class="headerlink" title="一,两个数组里的每一项分别为元素时"></a>一,两个数组里的每一项分别为元素时</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr1 = [<span class="string">''</span>, <span class="string">'100'</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>];</div><div class="line"></div><div class="line"><span class="keyword">const</span> arr2 = [<span class="string">''</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>];</div><div class="line"></div><div class="line">请问如何求得两个数组之差？使得新数组为 arr3 = [<span class="string">'100'</span>,<span class="string">'130'</span>]</div></pre></td></tr></table></figure>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一:"></a>方法一:</h3><p>思路:用for循环比较arr1和arr2的每一项,如果相等,就删除<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr1 = [<span class="string">''</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>];</div><div class="line"></div><div class="line"><span class="keyword">const</span> arr2 = [<span class="string">''</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>];</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = arr1.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">    a = arr1[i];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = arr2.length - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</div><div class="line">        b = arr2[j];</div><div class="line">        <span class="keyword">if</span> (a == b) &#123;</div><div class="line">            arr1.splice(i, <span class="number">1</span>);</div><div class="line">            arr2.splice(j, <span class="number">1</span>);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(arr1);  <span class="comment">// ['125','130','130','130','130']</span></div></pre></td></tr></table></figure></p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二:"></a>方法二:</h3><p>思路:将第一个数组存入一个对象，这样就已经去重了；再把第二个数组中的元素当作key从对象中删除。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> m = &#123;&#125;;</div><div class="line">arr1.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">al</span>)</span>&#123;m[al]=al;&#125;)</div><div class="line">arr2.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">bl</span>)</span>&#123;<span class="keyword">delete</span> m[bl];&#125;)</div><div class="line"><span class="built_in">console</span>.dir(<span class="built_in">Object</span>.keys(m))</div></pre></td></tr></table></figure></p>
<h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三:"></a>方法三:</h3><p>思路:声明一个新的数组arr3,比较arr1和arr2,如果arr1中有和arr2不相等的就放入arr3中,用到了es6中关于数组的新方法<code>findIndex()</code>,稍后会详细的介绍;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr1 = [<span class="string">''</span>, <span class="string">'100'</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>, <span class="string">'130'</span>];</div><div class="line"><span class="keyword">const</span> arr2 = [<span class="string">''</span>, <span class="string">'120'</span>, <span class="string">'125'</span>, <span class="string">'125'</span>, <span class="string">'130'</span>];</div><div class="line"><span class="keyword">const</span> arr3 = [];</div><div class="line">arr1.forEach(<span class="function">(<span class="params">a</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">let</span> c = arr2.findIndex(<span class="function"><span class="params">b</span> =&gt;</span>a === b);</div><div class="line">    <span class="keyword">if</span> (c &gt; <span class="number">-1</span>) <span class="keyword">delete</span> arr2[c];</div><div class="line">    <span class="keyword">else</span> arr3.push(a);</div><div class="line">&#125;);</div><div class="line"><span class="built_in">console</span>.log(arr3)  <span class="comment">//['100', '130']</span></div></pre></td></tr></table></figure></p>
<h2 id="二-arr1中的每一项都是对象-arr2中的每一项都是元素"><a href="#二-arr1中的每一项都是对象-arr2中的每一项都是元素" class="headerlink" title="二, arr1中的每一项都是对象,arr2中的每一项都是元素"></a>二, arr1中的每一项都是对象,arr2中的每一项都是元素</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> a = [&#123; <span class="attr">id</span>: <span class="number">15</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">-1</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">12.2</span> &#125;];</div><div class="line"><span class="keyword">const</span> b = [<span class="number">15</span>, <span class="number">3</span>];</div></pre></td></tr></table></figure>
<h3 id="方法一-1"><a href="#方法一-1" class="headerlink" title="方法一"></a>方法一</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a.filter(<span class="function"><span class="params">item</span> =&gt;</span> &#123; <span class="keyword">return</span> !b.includes(item.id); &#125;);</div><div class="line">或</div><div class="line">a.filter(<span class="function"><span class="params">item</span> =&gt;</span> &#123; <span class="keyword">return</span> b.indexOf(item.id) === <span class="number">-1</span>; &#125;);</div></pre></td></tr></table></figure>
<h3 id="方法二-1"><a href="#方法二-1" class="headerlink" title="方法二:"></a>方法二:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a=a.filter(<span class="function">(<span class="params">x</span>)=&gt;</span>b.every(<span class="function">(<span class="params">y</span>)=&gt;</span>y!=x.id))</div></pre></td></tr></table></figure>
<h3 id="方法三-1"><a href="#方法三-1" class="headerlink" title="方法三:"></a>方法三:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> a = [&#123; <span class="attr">id</span>: <span class="number">15</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">-1</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">0</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">12.2</span> &#125;];</div><div class="line"><span class="keyword">const</span> b = [<span class="number">15</span>, <span class="number">3</span>];</div><div class="line"><span class="keyword">for</span>(index <span class="keyword">in</span> a)&#123;</div><div class="line">    <span class="keyword">if</span>(b.indexOf(a[index][<span class="string">'id'</span>])&gt;=<span class="number">0</span>)</div><div class="line">        a.splice(index,<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a);</div><div class="line">或</div><div class="line"><span class="keyword">const</span> result = a.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> b.indexOf(item.id) &lt; <span class="number">0</span>;</div><div class="line"> &#125;)</div></pre></td></tr></table></figure>
<h2 id="三-arr1中的每一项都是对象-arr2中的每一项也都是对象-现在回到主题"><a href="#三-arr1中的每一项都是对象-arr2中的每一项也都是对象-现在回到主题" class="headerlink" title="三,arr1中的每一项都是对象,arr2中的每一项也都是对象,现在回到主题"></a>三,arr1中的每一项都是对象,arr2中的每一项也都是对象,现在回到主题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> a = [</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="number">1</span>&#125;,</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="number">2</span>&#125;,</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="number">3</span>&#125;,</div><div class="line">];</div><div class="line"><span class="keyword">const</span> b = [</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="number">2</span>&#125;,</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="number">4</span>&#125;,</div><div class="line">]</div></pre></td></tr></table></figure>
<h3 id="解决方法一"><a href="#解决方法一" class="headerlink" title="解决方法一:"></a>解决方法一:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> c = a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !b.find(<span class="function"><span class="params">y</span> =&gt;</span> y._id === x._id)); <span class="comment">// [ &#123; _id: 1 &#125;, &#123; _id: 3&#125; ]</span></div></pre></td></tr></table></figure>
<h3 id="解决方法二"><a href="#解决方法二" class="headerlink" title="解决方法二:"></a>解决方法二:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> c = a.filter(<span class="function"><span class="params">x</span> =&gt;</span> b.every(<span class="function"><span class="params">y</span> =&gt;</span> y._id !== x._id));</div></pre></td></tr></table></figure>
<h2 id="四-介绍一下上面用到的数组实例中的find-findIndex-includes"><a href="#四-介绍一下上面用到的数组实例中的find-findIndex-includes" class="headerlink" title="四,介绍一下上面用到的数组实例中的find(), findIndex(), includes()"></a>四,介绍一下上面用到的数组实例中的<code>find()</code>, <code>findIndex()</code>, <code>includes()</code></h2><h3 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h3><p><code>find()</code>用于找出第一个符合条件的数组成员,它的参数是一个回调函数,所有的数组成员依次执行该回调函数,直到找到第一个返回值为true的成员,然后返回该成员,如果没有的话,返回undefined<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="number">0</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">-10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>);</div><div class="line"><span class="comment">// -5</span></div></pre></td></tr></table></figure></p>
<p>上面代码找出数组中第一个小于0的成员<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].find(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</div><div class="line">&#125;) </div><div class="line"><span class="comment">// 10</span></div></pre></td></tr></table></figure></p>
<p><code>find</code>方法的回调函数可以接受三个参数,当前的值,当前的位置和原数组</p>
<h3 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex()"></a>findIndex()</h3><p><code>findIndex()</code>方法的用法与<code>find()</code>方法类似,返回第一个符合条件的数组成员的位置,如果所有成员都不符合,则返回<code>-1</code>.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</div><div class="line">&#125;) </div><div class="line"><span class="comment">// 2</span></div></pre></td></tr></table></figure></p>
<p>两个方法都可以发现NAN,弥补了数组的<code>indexOf</code>方法的不足<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</div><div class="line"><span class="comment">// -1</span></div><div class="line"></div><div class="line">[<span class="literal">NaN</span>].findIndex(<span class="function"><span class="params">y</span> =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y))</div><div class="line"><span class="comment">// 0</span></div></pre></td></tr></table></figure></p>
<p><code>indexOf</code>方法无法识别数组的<code>NaN</code>成员,但是<code>findIndex</code>方法可以借助<code>Object.is</code>方法做到</p>
<h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a><code>includes()</code></h3><p><code>Array.prototype.includes</code>方法返回一个布尔值,表达某个数组是否包含给定的值,与字符串的<code>includes</code>方法类似</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>)     <span class="comment">// true</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>)     <span class="comment">// false</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>].includes(<span class="literal">NaN</span>) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>该方法的第二个参数表示搜索的起始位置,默认为<code>0</code>,如果第二个参数为负数,表示倒数的位置;如果这是它大于数组长度(比如第二个参数为<code>-4</code>.但是数组长度为<code>3</code>),则会重置为从<code>0</code>开始<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">3</span>);  <span class="comment">// false</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">3</span>, <span class="number">-1</span>); <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p>没有该方法之前,我们通常使用数组的<code>indexOf</code>方法,检查是否包含某个值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (arr.indexOf(el) !== <span class="number">-1</span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>indexOf</code>方法有两个缺点,一是不够语义化.它的含义是找到参数值的第一个出现位置.所以要去比较是否不等于<code>-1</code>,而是,它内部使用严格相等运算符(<code>===</code>)进行判断,这会导致对<code>NaN</code>的误判<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</div><div class="line"><span class="comment">// -1</span></div></pre></td></tr></table></figure></p>
<p>includes使用的是不一样的判断算法，就没有这个问题。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="literal">NaN</span>].includes(<span class="literal">NaN</span>)</div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://segmentfault.com/q/1010000004981935" target="_blank" rel="external">数组减去另一个数组</a></li>
<li><a href="https://segmentfault.com/q/1010000008836875" target="_blank" rel="external">js 根据一个数组元素，删除另一个数组中的对象</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/array" target="_blank" rel="external">ECMAScript6入门之数组的拓展</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[前端路由history vs hash]]></title>
      <url>/2017/10/15/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1history-vs-hash/</url>
      <content type="html"><![CDATA[<p><img src="http://7xr2s7.com1.z0.glb.clouddn.com/%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%861.jpg" alt=""><br><a id="more"></a></p>
<h2 id="history路由机制"><a href="#history路由机制" class="headerlink" title="history路由机制"></a>history路由机制</h2><p>用户访问网页的历史记录通常会被保存在一个类似栈对象中,即history对象,点击返回就出栈,跳下一页就入栈.它提供了一些方法来操作页面的前进和后退:</p>
<ul>
<li>window.history.back()返回到上一个页面</li>
<li>window.history.forward()进入到下一个页面</li>
<li>window.history.go([delta])跳转到指定页面<br>HTML5对history Api进行了增强,新增了两个Api和一个事件,分别为pushState,replaceState和onpopstate<br>pushState是往history对象里添加一个新的历史记录,即压栈<br>replaceState是替换history对象中的当前历史;<br>这两个API相同之处都会操作浏览器的历史记录,而不会引起页面的刷新;不同之处在于,pushState会增加一条新的历史记录,而replaceState则会替换当前的历史记录<br>当点击浏览器后退按钮或js调用history.back都会触发onpopstate事件,与其类似的还有一个事件:onhashchange</li>
</ul>
<h2 id="hash路由机制"><a href="#hash路由机制" class="headerlink" title="hash路由机制"></a>hash路由机制</h2><p>我们经常在url中看到#,这个#有两个情况,一个是我们所谓的锚点,比如典型的回到顶部按钮原理,github上各个标题之间的跳转等,路由里的#不叫锚点,我们称之为hash,大型框架的路由系统大多都是哈希实现的<br>onhashchange 事件在当前 URL 的锚部分(以 ‘#’ 号为开始) 发生改变时触发</p>
<h2 id="hashhistory与browserhistory"><a href="#hashhistory与browserhistory" class="headerlink" title="hashhistory与browserhistory"></a>hashhistory与browserhistory</h2><ul>
<li>使用 hashHistory，浏览器上看到的 url 会是这样的: /#/user/haishanh?_k=adseis</li>
<li>使用 browserHistory，浏览器上看到的 url 会是这样的：/user/haishanh</li>
<li>看起来当然browerHistory很好很理想,但browweHistory需要server端支持,而使用hashHistory的时候，因为 url 中 # 符号的存在，从 /#/ 到 /#/user/haishanh 浏览器并不会去发送一次 request，react-router 自己根据 url 去 render 相应的模块。</li>
<li>而使用 browserHistory 的时候，浏览器从 / 到 /user/haishanh 是会向 server 发送 request 的。所以 server 端是要做特殊配置的。比如用的 express 的话，你需要 handle 所有的路由 app.get(‘*’, (req, res) =&gt; { … })，使用了 nginx 的话，nginx也要做相应的配置。<br>所以你的 App 是静态，没有服务端的话，只能用 hashHistory。</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[mongoDB]]></title>
      <url>/2017/10/14/mongoDB/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/mongodb.jpg" alt="mongoDB"><br><a id="more"></a><br>MongoDB是一个通用的<code>非关系型</code>数据库;把文档存在集合中;它们不需要相同的schema,每个文档都可以有不同的schema<br>Mongoose是一个Node模块;Mongoose的基础知识如下:</p>
<ul>
<li>打开或关闭MongoDB连接;</li>
<li>注册schema;</li>
<li>添加任务;</li>
<li>搜索文档</li>
<li>更新文档</li>
<li>删除文档<br>首先可以用npm 命令安装Mongoose;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install mongoose</div></pre></td></tr></table></figure>
<h2 id="1-连接的打开和关闭"><a href="#1-连接的打开和关闭" class="headerlink" title="1,连接的打开和关闭"></a>1,连接的打开和关闭</h2><p>装好Mongoose,启动MongoDB服务器,用下面的代码建立到MongoDBd的连接,在下面的例子中是一个叫tasks的数据库<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">' mongoose'</span>);</div><div class="line"><span class="keyword">const</span> db = mongoose.connect(<span class="string">' mongodb:// localhost/ tasks'</span>);</div></pre></td></tr></table></figure></p>
<p>如果要终止MongoDB创建的连接,<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoose.disconnect();</div></pre></td></tr></table></figure></p>
<h2 id="2-注册schema"><a href="#2-注册schema" class="headerlink" title="2,注册schema"></a>2,注册schema</h2><p>在用MongoDB管理数据时,需要注册schema<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Schema = mongoose.Schema;</div><div class="line"><span class="keyword">const</span> Tasks = <span class="keyword">new</span> Schema(&#123; </div><div class="line">    project: <span class="built_in">String</span>,</div><div class="line">     description: <span class="built_in">String</span> </div><div class="line">&#125;);</div><div class="line">mongoose.model(<span class="string">' Task'</span>, Tasks);</div></pre></td></tr></table></figure></p>
<p>Mongoose的schema很强大.除了定义数据结构,还可以设定默认值,处理输入,以及加强校验</p>
<h2 id="3-添加任务"><a href="#3-添加任务" class="headerlink" title="3,添加任务"></a>3,添加任务</h2><p>schema注册好后,你可以访问它,让Mongoose去工作,下面的代码用模型添加了一项任务<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Task = mongoose. model(<span class="string">' Task'</span>);</div><div class="line"><span class="keyword">const</span> task = <span class="keyword">new</span> Task();</div><div class="line">task.project = <span class="string">'Bikeshed'</span>;</div><div class="line">task.description = <span class="string">'Paint the bikeshed red.'</span>;</div><div class="line">task.save( <span class="function"><span class="keyword">function</span>(<span class="params"> err</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">' Task saved.'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="4-搜索文档"><a href="#4-搜索文档" class="headerlink" title="4,搜索文档"></a>4,搜索文档</h2><p>Task模型的find方法可以用来查找所有文档,或者用一个JavaScript对象指明一个过滤标准来选择特定的文.下面这段代码搜索跟特定项目相关的任务,并输出每项任务的唯一ID和描述<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Task = mongoose.model(<span class="string">' Task'</span>);</div><div class="line">Task.find(&#123;<span class="string">' project'</span>: <span class="string">'Bikeshed'</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"> err, tasks</span>) </span>&#123; </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> i = <span class="number">0</span>; i &lt; tasks.length; i++) &#123; </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">' ID:'</span> + tasks[ i]._ id);</div><div class="line">        <span class="built_in">console</span>.log( tasks[ i]. description);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="5-更新文档"><a href="#5-更新文档" class="headerlink" title="5,更新文档"></a>5,更新文档</h2><p>尽管用模型的find方法可以定位一个文档,然后修改并保存它,但Mongoose还有一个update方法专门来做这个.<br>下面的代码用Mongoose更新了一个新的文档</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Task = mongoose. model(<span class="string">' Task'</span>);</div><div class="line">Task.update(</div><div class="line">    &#123;<span class="attr">_id</span>: <span class="string">'4e65b793d0cf5ca508000001'</span>&#125;, 　 　<span class="comment">// 用 内部 ID 更新</span></div><div class="line">    &#123;<span class="attr">description</span>: <span class="string">'Paint the bikeshed green.'</span>&#125;,</div><div class="line">    &#123;<span class="attr">multi</span>: <span class="literal">false</span>&#125;, <span class="comment">//只 更新 一个 文档</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"> err, rows_ updated</span>) </span>&#123; </div><div class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">' Updated.'</span>);</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="6-删除文档"><a href="#6-删除文档" class="headerlink" title="6,删除文档"></a>6,删除文档</h2><p>在Mongoose中,一旦你取到了文档,要删除它很容易.你可以用文档的内部ID(或其他任何条件,如果你用find代替finById的话)获取和删除文档,代码就像下面弄这样<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Task = mongoose.model(<span class="string">' Task'</span>);</div><div class="line">Task.findById(<span class="string">' 4e65b3dce1592f7d08000001'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> err, task</span>)</span>&#123;</div><div class="line">    task. remove();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h2><ul>
<li><a href="https://robomongo.org/download" target="_blank" rel="external">robomongo下载</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> mongoDB </category>
            
        </categories>
        
        
        <tags>
            
            <tag> mongoDB </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[git]]></title>
      <url>/2017/10/12/2017-10-12-git/</url>
      <content type="html"><![CDATA[<p><img src="http://static.open-open.com/lib/uploadImg/20141015/20141015084602_745.png" alt="title"><br><a id="more"></a></p>
<h3 id="1-工作区-暂存区-本地仓库-远程仓库"><a href="#1-工作区-暂存区-本地仓库-远程仓库" class="headerlink" title="1,工作区,暂存区,本地仓库,远程仓库"></a>1,工作区,暂存区,本地仓库,远程仓库</h3><p><img src="http://oo4xdz5i0.bkt.clouddn.com/git.png" alt=""></p>
<h3 id="2-git-添加远程仓库地址-拉项目-推项目"><a href="#2-git-添加远程仓库地址-拉项目-推项目" class="headerlink" title="2,git 添加远程仓库地址/拉项目/推项目"></a>2,git 添加远程仓库地址/拉项目/推项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">git remote add mayun https://git.oschina.net/fenmiaojinrong/fmjr.git</div><div class="line"></div><div class="line">git branch --set-upstream master mayun/master</div><div class="line"></div><div class="line">git pull</div><div class="line"></div><div class="line">git add .</div><div class="line"></div><div class="line">git commit -m&quot;解决冲突&quot;</div><div class="line"></div><div class="line">git push</div></pre></td></tr></table></figure>
<h3 id="3-git-版本回退"><a href="#3-git-版本回退" class="headerlink" title="3,git -版本回退"></a>3,git -版本回退</h3><h4 id="本地回退版本"><a href="#本地回退版本" class="headerlink" title="本地回退版本"></a>本地回退版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset &lt;the-hash&gt;</div></pre></td></tr></table></figure>
<h4 id="远程回退版本"><a href="#远程回退版本" class="headerlink" title="远程回退版本"></a>远程回退版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">git push --force &lt;remote&gt; &lt;the-hash&gt;:&lt;the remote branch&gt;</div></pre></td></tr></table></figure>
<h4 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase -i &lt;the-hash&gt;</div></pre></td></tr></table></figure>
<h4 id="清空本地改动"><a href="#清空本地改动" class="headerlink" title="清空本地改动"></a>清空本地改动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clean -fd</div></pre></td></tr></table></figure>
<h4 id="取消应该被跟踪的改动"><a href="#取消应该被跟踪的改动" class="headerlink" title="取消应该被跟踪的改动"></a>取消应该被跟踪的改动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">git rm --cached &lt;file&gt;</div></pre></td></tr></table></figure>
<h4 id="临时取消工作区指定文件改动"><a href="#临时取消工作区指定文件改动" class="headerlink" title="临时取消工作区指定文件改动"></a>临时取消工作区指定文件改动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">git update-index --assume-unchanged &lt;file&gt; </div><div class="line">git update-index --no-assume-unchanged &lt;file&gt;</div></pre></td></tr></table></figure>
<h3 id="4-在master上建了一个分支next-但是master上有改动-需要next主动去合并master分支"><a href="#4-在master上建了一个分支next-但是master上有改动-需要next主动去合并master分支" class="headerlink" title="4,在master上建了一个分支next,但是master上有改动,需要next主动去合并master分支"></a>4,在master上建了一个分支next,但是master上有改动,需要next主动去合并master分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">next merge master</div></pre></td></tr></table></figure>
<h3 id="5-git-远程仓库法人删除和重命名"><a href="#5-git-远程仓库法人删除和重命名" class="headerlink" title="5,git -远程仓库法人删除和重命名"></a>5,git -远程仓库法人删除和重命名</h3><p>在新版 Git 中可以用 git remote rename 命令修改某个远程仓库在本地的简称，比如想把 pb 改成paul，可以这么运行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git remote rename pb paul</div><div class="line">$ git remote</div><div class="line">origin</div><div class="line">paul</div></pre></td></tr></table></figure></p>
<p>注意，对远程仓库的重命名，也会使对应的分支名称发生变化，原来的 pb/master分支现在成了paul/master。</p>
<p>碰到远端仓库服务器迁移，或者原来的克隆镜像不再使用，又或者某个参与者不再贡献代码，那么需要移除对应的远端仓库，可以运行 git remote rm 命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git remote rm paul</div><div class="line">$ git remote</div><div class="line">origin</div></pre></td></tr></table></figure></p>
<h3 id="git-拉取远程分支"><a href="#git-拉取远程分支" class="headerlink" title="git -拉取远程分支"></a>git -拉取远程分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout --track remotes/origin/react</div></pre></td></tr></table></figure>
<h3 id="6-友情链接"><a href="#6-友情链接" class="headerlink" title="6,友情链接"></a>6,友情链接</h3><ul>
<li><a href="http://pan.baidu.com/s/1i5L40aL" target="_blank" rel="external">windows上Git下载</a></li>
<li><a href="http://git.oschina.net/progit/" target="_blank" rel="external">progit</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> git </category>
            
        </categories>
        
        
        <tags>
            
            <tag> git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[2017年国庆节-杭州&&上海]]></title>
      <url>/2017/10/09/2017-10-09-%E5%9B%BD%E5%BA%86%E8%8A%82/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_yunhe.JPG" alt="京杭大运河"></p>
<a id="more"></a>
<h2 id="10-01-10-02-coding-at-home"><a href="#10-01-10-02-coding-at-home" class="headerlink" title="10.01~10.02 coding at home"></a>10.01~10.02 coding at home</h2><p>今年的国庆节和中秋节一共八天假,期待了很久的假期;<br>前两天自己在家写了两天代码,研究了一下项目用meteor和react结合做全栈;</p>
<h2 id="10-03-浙大-将军山"><a href="#10-03-浙大-将军山" class="headerlink" title="10.03 浙大 + 将军山"></a>10.03 浙大 + 将军山</h2><ul>
<li>5点起床,打车去首都机场,前往杭州,打印登机牌,办理行李托运,最后安检的时候被扣下了一瓶海飞丝,(规定是不允许带超过100ml的液体,哎,也是第一次做飞机,平常去的地方都特别近),大概在天上飞了两个半小时,飞机上的风景很美很美,看到了蓝天白云,上午10点左右,到达杭州,跟在天上看到的完全是两个样子,没有蓝天白云.</li>
<li>查找路线,坐公交去定好的酒店,杭州的公交支持支付宝直接付款,这个真的很方便,不用直接去换零钱;</li>
<li>在酒店里休息了一下就开始规划这几天在杭州的路线,浙大就在酒店的附近,就骑着车子去了,杭州的路比北京的要宽很多,路两边的树很多,而且树长的都很大;</li>
</ul>
<h4 id="浙大玉泉校区"><a href="#浙大玉泉校区" class="headerlink" title="浙大玉泉校区"></a>浙大玉泉校区</h4><p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_zd.jpg" alt=""></p>
<h4 id="将军山"><a href="#将军山" class="headerlink" title="将军山"></a>将军山</h4><p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_jjs.jpg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_sd.jpg" alt=""></p>
<h2 id="10-04-西湖-杭州海底世界-京杭运河"><a href="#10-04-西湖-杭州海底世界-京杭运河" class="headerlink" title="10.04 西湖 + 杭州海底世界 + 京杭运河"></a>10.04 西湖 + 杭州海底世界 + 京杭运河</h2><p>来杭州当然一定要去看一下西湖,于是就骑着车子去西湖了,人特别的多,<br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_xh.jpg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_leifeng.JPG" alt=""></p>
<p><img src="http://oo4xdz5i0.bkt.clouddn.com/hd.jpg" alt=""></p>
<h4 id="晚上-游京杭运河-夜景真的很美很美-杭州真的很会使用灯光搭配-武林门码头坐游船-差不多一百元一位-白天有水上的公交-才三元-所以你可以晚上早点去-然后做最后一班公交-这样即会节省一部分开支-又可以看到晚上的夜景"><a href="#晚上-游京杭运河-夜景真的很美很美-杭州真的很会使用灯光搭配-武林门码头坐游船-差不多一百元一位-白天有水上的公交-才三元-所以你可以晚上早点去-然后做最后一班公交-这样即会节省一部分开支-又可以看到晚上的夜景" class="headerlink" title="晚上,游京杭运河,夜景真的很美很美,杭州真的很会使用灯光搭配;武林门码头坐游船,差不多一百元一位,白天有水上的公交,才三元,所以你可以晚上早点去,然后做最后一班公交,这样即会节省一部分开支,又可以看到晚上的夜景"></a>晚上,游京杭运河,夜景真的很美很美,杭州真的很会使用灯光搭配;武林门码头坐游船,差不多一百元一位,白天有水上的公交,才三元,所以你可以晚上早点去,然后做最后一班公交,这样即会节省一部分开支,又可以看到晚上的夜景</h4><p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_yunhe1.JPG" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_yunhe2.JPG" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_yunhe3.JPG" alt=""></p>
<h2 id="10-05-西溪-断桥"><a href="#10-05-西溪-断桥" class="headerlink" title="10.05 西溪 + 断桥"></a>10.05 西溪 + 断桥</h2><p><img src="http://oo4xdz5i0.bkt.clouddn.com/XIXI.jpg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_xixi.JPG" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_xixi1.JPG" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_xixi2.JPG" alt=""></p>
<h4 id="大概断桥就是被人压断的吧-O-∩-∩-O哈哈"><a href="#大概断桥就是被人压断的吧-O-∩-∩-O哈哈" class="headerlink" title="大概断桥就是被人压断的吧,O(∩_∩)O哈哈~"></a>大概断桥就是被人压断的吧,O(∩_∩)O哈哈~</h4><p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_duanqiao.jpeg" alt=""></p>
<h2 id="10-06-东方明珠-上海世贸大厦最高观光厅"><a href="#10-06-东方明珠-上海世贸大厦最高观光厅" class="headerlink" title="10.06 东方明珠 + 上海世贸大厦最高观光厅"></a>10.06 东方明珠 + 上海世贸大厦最高观光厅</h2><p><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_sh.jpeg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_sh1.jpeg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_sh2.JPG" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_sh3.JPG" alt=""></p>
<h2 id="10-07-上海迪士尼"><a href="#10-07-上海迪士尼" class="headerlink" title="10.07 上海迪士尼"></a>10.07 上海迪士尼</h2><p>迪士尼人真的太多了,基本玩一个项目都得等一个多小时,所以去玩的时候一定要提前做好攻略;<br>(看过欢乐颂2的大概都知道,里面有一个特别浪漫的情节就是在迪士尼拍的,但是电视剧毕竟是电视,看看就好,✧(≖ ◡ ≖✿)嘿嘿,真实的情况你懂得)<br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_dsn1.jpg" alt=""><br><img src="http://oo4xdz5i0.bkt.clouddn.com/IMG_dsn.jpg" alt=""></p>
<h2 id="10-08-回北京"><a href="#10-08-回北京" class="headerlink" title="10.08 回北京"></a>10.08 回北京</h2>]]></content>
      
        <categories>
            
            <category> life </category>
            
            <category> 旅游 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> life </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[css实现toolTip]]></title>
      <url>/2017/09/27/2017-09-27-css%E5%AE%9E%E7%8E%B0toolTip/</url>
      <content type="html"><![CDATA[<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1506491736485&amp;di=c04a08b7627d2a6733d9ffdb1c1c8df3&amp;imgtype=0&amp;src=http%3A%2F%2Fpic.58pic.com%2F58pic%2F16%2F04%2F82%2F00F58PIC8Ny_1024.jpg" alt="title"><br><a id="more"></a></p>
<h3 id="1-常用border来实现三角形"><a href="#1-常用border来实现三角形" class="headerlink" title="1,常用border来实现三角形"></a>1,常用border来实现三角形</h3><blockquote>
<p>原理: 宽高都不设置(即为0),只设置边框,如果4个边框都设置宽度(border-width),样式(border-style)和颜色(border-color)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.test &#123;</div><div class="line">    width:0;</div><div class="line">    height: 0;</div><div class="line">    border-top: 100px solid red ;</div><div class="line">    border-bottom: 100px solid blue;</div><div class="line">    border-left: 100px solid green;</div><div class="line">    border-right: 100px solid yellow;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>效果如图<br><img src="http://oo4xdz5i0.bkt.clouddn.com/border.jpg" alt=""></p>
<p>上面看到的都是三角形,其实想实现单个三角形只需把其他三个三角形的<code>border-color</code>设置为透明色就可以了<br>这样就实现了三角形<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>各种三角形<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">     * &#123;</span></div><div class="line"><span class="undefined">         margin: 0;</span></div><div class="line"><span class="undefined">         padding: 0;</span></div><div class="line"><span class="undefined">         list-style: none;</span></div><div class="line"><span class="undefined">     &#125;</span></div><div class="line"><span class="undefined">     li &#123;</span></div><div class="line"><span class="undefined">         margin-top: 50px;</span></div><div class="line"><span class="undefined">     &#125;</span></div><div class="line"><span class="undefined">     .triangle-up &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-left: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-right: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-bottom: 100px solid red;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-down &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-left: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-right: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-top: 100px solid red;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-left &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-top: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-right: 100px solid red;</span></div><div class="line"><span class="undefined">        border-bottom: 50px solid transparent;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-right &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-top: 50px solid transparent;</span></div><div class="line"><span class="undefined">        border-left: 100px solid red;</span></div><div class="line"><span class="undefined">        border-bottom: 50px solid transparent;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-topleft &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-top: 100px solid red;</span></div><div class="line"><span class="undefined">        border-right: 100px solid transparent;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-topright &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-top: 100px solid red;</span></div><div class="line"><span class="undefined">        border-left: 100px solid transparent; </span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-bottomleft &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-bottom: 100px solid red;</span></div><div class="line"><span class="undefined">        border-right: 100px solid transparent;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    .triangle-bottomright &#123;</span></div><div class="line"><span class="undefined">        width: 0;</span></div><div class="line"><span class="undefined">        height: 0;</span></div><div class="line"><span class="undefined">        border-bottom: 100px solid red;</span></div><div class="line"><span class="undefined">        border-left: 100px solid transparent;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-up"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-down"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-left"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-topleft"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-topright"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-bottomleft"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"triangle-bottomright"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="2-css实现toolTip-实心三角箭头"><a href="#2-css实现toolTip-实心三角箭头" class="headerlink" title="2,css实现toolTip(实心三角箭头)"></a>2,css实现toolTip(实心三角箭头)</h3><p>原理: </p>
<ul>
<li>一个三角形绝对定位到主体元素边界处并连接起来</li>
<li>把三角形的颜色换成和主体元素一致的背景色就可以<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.test</span> &#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#A5C4EC</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.test</span><span class="selector-pseudo">:before</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">bottom</span>: -<span class="number">20px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">border-left</span>: <span class="number">20px</span> solid transparent ;</div><div class="line">    <span class="attribute">border-right</span>: <span class="number">20px</span> solid transparent;</div><div class="line">    <span class="attribute">border-top</span>: <span class="number">20px</span> solid <span class="number">#A5C4EC</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://oo4xdz5i0.bkt.clouddn.com/border-arrow.jpg" alt=""></p>
<h3 id="3-css实现toolTip-空心三角箭头-源码如下"><a href="#3-css实现toolTip-空心三角箭头-源码如下" class="headerlink" title="3,css实现toolTip(空心三角箭头)源码如下"></a>3,css实现toolTip(空心三角箭头)源码如下</h3><p>原理:</p>
<ul>
<li>一个边框颜色的三角形绝对定位到主体元素边界处并连接起来</li>
<li>另一个主体元素背景色的三角形绝对定位并覆盖到第一个三角形上面</li>
<li>第二个三角形相较于第一个三角形定位上偏移距离应等于边框厚度<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.test</span> &#123;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">100px</span> auto;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid blue;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#A5C4EC</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.test</span><span class="selector-pseudo">:before</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">bottom</span>: -<span class="number">20px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">border-left</span>: <span class="number">20px</span> solid transparent ;</div><div class="line">    <span class="attribute">border-right</span>: <span class="number">20px</span> solid transparent;</div><div class="line">    <span class="attribute">border-top</span>: <span class="number">20px</span> solid blue;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.test</span><span class="selector-pseudo">:after</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">bottom</span>: -<span class="number">14px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">80px</span>;</div><div class="line">    <span class="attribute">border-left</span>: <span class="number">20px</span> solid transparent;</div><div class="line">    <span class="attribute">border-right</span>: <span class="number">20px</span> solid transparent;</div><div class="line">    <span class="attribute">border-top</span>: <span class="number">20px</span> solid <span class="number">#fff</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://oo4xdz5i0.bkt.clouddn.com/border1.jpg" alt="title"><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">        * &#123;</span></div><div class="line"><span class="undefined">            margin: 0;</span></div><div class="line"><span class="undefined">            padding: 0;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.wrap</span> &#123;</span></div><div class="line"><span class="undefined">            width: 1000px;</span></div><div class="line"><span class="undefined">            margin: 0 auto;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="comment">/* 向下 */</span></span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-bottom</span> &#123;</span></div><div class="line"><span class="undefined">            position: relative;</span></div><div class="line"><span class="undefined">            width: 300px;</span></div><div class="line"><span class="undefined">            height: 100px;</span></div><div class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">            border-radius: 20px;</span></div><div class="line"><span class="undefined">            margin: 100px auto;</span></div><div class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">         &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-bottom</span><span class="selector-pseudo">:before</span>&#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            bottom: -20px;</span></div><div class="line"><span class="undefined">            left: 80px;</span></div><div class="line"><span class="undefined">            border-left: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-right: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-top</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-bottom</span><span class="selector-pseudo">:after</span>&#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="css">            <span class="selector-tag">bottom</span>: <span class="selector-tag">-17</span><span class="selector-class">.6px</span>;</span></div><div class="line"><span class="undefined">            left: 80px;</span></div><div class="line"><span class="undefined">            border-left: 20px solid transparent;</span></div><div class="line"><span class="undefined">            border-right: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-top</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">          <span class="comment">/* 向上 */</span></span></div><div class="line"><span class="css">          <span class="selector-class">.toolTip-top</span> &#123;</span></div><div class="line"><span class="undefined">            position: relative;</span></div><div class="line"><span class="undefined">            width: 300px;</span></div><div class="line"><span class="undefined">            height: 100px;</span></div><div class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">            border-radius: 20px;</span></div><div class="line"><span class="undefined">            margin: 100px auto;</span></div><div class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">         &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-top</span><span class="selector-pseudo">:before</span>&#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            top: -20px;</span></div><div class="line"><span class="undefined">            left: 80px;</span></div><div class="line"><span class="undefined">            border-left: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-right: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-bottom</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-top</span><span class="selector-pseudo">:after</span>&#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="css">            <span class="selector-tag">top</span>: <span class="selector-tag">-17</span><span class="selector-class">.6px</span>;</span></div><div class="line"><span class="undefined">            left: 80px;</span></div><div class="line"><span class="undefined">            border-left: 20px solid transparent;</span></div><div class="line"><span class="undefined">            border-right: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-bottom</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="comment">/* 向左 */</span></span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-left</span> &#123;</span></div><div class="line"><span class="undefined">            position: relative;</span></div><div class="line"><span class="undefined">            width: 300px;</span></div><div class="line"><span class="undefined">            height: 100px;</span></div><div class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">            border-radius: 20px;</span></div><div class="line"><span class="undefined">            margin: 100px auto;</span></div><div class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-left</span><span class="selector-pseudo">:before</span> &#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            left: -20px;</span></div><div class="line"><span class="undefined">            top: 30px;</span></div><div class="line"><span class="undefined">            border-top: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-bottom: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-right</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-left</span><span class="selector-pseudo">:after</span> &#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            left: -18px;</span></div><div class="line"><span class="undefined">            top: 30px;</span></div><div class="line"><span class="undefined">            border-top: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-bottom: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-right</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="css">        <span class="comment">/* 向右 */</span></span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-right</span> &#123;</span></div><div class="line"><span class="undefined">            position: relative;</span></div><div class="line"><span class="undefined">            width: 300px;</span></div><div class="line"><span class="undefined">            height: 100px;</span></div><div class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">            border-radius: 20px;</span></div><div class="line"><span class="undefined">            margin: 100px auto;</span></div><div class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-right</span><span class="selector-pseudo">:before</span> &#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            right: -20px;</span></div><div class="line"><span class="undefined">            top: 40px;</span></div><div class="line"><span class="undefined">            border-top: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-bottom: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-left</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#A5C4EC</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="css">        <span class="selector-class">.toolTip-right</span><span class="selector-pseudo">:after</span> &#123;</span></div><div class="line"><span class="undefined">            content: '';</span></div><div class="line"><span class="undefined">            display: block;</span></div><div class="line"><span class="undefined">            position: absolute;</span></div><div class="line"><span class="undefined">            right: -18px;</span></div><div class="line"><span class="undefined">            top: 40px;</span></div><div class="line"><span class="undefined">            border-top: 20px solid transparent ;</span></div><div class="line"><span class="undefined">            border-bottom: 20px solid transparent;</span></div><div class="line"><span class="css">            <span class="selector-tag">border-left</span>: 20<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toolTip-bottom"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toolTip-top"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toolTip-left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toolTip-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="效果图如下"><a href="#效果图如下" class="headerlink" title="效果图如下"></a>效果图如下</h3><p><img src="http://oo4xdz5i0.bkt.clouddn.com/toolTip.png" alt="效果图"></p>
<p><a href="https://juejin.im/post/59c9e9276fb9a00a616f4842" target="_blank" rel="external">参考</a></p>
<p><a href="http://wangyaxing.deercv.com/" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="http://wangyaxing.top/2017/09/27/css%E5%AE%9E%E7%8E%B0toolTip/#more">blog</a></p>
]]></content>
      
        <categories>
            
            <category> css </category>
            
        </categories>
        
        
        <tags>
            
            <tag> css </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Mac下运行Rocket.chat]]></title>
      <url>/2017/09/17/Mac%E4%B8%8B%E8%BF%90%E8%A1%8CRocket-chat/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/rocketLogo.png-blogImg" alt="title"><br><a id="more"></a></p>
<h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1,简介"></a>1,简介</h3><ul>
<li><a href="https://github.com/RocketChat/Rocket.Chat" target="_blank" rel="external">github</a></li>
<li>Rocket.chat是特性最丰富的Slack开源替代品之一</li>
<li>主要功能：群组聊天，直接通信，私聊群，桌面通知，媒体嵌入，文件上传，语音/视频聊天，截图等等</li>
<li>Rocket.chat原生支持windows,Mac OSX, Linux, ios和Android平台</li>
</ul>
<h3 id="2，准备工作"><a href="#2，准备工作" class="headerlink" title="2，准备工作"></a>2，准备工作</h3><p>由于Rocket.chat使用的是Meteor框架，而Meteor框架是对Node.js的封装，源码中又使用到了CoffeeScript.js,使用数据库是MongDB，所以在Rocker.chat上做二次开发，需要学习的技术有Meteor, Node.js, CoffeeScript.js,MongDB；</p>
<h4 id="其他资料"><a href="#其他资料" class="headerlink" title="其他资料"></a>其他资料</h4><ul>
<li><a href="http://coffee-script.org/" target="_blank" rel="external">CoffeeScipt中文网</a></li>
<li><a href="http://zh.discovermeteor.com" target="_blank" rel="external">Meteor中文网</a></li>
</ul>
<p>Rocket.chat要运行，必须安装Node.js,NPM,Meteor(包含了Mongdb)<br>node和npm的安装大家肯定特别熟悉，下面说一下meteor的安装过程</p>
<h4 id="3-安装meteor"><a href="#3-安装meteor" class="headerlink" title="3,安装meteor"></a>3,安装meteor</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl https://install.meteor.com/ | sh</div></pre></td></tr></table></figure>
<p>创建一个小工程的指令，<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">meteor create meteorApp</div><div class="line"><span class="built_in">cd</span> meteorApp</div><div class="line">meteor</div></pre></td></tr></table></figure></p>
<p>在浏览器中输入：<a href="http://localhost:3000/" target="_blank" rel="external">http://localhost:3000/</a></p>
<h4 id="4-下载和运行Rocket-chat"><a href="#4-下载和运行Rocket-chat" class="headerlink" title="4,下载和运行Rocket.chat"></a>4,下载和运行Rocket.chat</h4><p>下载Rocet.chat最好使用git 的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git clone https://github.com/RocketChat/Rocket.Chat.git</div></pre></td></tr></table></figure></p>
<p>等工程源码下载完毕后，进入对应的文件夹，然后运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd Rocket.Chat</div><div class="line">npm start</div></pre></td></tr></table></figure></p>
<blockquote>
<p>在执行npm start的过程中，需要注意一下问题，否则可能会启动不了</p>
<ul>
<li>1,运行会特别慢,建议加上修改源为淘宝源，具体方法如下<a href="http://blog.csdn.net/bugall/article/details/45765979" target="_blank" rel="external">参考</a>：</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm config set registry https://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<ul>
<li>2,运行过程需要<code>翻墙</code>，因为国外的npm包在国内下载可能就被墙了</li>
</ul>
<blockquote>
<p>我在安装的过程中出现报错：<br> <img src="http://oo4xdz5i0.bkt.clouddn.com/phantomjs-error.png" alt=""><br> 找了phantomjs<a href="https://npm.taobao.org/mirrors/phantomjs" target="_blank" rel="external">镜像</a>单独安装了一下速度很快，就成功了,😊,然后把phantomjs添加到环境变量(方法如下)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1,cd phantomjs</div><div class="line">2,cd bin</div><div class="line">3,pwd     //注: 需要输出的复制地址</div><div class="line">4,cd ~    // 回到根目录</div><div class="line">5,vim .zshrc</div><div class="line">6,添加到path</div><div class="line">7,source .zshrc // 保存修改</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/3297464-b97ab1ba31b426eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="phantomjst添加到Path.png"></p>
<p>运行成功命令行如下<br><img src="http://oo4xdz5i0.bkt.clouddn.com/rocketChatSucess.png" alt=""></p>
<p>运行成功浏览器中如下<br> <img src="http://oo4xdz5i0.bkt.clouddn.com/rocketChat.png" alt=""></p>
</blockquote>
<p><a href="http://blog.csdn.net/u011619283/article/details/52971473" target="_blank" rel="external">参考</a></p>
<p>如果运行中出现其他的问题欢迎与我交流<br><a href="http://wangyaxing.deercv.com/" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="http://wangyaxing.top/2017/09/01/wxapp/#more">blog</a></p>
]]></content>
      
        <categories>
            
            <category> meteor </category>
            
            <category> Rocket.chat </category>
            
        </categories>
        
        
        <tags>
            
            <tag> meteor </tag>
            
            <tag> Rocket.chat </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[心塞！又一次被自己蠢哭]]></title>
      <url>/2017/09/08/%E8%A2%AB%E9%AA%97%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/perfect.jpg" alt="title"><br><a id="more"></a></p>
<p>很晚了，但是今天就是睡不着，想把今天发生在我身上的事情总结一下，看完之后肯定会觉得我很傻很笨，这一次我将不会再为自己辩解；<br>承认自己被骗是一个很痛苦的事情，不知道谁能体会到；</p>
<p>我发现我真的好笨，这次被骗很难过，并不仅仅是骗了200块钱，而是她还欺骗了我的感情，我那么相信她，跟她聊了好多实话，很多人跟我说过不要太容易去相信别人，我爸妈，还有很多朋友都这么跟我说，我很不愿意接受现实生活中哪有那么多坏人，每次都会反驳一句：你们不要老把别人想得那么坏。。。<br>所以就有了之后的一次又一次被骗，之前碰到乞丐都会给一些钱，还有路边说钱包被偷的没钱吃饭的，借钱回家的，还有1700多买了个酷派合约机，一个月话费120(当时都没工作，那来那么多钱交话费)甚至还有骗你拿自己身份证办银行卡的，很多很多，经历了那么多被骗，以为自己现在成熟很多了，</p>
<p>这次美容院被骗事件，我真的是不知道怎么办，只是问个路，然后那个人就拐着你的胳膊就说我领你去，当时还特庆幸自己遇到一个特别好的人，结果就把我领到店里了，我真的很生气，当时准备扭头就走，可是接下来发生的事就像下面百度到的这些美容院骗术发生的一模一样；</p>
<p><a href="http://jingyan.baidu.com/article/a17d52855420a78098c8f2f9.html" target="_blank" rel="external">http://jingyan.baidu.com/article/a17d52855420a78098c8f2f9.html</a></p>
<p>让脸上抹了一些膏状液体，拿着电疗忆，过一会就变成了黑色(（PS 涂的东西是一种重金属测试膏，百度“美容院用重金属测试膏欺诈顾客”，可以看到相关新闻报道，据说这是十年前就有的骗局。。）)，说是原价700多的现在因为4周年店庆，300多，最后一天，我坚持不做，想走，她死活不让我走，说现在不能走，出去就会感染，过敏，皮囊炎，毁容。。。。(正常人听到这些多少都会还害怕吧，不过现在想想她说怎样就会怎么样么，20多年了，皮肤就这样，很多人一辈子没去去过美容院，也没见自己长着长着毁容的)说你现在不能走，她要对你负责，怎么办，她又说这样吧，给你个学生特惠的190，然后你下次来体验一把全脸的，我意识到这是不掏钱不让走的节奏啊，而且他们人多，我自己，又不敢怎么，但是又不愿相信自己被骗了，还是愿意相信那个人所说的，还傻乎乎的打算有空来体验一把（被自己蠢哭）。</p>
<p>百度完之后，终于意识到自己真的是被骗了，看着百度搜索出来的<a href="http://bbs.tianya.cn/post-funinfo-6488346-1.shtml" target="_blank" rel="external">美容院骗局</a>，<a href="http://jingyan.baidu.com/article/a17d52855420a78098c8f2f9.html" target="_blank" rel="external">解析街边美容院骗局</a>；很多评论都是2017年的。老掉牙的骗局，现在我还被骗，哎，不过看到他们比我骗得钱多，而且很多人都被骗过，心里平衡了很多（明明知道这是一种很不好的心里活动，就当是安慰自己吧）<br><img src="http://oo4xdz5i0.bkt.clouddn.com/jiao.jpeg" alt="title"></p>
<p>真的很希望骗子你们不要再找我了，骗我就是一骗一个准，突然想到，自己能安全活这么大还是很不容易的，所以身边的你们要好好珍惜</p>
<p>很渴望骗子能少一些，人与人之前多一点真诚。这样当真正有需要帮助的人需要帮助的时候，大家才不会那么冷漠。希望那些骗子们不要再玩心理战了，这样真的很可恶，不仅骗钱，还骗感情。</p>
]]></content>
      
        <categories>
            
            <category> life </category>
            
            <category> 感悟 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> life </tag>
            
            <tag> 感悟 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[用vue,你知道 keep-alive 么]]></title>
      <url>/2017/09/06/vue%E7%BB%84%E4%BB%B6%E4%B9%8Bkeep-alive/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/keep-alive.jpg" alt="title"><br><a id="more"></a></p>
<p>项目中写vue也没注意到<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code>这个组件,最近在深入的研究vue组件的生命周期函数,每一个函数都是干嘛的,然后其中有<code>activated</code>和<code>deactivated</code>这两个函数与<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code>这个组件有关</p>
<ul>
<li><code>activated</code>: keep-alive组件激活时调用</li>
<li><code>deactivated</code>: keep-alive组件停用时调用<h3 id="keep-alive用法"><a href="#keep-alive用法" class="headerlink" title="keep-alive用法"></a><a href="https://cn.vuejs.org/v2/api/?#keep-alive" target="_blank" rel="external">keep-alive用法</a></h3></li>
<li><code>&lt;keep-alive&gt;</code>包裹动态组件时,会缓存不活动的组件实例,而不是销毁它们</li>
<li><code>&lt;keep-alive&gt;</code>是一个抽象组件:它自身不会渲染一个DOM元素,也不会出现在父组件链中</li>
<li>当组件在<code>&lt;keep-alive&gt;</code>内被切换,它的<code>activated</code>和<code>deactivated</code>这两个生命周期钩子函数将会被对应执行<h3 id="具体的实例如下"><a href="#具体的实例如下" class="headerlink" title="具体的实例如下"></a>具体的实例如下</h3></li>
<li>是一个简单的tab切换,可以尝试把<code>&lt;keep-alive&gt;</code>去掉之后,对比一下,然后就会发现它的好处</li>
</ul>
<p>test.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"test"</span>&gt;</div><div class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"testNav"</span>&gt;</div><div class="line">            &lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">"&#123;'selected':tab === 1,'testTitle':true&#125;"</span> @click=<span class="string">"toTab(1)"</span>&gt;标题一&lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">            &lt;div :class="&#123;'selected':tab === 2,'testTitle':true&#125;"  @click="toTab(2)"&gt;标题二&lt;/</span>div&gt;</div><div class="line">        &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">        &lt;div class="container"&gt;</span></div><div class="line"><span class="regexp">            &lt;keep-alive&gt;</span></div><div class="line"><span class="regexp">                &lt;Test1 v-if="tab === 1"&gt;</span></div><div class="line"><span class="regexp">                &lt;/</span>Test1&gt;</div><div class="line">                &lt;Test2 v-<span class="keyword">else</span>&gt;</div><div class="line">                &lt;<span class="regexp">/Test2&gt;</span></div><div class="line"><span class="regexp">            &lt;/</span>keep-alive&gt;</div><div class="line">        &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">    &lt;/</span>div&gt;</div><div class="line">&lt;<span class="regexp">/template&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;script&gt;</span></div><div class="line"><span class="regexp">    import Test1 from './</span>test1.vue<span class="string">';</span></div><div class="line"><span class="string">    import Test2 from '</span>./test2.vue<span class="string">';</span></div><div class="line"><span class="string">    export default &#123;</span></div><div class="line"><span class="string">        data() &#123;</span></div><div class="line"><span class="string">            return &#123;</span></div><div class="line"><span class="string">                tab: 1,</span></div><div class="line"><span class="string">            &#125;;</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">        components: &#123;</span></div><div class="line"><span class="string">            Test1,</span></div><div class="line"><span class="string">            Test2,</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">        methods: &#123;</span></div><div class="line"><span class="string">            toTab(index) &#123;</span></div><div class="line"><span class="string">                this.tab = index;</span></div><div class="line"><span class="string">            &#125;,</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">&lt;/script&gt;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">&lt;style lang="less"&gt;</span></div><div class="line"><span class="string">.test &#123;</span></div><div class="line"><span class="string">    width: 100%;</span></div><div class="line"><span class="string">    .testNav &#123;</span></div><div class="line"><span class="string">        height: 60px;</span></div><div class="line"><span class="string">        line-height: 60px;</span></div><div class="line"><span class="string">        display: flex;</span></div><div class="line"><span class="string">        border-bottom: 1px solid #e5e5e5;</span></div><div class="line"><span class="string">        .testTitle &#123;</span></div><div class="line"><span class="string">            flex: 1;</span></div><div class="line"><span class="string">            text-align: center;</span></div><div class="line"><span class="string">        &#125;</span></div><div class="line"><span class="string">        .selected &#123;</span></div><div class="line"><span class="string">            color: red;</span></div><div class="line"><span class="string">        &#125;</span></div><div class="line"><span class="string">    &#125;</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string">&lt;/style&gt;</span></div></pre></td></tr></table></figure></p>
<p>测试结果如下:<br>注意看一下页面和控制台输出的信息,可以更加直观的注意到<code>&lt;keep-alive&gt;</code>的作用及<code>activated</code>和<code>deactivated</code>这两个函数什么时候会被触发</p>
<ul>
<li>打开页面,会出现下面这样<br><img src="http://oo4xdz5i0.bkt.clouddn.com/keep-alive1.png" alt="1"></li>
</ul>
<p>用setTimeout模拟请求后端接口的场景</p>
<ul>
<li>点击<code>title2</code>,出现下面的情况<br><img src="http://oo4xdz5i0.bkt.clouddn.com/keep-alive2.png" alt="2"></li>
<li>再次点击<code>title1</code>,出现下面的情况,你会发现从后端请求的数据会快速显示出来,但是如果你此时不用<br><img src="http://oo4xdz5i0.bkt.clouddn.com/keep-alive3.png" alt="3"></li>
</ul>
<blockquote>
<p><code>test1.vue</code>和<code>test2.vue</code>的相关代码如下:</p>
</blockquote>
<p>test1.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"test1"</span>&gt;</div><div class="line">      test1</div><div class="line">      &#123;&#123;testInfo1&#125;&#125;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">        data() &#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                testInfo1: <span class="string">''</span>,</div><div class="line">            &#125;;</div><div class="line">        &#125;,</div><div class="line">        activated() &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'测试1被激活'</span>);</div><div class="line">        &#125;,</div><div class="line">        deactivated() &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'测试1被缓存'</span>);</div><div class="line">        &#125;,</div><div class="line">        created() &#123;</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                <span class="keyword">this</span>.testInfo1 = <span class="string">'这是测试一的数据'</span>;</div><div class="line">            &#125;, <span class="number">2000</span>);</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>test2.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">      test2</div><div class="line">      &#123;&#123;testInfo2&#125;&#125;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">        data() &#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                testInfo2: <span class="string">''</span>,</div><div class="line">            &#125;</div><div class="line">        &#125;,  </div><div class="line">        activated() &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'测试2被激活'</span>);</div><div class="line">        &#125;,</div><div class="line">        deactivated() &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'测试2被缓存'</span>);</div><div class="line">        &#125;,</div><div class="line">        created() &#123;</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                <span class="keyword">this</span>.testInfo2 = <span class="string">'这是测试二的数据'</span>;</div><div class="line">            &#125;, <span class="number">2000</span>);</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[flex布局]]></title>
      <url>/2017/09/06/flex%E5%B8%83%E5%B1%80/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/flex.jpg" alt="title"><br><a id="more"></a></p>
<h3 id="使用flex布局"><a href="#使用flex布局" class="headerlink" title="使用flex布局"></a>使用flex布局</h3><p>flex使用方法很简单,只需要将其display属性设置为flex即可,也可以设置行内的flex,记得webkit内核的浏览器,必须加上-webkit,</p>
<ul>
<li>注意，设为 Flex 布局以后，子元素的float、clear和vertical-align属性将失效。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.ele &#123;</div><div class="line">    display: -webkit-flex;</div><div class="line">    diaplay: flex;</div><div class="line">    display: inline-flex;</div><div class="line">    display: -webkit-inline-flex;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>在flex中,最核心的概念就是容器和轴,其中容器分为父容器和子容器,轴分为主轴和交叉轴(主轴默认为水平方向,方向向右,交叉轴为主轴顺时针旋转90度)</p>
<blockquote>
<h3 id="父容器属性"><a href="#父容器属性" class="headerlink" title="父容器属性"></a>父容器属性</h3><p>父容器有六个属性</p>
<ul>
<li>1,flex-direction: 主轴方向.</li>
<li>2,flex-wrap: 超出父容器子容器的排列方式</li>
<li>3,flex-flow: flex-direction属性和flex-wrap属性的简写方式</li>
<li>4,justify-content: 子容器在主轴的排列方向</li>
<li>5,align-items: 子容器的交叉轴上的排列方式</li>
<li>6,align-content: 多根轴线的对齐方式</li>
</ul>
</blockquote>
<h4 id="flex-direciton属性"><a href="#flex-direciton属性" class="headerlink" title="flex-direciton属性"></a>flex-direciton属性</h4><p>flex-direction属性决定主轴的方向(主轴的方向不一定是水平的,这个属性就是设置主轴的方向,主轴默认是水平方向,从左至右)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.box &#123;</div><div class="line">    flex-direction: row;           // 默认值,主轴为水平方向,起点在左端,从左到右</div><div class="line">    flex-direction: row-reverse;   // 主轴为水平方向,起点在右端,从右到左</div><div class="line">    flex-direction: column;        // 主轴为垂直方向,起点在上端,从上到下</div><div class="line">    flex-direction: column;        // 主轴为垂直方向,起点在下端,从下到上</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="flex-wrap属性"><a href="#flex-wrap属性" class="headerlink" title="flex-wrap属性"></a>flex-wrap属性</h4><p>flex-wrap属性决定自容器如果在一条轴线排不下时,如何换行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.box &#123;</div><div class="line">    flex-wrap: nowrap;           // 默认,不换行</div><div class="line">    flex-wrap: wrap;       // 换行,第一行在下面</div><div class="line">    flex-wrap: column;     // 换行,第一行在=上面</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<h3 id="子容器也有6个属性"><a href="#子容器也有6个属性" class="headerlink" title="子容器也有6个属性"></a>子容器也有6个属性</h3><ul>
<li>1,order: 子容器的排列顺序</li>
<li>2,flex-grow: 子容器剩余空间的拉伸比例</li>
<li>3,flex-shrink: 子容器超出空间的压缩比例</li>
<li>4,flex-basis: 子容器不伸缩情况下的原始尺寸</li>
<li>5,flex: 子元素的flex属性是flex-grow, flex-shrink, flex-basis的简写</li>
<li>6,align-self: 允许单个子容器与其他字容器不一样的对齐方式,可覆盖父元素aligns-items属性(交叉轴),默认是auto,表示继承父元素的align-items属性,如果没有付元素,则等同于strech</li>
</ul>
</blockquote>
<h4 id="order属性"><a href="#order属性" class="headerlink" title="order属性"></a>order属性</h4><p>order属性定义子容器的排列顺序,数值越小,排列越靠前<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item &#123;</div><div class="line">    order: &lt;interger&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="flex-grow属性"><a href="#flex-grow属性" class="headerlink" title="flex-grow属性"></a>flex-grow属性</h3><p>flex-grow属性定义子容器的放大比例,默认为0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item &#123;</div><div class="line">    flex-grow: &lt;number&gt;; /* default 0 */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果子容器的flex-grow属性都为1,则他们将等分剩余空间(如果有的话).如果一个项目的flex-grow属性为2,其他项目都为1,则前者占据的剩余空间将比其他项多一倍;</p>
<h3 id="flex-shrink属性"><a href="#flex-shrink属性" class="headerlink" title="flex-shrink属性"></a>flex-shrink属性</h3><p>flex-shrink定义了子容器的缩小比例,默认为1,如果空间不足,该项目将缩小<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item &#123;</div><div class="line">    flex-shrink: &lt;number&gt;; /* default 1 */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果所有子容器的flex-shrink属性都为1,当空间不足时,都将等比例缩小.如果一个项目的flex-shrink的属性为0,其他项目都为1,则空间不足时,前者不缩小;<br>负值对该属性无效</p>
<h3 id="flex-basis属性"><a href="#flex-basis属性" class="headerlink" title="flex-basis属性"></a>flex-basis属性</h3><p>flex-basis属性定义了在分配多余空间之前,项目占据了主轴空间,浏览器根据这个属性,计算主轴是否有多余空间.它的默认值为auto,即项目的本来大小;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item &#123;</div><div class="line">    flex-basis: &lt;length&gt; | auto; /* default auto */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>它可以设置跟width和height属性一样的值(比如350px),则项目将占据固定空间</p>
<h3 id="flex属性"><a href="#flex属性" class="headerlink" title="flex属性"></a>flex属性</h3><p>flex是flex-grow,flex-shrink,flex-basis的缩写,默认值为0 1 auto。后两个属性可选<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.item &#123;</div><div class="line">  flex: none | [ &lt;&apos;flex-grow&apos;&gt; &lt;&apos;flex-shrink&apos;&gt;? || &lt;&apos;flex-basis&apos;&gt; ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="align-self属性"><a href="#align-self属性" class="headerlink" title="align-self属性"></a>align-self属性</h3><p>align-self属性允许单个子容器有与其他子容器不一样的对齐方式，可覆盖align-items属性，默认为auto,表示继承父元素align-items属性，如果没有父元素，则等同于stretch<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.item &#123;</div><div class="line">    align-self: auto | flex-start | flex-end | center | baseline | stretch;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>该属性可能取6个值，除了auto,其他都与align-items属性完全一致。</p>
<blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="external">参考</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> css </category>
            
        </categories>
        
        
        <tags>
            
            <tag> css </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[清除css默认样式的总结]]></title>
      <url>/2017/09/06/css%E9%BB%98%E8%AE%A4%E6%A0%B7%E5%BC%8F%E7%9A%84%E6%B8%85%E9%99%A4/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/css.jpg" alt="title"><br><a id="more"></a></p>
<p>我们写css的时候经常会遇到要清楚一些默认的样式,其实每次做项目中需要清除的样式就经常是那么几个,最常见的比如</p>
<ul>
<li>清除表单元素<code>input</code>,<code>select</code>,<code>`textarea</code>的默认样式,</li>
<li>CSS3中隐藏滚动条但仍能继续滚动,</li>
<li>多行文本溢出省略号显示等等,<blockquote>
<p>所以就总结了一下,持续更新中…,也请大家多多贡献更多的常见的需要清除默认样式的方法😊</p>
</blockquote>
</li>
</ul>
<h4 id="1-多行文本溢出省略号显示"><a href="#1-多行文本溢出省略号显示" class="headerlink" title="1,多行文本溢出省略号显示"></a>1,多行文本溢出省略号显示</h4><ul>
<li>让文本只显示一行，然后溢出省略号显示</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">overflow: hidden;</div><div class="line">text-overflow: ellipsis;</div><div class="line">white-space: nowrap;</div></pre></td></tr></table></figure>
<ul>
<li>让文本显示两行，然后溢出部分省略号显示<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">line-height: 1.3rem;</div><div class="line">max-height: 2.6rem;</div><div class="line">display: -webkit-box;</div><div class="line">-webkit-box-orient: vertical;</div><div class="line">-webkit-line-clamp: 2;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2，CSS3中隐藏滚动条但仍能继续滚动"><a href="#2，CSS3中隐藏滚动条但仍能继续滚动" class="headerlink" title="2，CSS3中隐藏滚动条但仍能继续滚动"></a>2，CSS3中隐藏滚动条但仍能继续滚动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">::-webkit-scrollbar &#123;</div><div class="line">    width: 0px;</div><div class="line">    height: 0px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-解决iPhone中overflow-scroll-滑动速度慢或者卡的问题"><a href="#3-解决iPhone中overflow-scroll-滑动速度慢或者卡的问题" class="headerlink" title="3, 解决iPhone中overflow:scroll;滑动速度慢或者卡的问题"></a>3, 解决iPhone中overflow:scroll;滑动速度慢或者卡的问题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-webkit-overflow-scrolling : touch;</div></pre></td></tr></table></figure>
<h4 id="4-消除input-textarea等的默认样式"><a href="#4-消除input-textarea等的默认样式" class="headerlink" title="4,消除input,textarea等的默认样式"></a>4,消除<code>input</code>,<code>textarea</code>等的默认样式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">input, button, select, textarea &#123;</div><div class="line">    outline: none;</div><div class="line">    -webkit-appearance: none;</div><div class="line">    border-radius: <span class="number">0</span>;</div><div class="line">    border:<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">textarea&#123;</div><div class="line">    resize:none;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>outline: none;</code>去掉chrome浏览器自带的点击input框出现边框情况</li>
<li><code>-webkit-appearance: button;</code>使元素标签看起来像个按钮样式,意思定义了按钮样式<br><code>-webkit-appearance: none;</code>去掉按钮样式</li>
<li><code>border-radius: 0;</code> 去掉圆角<br><code>border:0;</code> 去掉border</li>
<li><code>textarea{resize:none}</code>取消chrome下textarea可拖动放大：<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><a href="https://hacknical.com/resume/S1VKezRp-?locale=zh" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="http://wangyaxing.top/">blog</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> css </category>
            
        </categories>
        
        
        <tags>
            
            <tag> css </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[总结微信小程序开发中遇到的坑]]></title>
      <url>/2017/09/01/wxapp/</url>
      <content type="html"><![CDATA[<p><img src="http://www.kviso.com/softnews/UploadPic/2016-12/2016123111185421229.jpg" alt="title"><br>总结微信小程序开发中遇到的坑,一些坑你得一个一个的跳啊,/(ㄒoㄒ)/~~<br><a id="more"></a></p>
<h3 id="1-页面跳转和参数传递实例"><a href="#1-页面跳转和参数传递实例" class="headerlink" title="1,页面跳转和参数传递实例"></a>1,<a href="http://www.jb51.net/article/103590.htm" target="_blank" rel="external">页面跳转和参数传递实例</a></h3><blockquote>
<p>首先说一下我遇到的需求<br>有一个我的消息页面,里面的数据都是后端返回的,返回的数据大致如下,有一个是数据url是要控制跳转到哪个页面,可能是tab页面也可能是非tab页面,但是微信小程序中跳转到tab和非tab页面用的api不是同一个,但是在页面中渲染肯定是要用到循环的,难道要再多个参数来判断是跳转到tab页面还是非tab页面?</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    &#123;</div><div class="line">        <span class="string">"id"</span>: <span class="number">2121</span>,</div><div class="line">        <span class="string">"title"</span>: <span class="string">"test"</span>,</div><div class="line">        <span class="string">"body"</span>: <span class="string">"test"</span>,</div><div class="line">        <span class="string">"url"</span>: <span class="string">"url"</span>,</div><div class="line">        <span class="string">"pic"</span>: <span class="string">"pic"</span>,</div><div class="line">        <span class="string">"created_at"</span>: <span class="string">"2017-07-01 12:34:56"</span></div><div class="line">    &#125;, &#123;</div><div class="line">        <span class="string">"id"</span>: <span class="number">2122</span>,</div><div class="line">        <span class="string">"title"</span>: <span class="string">"test"</span>,</div><div class="line">        <span class="string">"body"</span>: <span class="string">"test"</span>,</div><div class="line">        <span class="string">"url"</span>: <span class="string">"url"</span>,</div><div class="line">        <span class="string">"pic"</span>: <span class="string">"pic"</span>,</div><div class="line">        <span class="string">"created_at"</span>: <span class="string">"2017-07-01 12:34:56"</span></div><div class="line">    &#125;,</div><div class="line">]</div></pre></td></tr></table></figure>
<ul>
<li>后一般的小程序中我用的框架是wepy,底部的tab组件就是我自己写的,没有用到小程序自己提供的那一个,因为我们还要实现一个需求,有消息时,底部tab会出现小红点,还有以下弹窗要把底部tab覆盖掉,这些需求如果用小程序提供的那一个tab组件的话根本实现不了;而且不用wepy框架的话,自己做一个tab实现的过程很恶心,小程序虽然实现了组件化,但是它实现的组件化bong不想vue和react那样实现的是真正的组件化,你需要哪个组件就直接import进来,小程序的组件化实现可查看<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/module.html" target="_blank" rel="external">官方文档</a>,js,css和html都是要分别引入的</li>
<li>自己实现的tab页面整体是一个非tab页面,所有整个小程序中就不存在绝对的tab页面,所以用navigator这个组件,想要跳转到tab页面可以通过在url上拼接参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;view <span class="class"><span class="keyword">class</span></span>=<span class="string">"mesList"</span> wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;unReadList&#125;&#125;"</span> wx:key=<span class="string">"unique"</span>&gt;</div><div class="line">    &lt;navigator url=<span class="string">"/pages/index?tab=0"</span> hover-<span class="class"><span class="keyword">class</span></span>=<span class="string">"none"</span> &gt;</div><div class="line">        &lt;text&gt;&#123;&#123;item.body&#125;&#125;&lt;<span class="regexp">/text&gt;</span></div><div class="line"><span class="regexp">        &lt;view class="messageTime"&gt;&#123;&#123;item.created_at&#125;&#125;&lt;/</span>view&gt;</div><div class="line">    &lt;<span class="regexp">/navigator&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>view&gt;</div></pre></td></tr></table></figure>
<p>然后再index页面的onload中判断显示哪个tab<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">onLoad(options) &#123;</div><div class="line">    <span class="keyword">if</span> (options &amp;&amp; options.tab) &#123;</div><div class="line">        <span class="keyword">this</span>.tab = <span class="built_in">parseInt</span>(options.tab);</div><div class="line">        <span class="keyword">this</span>.$apply();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-微信小程序授权处理"><a href="#2-微信小程序授权处理" class="headerlink" title="2,微信小程序授权处理"></a>2,<a href="https://devework.com/weixin-weapp-auth-failed.html" target="_blank" rel="external">微信小程序授权处理</a></h3><ul>
<li>微信小程序提示授权弹窗,如果用户第一次点击拒绝之后,一段时间将不会再次弹出来,然后用户又不知道什么原因用不了小程序,这是个很糟糕的用户体验,我们应该优雅的处理这种情况</li>
<li>采用的解决方法<a href="https://devework.com/weixin-weapp-auth-failed.html" target="_blank" rel="external">参考</a></li>
</ul>
<h3 id="3-登录问题的处理"><a href="#3-登录问题的处理" class="headerlink" title="3, 登录问题的处理"></a>3, 登录问题的处理</h3><ul>
<li>两个登录接口,一个get,判断是否已经还需要登录,如果返回true,则需要登录,如果返回false,则不需要登录</li>
<li>如果返回true,则需要去请求更一个post的登录接口,这时,你需要获取第一个get请求的返回信息中的session,之后每次请求求都需要带上他</li>
<li>在返回true的时候还需要做一件事儿,就是把返回信息中的session存储到storage,即调用setStorage,然后在之后每次请求数据的时候在headers里加上这个字段<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStorage</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        <span class="comment">// 先判断本地数据存储有没有cookie</span></div><div class="line">        wx.getStorage(&#123;</div><div class="line">            key: key,</div><div class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                resolve(res.data);</div><div class="line">            &#125;,</div><div class="line">            fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                resolve(<span class="literal">null</span>);</div><div class="line">            &#125;,</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStorage</span>(<span class="params">key, value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        wx.setStorage(&#123;</div><div class="line">            key: key,</div><div class="line">            data: value,</div><div class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                <span class="comment">// <span class="doctag">TODO:</span> 不知道返回什么</span></div><div class="line">                resolve(res.data);</div><div class="line">            &#125;,</div><div class="line">            fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                reject(res.errMsg);</div><div class="line">            &#125;,</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-wx-getStorage安卓手机上返回的错误信息是getStorage-fail-ios-getStorage-fail-data-not-found"><a href="#4-wx-getStorage安卓手机上返回的错误信息是getStorage-fail-ios-getStorage-fail-data-not-found" class="headerlink" title="4,wx.getStorage安卓手机上返回的错误信息是getStorage:fail,ios,getStorage:fail data not found"></a>4,wx.getStorage安卓手机上返回的错误信息是getStorage:fail,ios,getStorage:fail data not found</h3><ul>
<li>在判断一些api返回的错误信息时,最好不要通过判断具体的错误信息来处理错误<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStorage</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        <span class="comment">// 先判断本地数据存储有没有cookie</span></div><div class="line">        wx.getStorage(&#123;</div><div class="line">            key: key,</div><div class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                resolve(res.data);</div><div class="line">            &#125;,</div><div class="line">            fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                resolve(<span class="literal">null</span>);</div><div class="line">                <span class="comment">// 下面注释的部分即为刚开始犯的错误,导致有可能ios或安卓或部分机型显示不出数据</span></div><div class="line">                <span class="comment">// if (res.errMsg == 'getStorage:fail' || res.errMsg == 'getStorage:fail data not found') &#123;</span></div><div class="line">                <span class="comment">//     console.log('没有cookie');</span></div><div class="line">                <span class="comment">//     resolve(null);</span></div><div class="line">                <span class="comment">// &#125; else &#123;</span></div><div class="line">                <span class="comment">//     console.log('这是一个问题');</span></div><div class="line">                <span class="comment">//     reject(res.errMsg);</span></div><div class="line">                <span class="comment">// &#125;</span></div><div class="line">            &#125;,</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-小程序解决异步"><a href="#5-小程序解决异步" class="headerlink" title="5,小程序解决异步"></a>5,小程序解决异步</h3><ul>
<li><p>如果项目中没有用到babal,小程序本身的支持只支持到es6的语法,所以解决异步的问题就不能使用es7的async和await,只能使用promise来解决异步,但是每个api上都进行一次封装(如下),这种做法太恶心了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        wx.login(&#123;</div><div class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                resolve(res);</div><div class="line">            &#125;,</div><div class="line">            fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                reject(res.errMsg);</div><div class="line">            &#125;,</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>基于微信的API的prototype上进行了promise的封装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">promiseify</span>(<span class="params">func</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">args = &#123;&#125;</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">            func.call(wx, <span class="built_in">Object</span>.assign(args, &#123;</div><div class="line">                success: resolve,</div><div class="line">                fail: reject,</div><div class="line">            &#125;));</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> wx) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(wx, key) &amp;&amp; <span class="keyword">typeof</span> wx[key] === <span class="string">'function'</span>) &#123;</div><div class="line">        wx[<span class="string">`_<span class="subst">$&#123;key&#125;</span>`</span>] = promiseify(wx[key]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="6-怎么保证在调用其他接口之前已经调用过登录的接口了"><a href="#6-怎么保证在调用其他接口之前已经调用过登录的接口了" class="headerlink" title="6,怎么保证在调用其他接口之前已经调用过登录的接口了"></a>6,怎么保证在调用其他接口之前已经调用过登录的接口了</h3><ul>
<li>我采用执行队列的方式来解决,问题可以简化为有两个按钮,点击第一个按钮输出这是第几次输出d1,但是必须在点击完d2之后,isPrint变为true时,才允许输出,在isPrint为false的时候点击d1,需要把要输出的内容暂时存储起来,等isPrint变为true时,暂存起来的输出现在才可以输出出来<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// html</span></div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"first"</span>&gt;按钮一&lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">  &lt;div class="second"&gt;按钮二&lt;/</span>div&gt;</div><div class="line"><span class="comment">// js</span></div><div class="line">  <span class="keyword">const</span> d1 = <span class="built_in">document</span>.querySelector(<span class="string">'.first'</span>);</div><div class="line">  <span class="keyword">const</span> d2 = <span class="built_in">document</span>.querySelector(<span class="string">'.second'</span>);</div><div class="line">  <span class="keyword">let</span> count = <span class="number">0</span>; <span class="comment">// 用来记录第几次输出</span></div><div class="line">  <span class="keyword">let</span> isPrint = <span class="literal">false</span>; <span class="comment">// 是否允许输出</span></div><div class="line">  <span class="keyword">let</span> arr = []; <span class="comment">// 声明一个数组,用来存储</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">clickCount</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    count++;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'这是第'</span> + count + <span class="string">'次输出d1'</span>);</div><div class="line">  &#125;</div><div class="line">  d1.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(isPrint);</div><div class="line">    <span class="built_in">console</span>.log(arr);</div><div class="line">    <span class="keyword">if</span> (isPrint) &#123;</div><div class="line">      <span class="keyword">if</span> (arr.length === <span class="number">0</span>) &#123;</div><div class="line">        clickCount();</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</div><div class="line">          arr[i]();</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      arr.push(clickCount);</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'不允许输出'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  d2.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    isPrint = <span class="literal">true</span>;</div><div class="line">    <span class="built_in">console</span>.log(isPrint);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="6-小程序问题"><a href="#6-小程序问题" class="headerlink" title="6,小程序问题"></a>6,小程序问题</h3><ul>
<li>不支持跳转外部链接</li>
<li>text可以解析/n,</li>
<li>目前不支持识别图中二维码，</li>
<li>背景图片不能用本地图片，</li>
<li>wx.navigateTo需要跳转的应用内非 tabBar 的页面的路径</li>
<li>wx.switchTab跳转到tabBar页面，</li>
<li>wx.showToast(),icon只支持success和loading,但是支持image,且image优先级高于icon</li>
<li>tabBar页面A   navigatorTo 到页面B，然后B   switchTab 到A，这里A会执行onShow()；<br>但是我再从A跳到B再switchTab回来，A就不会再执行onShow()了，</li>
</ul>
<h3 id="7-总结"><a href="#7-总结" class="headerlink" title="7,总结"></a>7,总结</h3><ul>
<li>有时候在开发者工具上测试时是没有问题的,但是真机测试却有问题,所有开发过程中一定要在多个不同型号的手机上测试;很多时候IOS和安卓api返回的信息不同</li>
<li>在手机上打开调试的时候是好的,但是关闭调试后就会出现各种bug,遇到这种情况一定要一步步的去排查原因</li>
</ul>
<h4 id="8-后采用wepy重构小程序遇到的一些坑"><a href="#8-后采用wepy重构小程序遇到的一些坑" class="headerlink" title="8,后采用wepy重构小程序遇到的一些坑"></a>8,后采用wepy重构小程序遇到的一些坑</h4><p><a href="https://wepyjs.github.io/wepy/#/" target="_blank" rel="external">wepy文档</a><br>1，Q: 怎么在page组件和component组件中回去到getApp(),就是app里面定义的函数,通过this.$parent只能拿到数据，拿不到方法?<br>A:可以在this.$parent的_proto上拿到方法,即this.$parent.onLogin<br>2, Q:怎么实现按需加载<br>A:在compoent组件中自定义生命周期函数,并手动触发</p>
]]></content>
      
        <categories>
            
            <category> 微信小程序 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[vue生命周期详解]]></title>
      <url>/2017/08/29/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p><img src="http://oo4xdz5i0.bkt.clouddn.com/vuelife.jpg" alt="title"><br>vue声明周期,在每个声明周期中都干了些什么?<br><a id="more"></a></p>
<h4 id="1-vue的生命周期"><a href="#1-vue的生命周期" class="headerlink" title="1, vue的生命周期"></a>1, vue的生命周期</h4><ul>
<li>beforeCreate: 组件实例刚刚被创建,组件属性计算之前,如data属性</li>
<li>created: 组件实例创建完成,属性已绑定,但是DOM还未完成,$el属性还不存在</li>
<li>beforeMount:模板编译/挂载之前</li>
<li>mounted: 模板编译/挂载之后</li>
<li>beforeUpdate: 组件更新之前</li>
<li>updated: 组件更新之后</li>
<li>activated: for <code>keep-alive</code>,组件被激活时调用</li>
<li>deactivated: for <code>keep-alive</code>,组件被移除时调用</li>
<li>beforeDestroy: 组件销毁前被调用</li>
<li>destoryed: 组件销毁后调用<blockquote>
<p>ps:下面代码可以直接复制出去执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=<span class="string">"en"</span>&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;Document&lt;<span class="regexp">/title&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>head&gt;</div><div class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.jsdelivr.net/vue/2.1.3/vue.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;body&gt;</div><div class="line">    &lt;div id=<span class="string">"app"</span>&gt;&#123;&#123;a&#125;&#125;&lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">    &lt;script&gt;</span></div><div class="line"><span class="regexp">        var vm = new Vue(&#123;</span></div><div class="line"><span class="regexp">            el: '#app',</span></div><div class="line"><span class="regexp">            data: &#123;</span></div><div class="line"><span class="regexp">                a: 'vuejs',</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            beforeCreate: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('创建前');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            created: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('创建之后');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            beforeMount: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('mount之前');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            mounted: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('mount之后');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            beforeUpdate: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('更新之前');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            updated: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('更新完成');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            beforeDestroy: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('组件销毁之前');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">            destroyed: function() &#123;</span></div><div class="line"><span class="regexp">                console.log('组件销毁之后');</span></div><div class="line"><span class="regexp">                console.log(this.a);</span></div><div class="line"><span class="regexp">                console.log(this.$el);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">        &#125;)</span></div><div class="line"><span class="regexp">    &lt;/</span>script&gt;</div><div class="line">&lt;<span class="regexp">/body&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>html&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<blockquote>
<p>beforeCreated: el和data并未初始化<br>created: 完成data数据的初始化,el没有<br>beforeMount: 完成了el和data初始化<br>mounted: 完成挂载</p>
</blockquote>
<p><img src="http://oo4xdz5i0.bkt.clouddn.com/vueLife.png" alt="title"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">打开命令行在命令行中输入vm.a = &apos;change&apos;;查看效果</div></pre></td></tr></table></figure></p>
<p><img src="http://oo4xdz5i0.bkt.clouddn.com/vueUpdate.png" alt="title"></p>
<blockquote>
<p><code>activated</code>和<code>deactivated</code>这两个生命周期函数涉及到<code>&lt;keep-alive&gt;</code>这个组件,所以想了解这个生命周期函数的可以看一下我的<a href="http://wangyaxing.top/2017/09/06/vue%E7%BB%84%E4%BB%B6%E4%B9%8Bkeep-alive/#more">另一篇文章</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[vue组件通信]]></title>
      <url>/2017/08/29/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1541368-d9be1b3b39abc037?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>组件通信是很重要的一部分,父组件怎么传数据给子组件,子组件怎么传递数据给父组件?<br><a id="more"></a></p>
<h3 id="1-父组件给子组件传递数据"><a href="#1-父组件给子组件传递数据" class="headerlink" title="1,父组件给子组件传递数据"></a>1,父组件给子组件传递数据</h3><blockquote>
<p> vue中使用props向子组件传递数据<br>1): 子组件在props中创建一个属性,用于接收父组件传过来的值<br>2): 父组件中注册子组件<br>3): 在子组件标签中添加子组件props中创建的属性<br>4): 把需要传给子组件的值赋给该属性  </p>
<h3 id="2-子组件向父组件传递数据"><a href="#2-子组件向父组件传递数据" class="headerlink" title="2,子组件向父组件传递数据"></a>2,子组件向父组件传递数据</h3><p>子组件主要通过事件传递数据给父组件<br>1), 子组件中需要以某种方式,例如点击事件的方法来触发一个自定义事件<br>2),将需要传的值作为$emit的第二个参数,该值将作为实参数传给相应自定义事件的方法<br>3),在父组件中注册子组件并在子组件标签上绑定自定义事件的监听</p>
<h3 id="3-子组件向子组件传递数据"><a href="#3-子组件向子组件传递数据" class="headerlink" title="3,子组件向子组件传递数据"></a>3,子组件向子组件传递数据</h3><p>vue找那个没有直接子组件对子组件传参的方法,建议将需要传递数据的在组件,都合并为一个组件,如果一定需要子组件对子组件传参,可以先传到父组件,再传到子组件,为了方便开发,vue推出了一个状态管理工具vuex,可以啃方便的实现组件之间的参数传递</p>
</blockquote>
<p>具体的实例代码如下:可以自行参考相关代码在编辑器中尝试</p>
<ul>
<li><p>父组件向子组件传递数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 父组件向子组件传递数据</span></div><div class="line">&lt;!--</div><div class="line">msg 是在data中(父组件)定义的变量</div><div class="line">如果需要从父组件中获取logo的值,就需要使用props[<span class="string">'msg'</span>], 如<span class="number">30</span>行</div><div class="line">在props中添加了元素以后,就不需要在data中(子组件)中再添加变量了</div><div class="line">--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;child  @transferuser=<span class="string">"getUser"</span> :msg=<span class="string">"msg"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span>  </div><div class="line">    &lt;p&gt;用户名为:&#123;&#123;user&#125;&#125;(我是子组件传递给父组件的数据)&lt;<span class="regexp">/p&gt;  </span></div><div class="line"><span class="regexp">  &lt;/</span>div&gt;</div><div class="line">&lt;<span class="regexp">/template&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;script&gt;</span></div><div class="line"><span class="regexp">    import child from './</span>child.vue<span class="string">';</span></div><div class="line"><span class="string">    export default &#123;</span></div><div class="line"><span class="string">        components: &#123;</span></div><div class="line"><span class="string">            child,</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">        data() &#123;</span></div><div class="line"><span class="string">            return &#123;</span></div><div class="line"><span class="string">                user: '</span><span class="string">',</span></div><div class="line"><span class="string">                msg: '</span>我是父组件传给子组件的信息<span class="string">',</span></div><div class="line"><span class="string">            &#125;;</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">        methods: &#123;</span></div><div class="line"><span class="string">            getUser(msg) &#123;</span></div><div class="line"><span class="string">                this.user = msg;</span></div><div class="line"><span class="string">                console.log(msg);</span></div><div class="line"><span class="string">            &#125;,</span></div><div class="line"><span class="string">        &#125;,</span></div><div class="line"><span class="string">    &#125;;</span></div><div class="line"><span class="string">&lt;/script&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>子组件向父组件传递数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 子组件向父组件传递数据</span></div><div class="line">&lt;!--</div><div class="line"><span class="number">1.</span>@ : 是  v-on的简写</div><div class="line"><span class="number">2.</span>子组件主要通过事件传递数据给父组件</div><div class="line"><span class="number">3.</span>当input的值发生变化时,将username传递给parent.vue,首先声明了一个setUser,用change事件来调用setUser</div><div class="line"><span class="number">4.</span>在setUser中,使用了$emit来遍历transferUser事件,并返回<span class="keyword">this</span>.username,其中transferuser是一个自定义事件,功能类似一个中转,<span class="keyword">this</span>.username通过这个事件传递给父组件</div><div class="line">--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">      &lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">      &lt;span&gt;用户名&lt;/</span>span&gt;</div><div class="line">      &lt;input v-model=<span class="string">"username"</span> @change=<span class="string">'setUser'</span>&gt;向父组件传值&lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">  &lt;/</span>div&gt;</div><div class="line">&lt;<span class="regexp">/template&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;script&gt;</span></div><div class="line"><span class="regexp">    export default &#123;</span></div><div class="line"><span class="regexp">        data() &#123;</span></div><div class="line"><span class="regexp">            return &#123;</span></div><div class="line"><span class="regexp">                username: '测试',</span></div><div class="line"><span class="regexp">            &#125;;</span></div><div class="line"><span class="regexp">        &#125;,</span></div><div class="line"><span class="regexp">        props: &#123;</span></div><div class="line"><span class="regexp">            msg: &#123;</span></div><div class="line"><span class="regexp">                type: String,</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">        &#125;,</span></div><div class="line"><span class="regexp">        methods: &#123;</span></div><div class="line"><span class="regexp">            setUser() &#123;</span></div><div class="line"><span class="regexp">                this.$emit('transferuser', this.username);</span></div><div class="line"><span class="regexp">            &#125;,</span></div><div class="line"><span class="regexp">        &#125;,</span></div><div class="line"><span class="regexp">    &#125;;</span></div><div class="line"><span class="regexp">&lt;/</span>script&gt;</div></pre></td></tr></table></figure></li>
</ul>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[js的函数节流]]></title>
      <url>/2017/08/27/js%E7%9A%84%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1096130-fe7e33473c926bcc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>什么是函数节流?为什么要用到函数节流?函数节流可以解决哪写问题?<br><a id="more"></a></p>
<blockquote>
<p><a href="http://www.alloyteam.com/2012/11/javascript-throttle/" target="_blank" rel="external">函数节流</a></p>
</blockquote>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景:"></a>使用场景:</h4><ul>
<li>(1)对于常见的场景，如网页滚动时，经常会有滚动到哪时做什么样的动画效果，遂要注册onscroll事件，如何减少触发次数，到达优化性能，同时又满足效果要求不卡顿，一个是优化事件内代码，减少代码量，二就是做函数节流。</li>
<li>(2)在前端开发中，有时会为页面绑定resize事件，或者为一个页面元素绑定拖拽事件（其核心就是绑定mousemove），这种事件有一个特点，就是用户不必特地捣乱，他在一个正常的操作中，都有可能在一个短的时间内触发非常多次事件绑定程序。而大家知道，DOM操作时很消耗性能的，这个时候，如果你为这些事件绑定一些操作DOM节点的操作的话，那就会引发大量的计算，在用户看来，页面可能就一时间没有响应，这个页面一下子变卡了变慢了。甚至在IE下，如果你绑定的resize事件进行较多DOM操作，其高频率可能直接就使得浏览器崩溃。<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4></li>
<li>定时器，当触发一个事件时，先setTimeout让这个事件延迟一会再执行，如果在这个时间间隔内又触发了事件，那我们就clear掉原来的定时器，再setTimeout一个新的定时器延迟一会执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function throttle(method, context) &#123;</div><div class="line">    clearTimeout(method, tId);</div><div class="line">    method.tId = setTimeout(function()&#123;</div><div class="line">        method.call(context);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">window.onresize = function() &#123;</div><div class="line">     throttle(myFunc);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var throttle = function(fn, delay) &#123;</div><div class="line">    var timer = null;</div><div class="line">    return function() &#123;</div><div class="line">        var context = this, args = arguments;</div><div class="line">        clearTimeout(timer);</div><div class="line">        timer = setTimeout(function() &#123;</div><div class="line">            fn.apply(context, args);</div><div class="line">        &#125;, delay);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">window.onresize = throttle(myFunc, 100);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var throttleV2 = function (fn, delay, mustRunDelay) &#123;</div><div class="line">    var timer = null;</div><div class="line">    var t_start;</div><div class="line">    return function() &#123;</div><div class="line">        var context = this, args = arguments, t_curr = +new Date();</div><div class="line">        clearTimeout(timer);</div><div class="line">        if(!t_start) &#123;</div><div class="line">            t_start = t_curr;</div><div class="line">        &#125;</div><div class="line">        if(t_curr - t_start &gt;= mustRunDelay) &#123;</div><div class="line">            fn.apply(context, args);</div><div class="line">        &#125; else &#123;</div><div class="line">            timer = setTimeout(function() &#123;</div><div class="line">                fn.apply(context, args);</div><div class="line">            &#125;, delay);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">window.onresize = throttleV2(myFunc, 50, 100);</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[js垃圾回收机制]]></title>
      <url>/2017/08/27/js%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/4369238-b38891061c7cd794.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540/q/50" alt="title"><br>你了解javascript的垃圾回收机制么?<br><a id="more"></a></p>
<ul>
<li>引用计数<br>此算法把“对象是否不再需要”简化定义为“对象有没有其他对象引用到它”。如果没有引用指向该对象（零引用），对象将被垃圾回收机制回收。</li>
</ul>
<p>限制：无法处理循环引用。在下面的例子中，两个对象被创建，并互相引用，形成了一个循环。它们被调用之后不会离开函数作用域，所以它们已经没有用了，可以被回收了。然而，引用计数算法考虑到它们互相都有至少一次引用，所以它们不会被回收。</p>
<ul>
<li>标记清除<br>当变量进入环境时，例如，在函数中声明一个变量，就将这个变量标记为“进入环境”。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到它们。而当变量离开环境时，则将其标记为“离开环境”。</li>
</ul>
<p>垃圾回收器在运行的时候会给存储在内存中的所有变量都加上标记（当然，可以使用任何标记方式）。然后，它会去掉环境中的变量以及被环境中的变量引用的变量的标记（闭包）。而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。最后，垃圾回收器完成内存清除工作，销毁那些带标记的值并回收它们所占用的内存空间。</p>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[一个怎样都不想认输的🌹]]></title>
      <url>/2017/08/26/%E4%B8%8D%E6%83%B3%E5%83%8F%E7%94%9F%E6%B4%BB%E4%BD%8E%E5%A4%B4/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1442902-12ed174df8fe5651?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>毕业两个月,在北京已待了一年多,我成长了很多,无论技术,还是心理…<br><a id="more"></a><br>现在有点开始明白之前为什么一个要晚上十点下班的公司,当时面试技术过了,但是最后却要了一个男生,(最后没被面试上,那个技术面试官还特意打电话说,不是因为你技术不行,而是我们这儿加班很严重,所以综合考虑招了个男同事,让我继续💪);</p>
<p>连续快一个月了,每天晚上一点睡,现在感觉真的身体快吃不消了,昨天上班头疼的已坚持不住,所有跟老大说了一下,晚上八点就早点回去了,电梯里碰到了清洁工阿姨,阿姨会问,吃饭了么,又加班了么,这个点下班真的是太晚了,回去早点休息…(突然想起我妈对我的唠叨)</p>
<p>本来打算晚上回去就睡,躺在床上,突然想起一个解决今天复杂的数据关系的一个思路,于是爬起来打开电脑开始尝试,看了看时间,晚上9点,心里想着最晚11点一定要睡,可是写代码的过程中又遇到很多不会的问题,于是好奇心促使我弄明白我什么…</p>
<p>就这样过了12点…,</p>
<p>一点的时候,实在太困,匆忙把代码传到git上,倒头就睡…<br><img src="http://upload-images.jianshu.io/upload_images/5325674-1a64ccd89f904f17.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50" alt="title"></p>
<p>闹钟响了,实在挣不开眼,想着再睡十分钟,一会洗漱一定不墨迹;</p>
<p>10分钟搞定,出门的时候看着天气不对,又赶紧找了把伞,看了一个,好,衣服没穿反,放心的找了辆小黄,骑着飞速跑起来,不好,这两车骑得有点费劲,算了,还是赶紧走吧,有辆车就不错了,路上很堵,堵到一路上都被自行车骑着走,但是心理还是很庆幸自己今天没有做公交车;</p>
<p>到了一个红绿灯路口,看到指挥交通的大爷,等红灯的时候大爷很热情的跟我聊天,说今天要下大雨,问我有没有带雨伞,(有一次因为胃疼差点晕倒,这位大爷看到了就扶了我一下,还打算送我去医院,说小姑娘一个人在外面要好好照顾自己,当时眼泪真的就下来了,在帝都这样冷漠的城市,有个陌生人能对你这样,突然感觉很温暖)</p>
<hr>
<p>有时候会想是不是自己老了啊,去年这会刚工作,也是每天很累,因为很多东西要学,记得当时每天晚上看书到两点,周末不加班的时候,也是推了很多’约会’,睡上一上午,然后又开始敲代码…</p>
<p>很累的时候,有时候真的是想放弃,有亲戚跟我打电话,说他们那儿招这种刚毕业的学计算机的,一个月刚开始5000,还给解决住房问题,问我要不要考虑回去,毕竟帝都真的很恐怖;可是我刚毕业技术还有很大的上升空间,还是北京这样的大城市技术发展比较好,更能快速成长,</p>
<p>有时候也会想不如拿着自己的高中教师证回去当老师,或者考个公务员,或者找的对自己好的男的,直接结婚,像很多身边的女朋友一样,然后带孩子…可是那样的生活好像一眼就能望到头,那是我喜欢的生活么?</p>
<p>想起当初自己为什么铁了心的要转行,当时也是能想到以后会遇到很多困难,会很累,找工作的时候,学历就是普通本科,专业又是农业,我只能靠自己过硬的技术来比过自己的竞争者.</p>
<p>我正在为自己想要的生活去奋斗,不想平庸的过一辈子,在外面的时候,不要把自己当成一个女生,因为生活并不会因为你是女生而对你手下留情,所有还是像个汉子一样去努力吧,我相信越努力越幸运</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4968905-11f9b598d609bff1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"></p>
]]></content>
      
        <categories>
            
            <category> life </category>
            
        </categories>
        
        
        <tags>
            
            <tag> life </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[嘿,使用vue,你注意到了这些了么?]]></title>
      <url>/2017/08/23/vue%E4%B8%AD%E6%A3%80%E6%B5%8B%E4%B8%8D%E5%88%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1541368-d9be1b3b39abc037?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>使用vue过程中,遇到了一些问题,这里先总结以下两个:<br><a id="more"></a></p>
<h1 id="问题一"><a href="#问题一" class="headerlink" title="问题一:"></a>问题一:</h1><p>vue组件之间传递数据,在子组件中我想改变一个从父组件中传过来的值</p>
<blockquote>
<p>这是父组件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">      &lt;Child :message=<span class="string">"message"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">'./child.vue'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            message: <span class="string">'这是传给子组件的信息'</span>,</div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    components: &#123;</div><div class="line">        Child,</div><div class="line">    &#125;,</div><div class="line">&#125;;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>这是子组件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div @click=<span class="string">"handleChange"</span>&gt;</div><div class="line">      &#123;&#123;message&#125;&#125;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">        props: &#123;</div><div class="line">            message: &#123;</div><div class="line">                type: <span class="built_in">String</span>,</div><div class="line">                <span class="keyword">default</span>: <span class="string">'这是默认信息'</span>,</div><div class="line">            &#125;,</div><div class="line">        &#125;,</div><div class="line">        methods: &#123;</div><div class="line">            handleChange() &#123;</div><div class="line">                <span class="keyword">this</span>.message = <span class="string">'我是子组件修改后的信息'</span>;</div><div class="line">            &#125;,</div><div class="line">        &#125;,</div><div class="line">    &#125;;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<p>如果你这样写就会报一下错误<br><img src="http://oo4xdz5i0.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-08-24%20%E4%B8%8B%E5%8D%883.12.16.png" alt="title"><br>但是在子组件中，我们不要去修改 prop。如果你必须要修改到这些数据，你可以使用以下方法：</p>
<ul>
<li>把 prop 赋值给一个局部变量，然后需要修改的话就修改这个局部变量，而不影响 prop<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div @click=<span class="string">"handleChange"</span>&gt;</div><div class="line">      &#123;&#123;newMessage&#125;&#125;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">        props: &#123;</div><div class="line">            message: &#123;</div><div class="line">                type: <span class="built_in">String</span>,</div><div class="line">                <span class="keyword">default</span>: <span class="string">'这是默认信息'</span>,</div><div class="line">            &#125;,</div><div class="line">        &#125;,</div><div class="line">        data() &#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                newMessage: <span class="keyword">this</span>.message,</div><div class="line">            &#125;;</div><div class="line">        &#125;,</div><div class="line">        methods: &#123;</div><div class="line">            handleChange() &#123;</div><div class="line">                <span class="keyword">this</span>.newMessage = <span class="string">'我是子组件修改后的信息'</span>;</div><div class="line">            &#125;,</div><div class="line">        &#125;,</div><div class="line">    &#125;;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="问题二"><a href="#问题二" class="headerlink" title="问题二:"></a>问题二:</h1><p>vue中检测不到data的变化,我想把给data中的a赋值一个新的对象(添加一个它本身不存在的属性),然而经过尝试发现直接赋值是行不通的,以下是我做的一下尝试<br><!--more--><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">      &#123;&#123;a&#125;&#125;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>template&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> data() &#123;</div><div class="line">     <span class="keyword">return</span> &#123;</div><div class="line">         a: &#123;&#125;,</div><div class="line">     &#125;;</div><div class="line"> &#125;,</div><div class="line"> created() &#123;</div><div class="line">     setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">         <span class="keyword">this</span>.a.b = <span class="number">1</span>;</div><div class="line">     &#125;, <span class="number">1000</span>)</div><div class="line"> &#125;,</div><div class="line"> watch: &#123;</div><div class="line">    a(newVal, oldVal) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;oldVal&#125;</span>现在变成了<span class="subst">$&#123;newVal&#125;</span>`</span>);</div><div class="line">    &#125;,</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<ul>
<li>上面这样写(给对象a添加一个本来不存在的属性b,并给他赋值)并不会触发watch,<br><img src="http://oo4xdz5i0.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-08-24%20%E4%B8%8B%E5%8D%882.33.48.png" alt="title"></li>
<li><a href="https://cn.vuejs.org/v2/guide/reactivity.html#变化检测问题" target="_blank" rel="external">vue文档中</a>也明确表示添加到对象上的新属性不会触发更新,所以我们应该新建一个新的对象并将这个心对象的值赋值给原有的对象<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            a: &#123;&#125;,</div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">this</span>.a = &#123;</div><div class="line">                b: <span class="number">1</span>,</div><div class="line">            &#125;;</div><div class="line">        &#125;, <span class="number">500</span>);</div><div class="line">    &#125;,</div><div class="line">    watch: &#123;</div><div class="line">        a(newVal, oldVal) &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;oldVal&#125;</span>现在变成了<span class="subst">$&#123;newVal&#125;</span>`</span>);</div><div class="line">        &#125;,</div><div class="line">    &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="由此给大家拓展一个对象的一些知识"><a href="#由此给大家拓展一个对象的一些知识" class="headerlink" title="由此给大家拓展一个对象的一些知识"></a>由此给大家拓展一个对象的一些知识</h2><h3 id="tips1-js取值的两种方式的区别"><a href="#tips1-js取值的两种方式的区别" class="headerlink" title="tips1: js取值的两种方式的区别"></a>tips1: js取值的两种方式的区别</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">abc</span>:<span class="string">"ss"</span>,<span class="attr">nn</span>:<span class="number">90</span>&#125;;</div><div class="line"><span class="keyword">const</span> v1 = obj.abc; <span class="comment">// 使用点的方式</span></div><div class="line"><span class="keyword">const</span> v2 = obj[<span class="string">"abc"</span>]; <span class="comment">// 使用中括号的方式</span></div></pre></td></tr></table></figure>
<p>在实际项目中一般使用.会方便很多,但是key是变量的话就不能使用.,js对象会理解变量为对象的key值,</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> v3 = obj[key];</div></pre></td></tr></table></figure>
<h3 id="tips2-对象深拷贝实现方法"><a href="#tips2-对象深拷贝实现方法" class="headerlink" title="tips2: 对象深拷贝实现方法"></a>tips2: 对象深拷贝实现方法</h3><blockquote>
<p> 先解释什么是深拷贝和浅拷贝</p>
</blockquote>
<ul>
<li>浅拷贝是对对象地址的复制,并没有开辟新的栈,复制的结果是两个对象指向同一个地址,修改其中一个对象的属性,另一个对象的属性也会改变</li>
<li>深拷贝是开辟新的栈,两个对象对应两个不同的地址,修改一个对象的属性,不会改变另一个对象的属性<blockquote>
<p>最简单的如下(方法一)</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">b = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify(a) )</div></pre></td></tr></table></figure>
<p>但是会存在一些问题</p>
<ul>
<li>无法复制函数</li>
<li>原型链没了，对象就是object，所属的类没了。<blockquote>
<p>使用递归(方法二)</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> obj1 = &#123;</div><div class="line">    name: <span class="string">'cehsi'</span>,</div><div class="line">    age: <span class="number">13</span>,</div><div class="line">    friends:[<span class="string">'sk'</span>,<span class="string">'ls'</span>],</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">o, c</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = c || &#123;&#125;;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> i <span class="keyword">in</span> o) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> o[i] === <span class="string">'object'</span>) &#123;</div><div class="line">            <span class="comment">// 判断是对象</span></div><div class="line">            <span class="keyword">if</span>(o[i].constructor === <span class="built_in">Array</span>) &#123;</div><div class="line">                <span class="comment">// 数组</span></div><div class="line">                c[i] = [];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                c[i] = &#123;&#125;;</div><div class="line">            &#125;</div><div class="line">            deepCopy(o[i], c[i]);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            c[i] = o[i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> c;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">name</span>: <span class="string">'result'</span>&#125;;</div><div class="line">obj2 = deepCopy(obj1, obj2);</div><div class="line"><span class="built_in">console</span>.log(obj2); <span class="comment">// &#123; name: 'cehsi', age: 13, friends: [ 'sk', 'ls' ] &#125;</span></div><div class="line">obj2.age = <span class="number">20</span>;</div><div class="line"><span class="built_in">console</span>.log(obj2, obj1); <span class="comment">// &#123; name: 'cehsi', age: 20, friends: [ 'sk', 'ls' ] &#125; &#123; name: 'cehsi', age: 13, friends: [ 'sk', 'ls' ] &#125;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.npmjs.com/package/deepcopy" target="_blank" rel="external">使用npm install deepcopy</a></p>
</blockquote>
<h3 id="tips3-深对比-方法参考-http-stackoverflow-com-questions-1068834-object-comparison-in-javascript"><a href="#tips3-深对比-方法参考-http-stackoverflow-com-questions-1068834-object-comparison-in-javascript" class="headerlink" title="tips3: 深对比,方法参考 http://stackoverflow.com/questions/1068834/object-comparison-in-javascript"></a>tips3: 深对比,方法参考 <a href="http://stackoverflow.com/questions/1068834/object-comparison-in-javascript" target="_blank" rel="external">http://stackoverflow.com/questions/1068834/object-comparison-in-javascript</a></h3><blockquote>
<p>方法一:Object.toJSON()</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">这个方法简单,但是只适用于两个对象属性相同的情况,在没有方法和DOM节点的情况下，您可以使用简单的JSON样式对象：</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> obj1 = &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> obj2 = &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> obj3 = &#123;</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(obj1) === <span class="built_in">JSON</span>.stringify(obj2)); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(obj1) === <span class="built_in">JSON</span>.stringify(obj3)); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<blockquote>
<p>方法二: 深度比较两个对象</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">比较对象而不挖掘原型，然后递归地比较属性的投影，还可以比较构造函数。</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCompare</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i, l, leftChain, rightChain;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">compare2Objects</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> p;</div><div class="line"></div><div class="line">        <span class="comment">// remember that NaN === NaN returns false</span></div><div class="line">        <span class="comment">// and isNaN(undefined) returns true</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">isNaN</span>(x) &amp;&amp; <span class="built_in">isNaN</span>(y) &amp;&amp; <span class="keyword">typeof</span> x === <span class="string">'number'</span> &amp;&amp; <span class="keyword">typeof</span> y === <span class="string">'number'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Compare primitives and functions.     </span></div><div class="line">        <span class="comment">// Check if both arguments link to the same object.</span></div><div class="line">        <span class="comment">// Especially useful on the step where we compare prototypes</span></div><div class="line">        <span class="keyword">if</span> (x === y) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Works in case when functions are created in constructor.</span></div><div class="line">        <span class="comment">// Comparing dates is a common scenario. Another built-ins?</span></div><div class="line">        <span class="comment">// We can even handle functions passed across iframes</span></div><div class="line">        <span class="keyword">if</span> ((<span class="keyword">typeof</span> x === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> y === <span class="string">'function'</span>) ||</div><div class="line">            (x <span class="keyword">instanceof</span> <span class="built_in">Date</span> &amp;&amp; y <span class="keyword">instanceof</span> <span class="built_in">Date</span>) ||</div><div class="line">            (x <span class="keyword">instanceof</span> <span class="built_in">RegExp</span> &amp;&amp; y <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) ||</div><div class="line">            (x <span class="keyword">instanceof</span> <span class="built_in">String</span> &amp;&amp; y <span class="keyword">instanceof</span> <span class="built_in">String</span>) ||</div><div class="line">            (x <span class="keyword">instanceof</span> <span class="built_in">Number</span> &amp;&amp; y <span class="keyword">instanceof</span> <span class="built_in">Number</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> x.toString() === y.toString();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// At last checking prototypes as good as we can</span></div><div class="line">        <span class="keyword">if</span> (!(x <span class="keyword">instanceof</span> <span class="built_in">Object</span> &amp;&amp; y <span class="keyword">instanceof</span> <span class="built_in">Object</span>)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (x.isPrototypeOf(y) || y.isPrototypeOf(x)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (x.constructor !== y.constructor) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (x.prototype !== y.prototype) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Check for infinitive linking loops</span></div><div class="line">        <span class="keyword">if</span> (leftChain.indexOf(x) &gt; <span class="number">-1</span> || rightChain.indexOf(y) &gt; <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Quick checking of one object being a subset of another.</span></div><div class="line">        <span class="comment">// todo: cache the structure of arguments[0] for performance</span></div><div class="line">        <span class="keyword">for</span> (p <span class="keyword">in</span> y) &#123;</div><div class="line">            <span class="keyword">if</span> (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> y[p] !== <span class="keyword">typeof</span> x[p]) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (p <span class="keyword">in</span> x) &#123;</div><div class="line">            <span class="keyword">if</span> (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> y[p] !== <span class="keyword">typeof</span> x[p]) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">switch</span> (<span class="keyword">typeof</span>(x[p])) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="string">'object'</span>:</div><div class="line">                <span class="keyword">case</span> <span class="string">'function'</span>:</div><div class="line"></div><div class="line">                    leftChain.push(x);</div><div class="line">                    rightChain.push(y);</div><div class="line"></div><div class="line">                    <span class="keyword">if</span> (!compare2Objects(x[p], y[p])) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    leftChain.pop();</div><div class="line">                    rightChain.pop();</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                <span class="keyword">default</span>:</div><div class="line">                    <span class="keyword">if</span> (x[p] !== y[p]) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//Die silently? Don't know how to handle such case, please help...</span></div><div class="line">        <span class="comment">// throw "Need two or more arguments to compare";</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</div><div class="line"></div><div class="line">        leftChain = []; <span class="comment">//Todo: this can be cached</span></div><div class="line">        rightChain = [];</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (!compare2Objects(<span class="built_in">arguments</span>[<span class="number">0</span>], <span class="built_in">arguments</span>[i])) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>已知问题（他们的优先级很低，可能你永远不会注意到）</p>
</li>
<li><p>具有不同原型结构但相同投影的物体</p>
</li>
<li>函数可能具有相同的文本，但是指的是不同的闭包原型</li>
</ul>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[揭开vue神秘面纱]]></title>
      <url>/2017/08/20/%E6%8F%AD%E5%BC%80vue%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1541368-d9be1b3b39abc037?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>带你一步一步走进vue<br><a id="more"></a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p><a href="https://github.com/funnycoderstar/vue-demo" target="_blank" rel="external">源码</a><br><a href="http://wangyaxing.deercv.com/" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="https://github.com/funnycoderstar/blog" target="_blank" rel="external">blog</a></p>
<h4 id="实现过程-直接上代码"><a href="#实现过程-直接上代码" class="headerlink" title="实现过程,直接上代码"></a>实现过程,直接上代码</h4><h5 id="1-实现简单的v-model的绑定"><a href="#1-实现简单的v-model的绑定" class="headerlink" title="1,实现简单的v-model的绑定"></a>1,实现简单的v-model的绑定</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"input"</span> <span class="attr">v-model</span>=<span class="string">"a"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>可以打开控制台,然后输入vm.查看view到model的绑定;然后改变input的值,再次在控制台输出vm.查看model到view的绑定<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;script src="https://cdn.bootcss.com/vue/2.4.2/vue.js"&gt;&lt;/script&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">        <span class="built_in">window</span>.vm = <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="undefined">            data: &#123;</span></div><div class="line"><span class="undefined">                b: 10000,</span></div><div class="line"><span class="undefined">                a: 1</span></div><div class="line"><span class="undefined">            &#125;,</span></div><div class="line"><span class="javascript">            el: <span class="string">'#input'</span></span></div><div class="line"><span class="undefined">        &#125;);</span></div><div class="line"><span class="javascript">        setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></div><div class="line"><span class="undefined">            vm.a++;</span></div><div class="line"><span class="undefined">        &#125;, 1000);</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> input = <span class="built_in">document</span>.querySelector(data.el);</div><div class="line">    <span class="keyword">let</span> model = input.getAttribute(<span class="string">'v-model'</span>);</div><div class="line">    <span class="keyword">if</span>(!data.data) &#123;</div><div class="line">        <span class="built_in">console</span>.warn(<span class="string">`你没有定义data`</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(model &amp;&amp; data.data.hasOwnProperty(model))&#123;</div><div class="line">        <span class="comment">// 实现model到view的绑定</span></div><div class="line">        input.value = data.data[model];</div><div class="line">        <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, model, &#123;</div><div class="line">            configurable: <span class="literal">true</span>,</div><div class="line">            enumerable: <span class="literal">true</span>,</div><div class="line">            get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> data.data[model];</div><div class="line">            &#125;,</div><div class="line">            set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line"></div><div class="line">                input.value = data.data[model] = newVal;</div><div class="line">            &#125;,</div><div class="line">        &#125;)</div><div class="line">        <span class="comment">// 实现view到model的绑定</span></div><div class="line">        input.addEventListener(<span class="string">"input"</span>, () =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>[model] = input.value;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">console</span>.warn(<span class="string">`你没有定义<span class="subst">$&#123;model&#125;</span>属性`</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>把一个普通 JavaScript 对象传给 Vue 实例的 data<br>选项，Vue 将遍历此对象所有的属性，并使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">Object.defineProperty</a> 把这些属性全部转为 getter/setter。</li>
<li>给input添加oninput事件实现view到model的绑定,即在input中输入一个值,vm.a也会跟着发生变化</li>
</ul>
<h5 id="2-实现多个v-model的绑定"><a href="#2-实现多个v-model的绑定" class="headerlink" title="2,实现多个v-model的绑定"></a>2,实现多个v-model的绑定</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"form"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"b"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"c"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;script src="https://cdn.bootcss.com/vue/2.4.2/vue.js"&gt;&lt;/script&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">        <span class="built_in">window</span>.vm = <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="undefined">            data: &#123;</span></div><div class="line"><span class="undefined">                a: 0,</span></div><div class="line"><span class="undefined">                b: 100,</span></div><div class="line"><span class="undefined">                c: 2,</span></div><div class="line"><span class="undefined">            &#125;,</span></div><div class="line"><span class="javascript">            el: <span class="string">'#form'</span></span></div><div class="line"><span class="undefined">        &#125;);</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> input = <span class="built_in">document</span>.querySelectorAll(<span class="string">'input'</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> input) &#123;</div><div class="line">        <span class="keyword">let</span> model = item.getAttribute(<span class="string">'v-model'</span>);</div><div class="line">        item.value = data.data[model];</div><div class="line">        <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, model, &#123;</div><div class="line">            configurable: <span class="literal">true</span>,</div><div class="line">            enumerable: <span class="literal">true</span>,</div><div class="line">            get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> data.data[model];</div><div class="line">            &#125;,</div><div class="line">            set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</div><div class="line">                item.value = data.data[model] = newVal;</div><div class="line">            &#125;,</div><div class="line">        &#125;)</div><div class="line">        item.addEventListener(<span class="string">"input"</span>, () =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>[model] = item.value;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>实现原理个实现一个v-model差不多</li>
</ul>
<h5 id="3-实现模板的绑定"><a href="#3-实现模板的绑定" class="headerlink" title="3,实现模板的绑定"></a>3,实现模板的绑定</h5><ul>
<li><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"form"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; a  &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"b"</span> /&gt;</span></div><div class="line">        &#123;&#123; b &#125;&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"c"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; c  &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; c  &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;script src="https://cdn.bootcss.com/vue/2.4.2/vue.js"&gt;&lt;/script&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">        <span class="built_in">window</span>.vm = <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="undefined">            data: &#123;</span></div><div class="line"><span class="undefined">                a: 0,</span></div><div class="line"><span class="undefined">                b: 100,</span></div><div class="line"><span class="undefined">                c: 2,</span></div><div class="line"><span class="undefined">            &#125;,</span></div><div class="line"><span class="javascript">            el: <span class="string">'#form'</span></span></div><div class="line"><span class="undefined">        &#125;);</span></div><div class="line"><span class="javascript">        <span class="built_in">console</span>.log(vm);</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>用正则匹配到html中的模板字符串,然后将相应的部分替换成变量</p>
</li>
<li>匹配html中多个模板,必须先了解dom的结构<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> input = <span class="built_in">document</span>.querySelectorAll(<span class="string">'input'</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> input) &#123;</div><div class="line">        <span class="keyword">let</span> model = item.getAttribute(<span class="string">'v-model'</span>);</div><div class="line">        item.value = data.data[model];</div><div class="line">        <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, model, &#123;</div><div class="line">            configurable: <span class="literal">true</span>,</div><div class="line">            enumerable: <span class="literal">true</span>,</div><div class="line">            get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> data.data[model];</div><div class="line">            &#125;,</div><div class="line">            set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</div><div class="line">                item.value = data.data[model] = newVal;</div><div class="line">            &#125;,</div><div class="line">        &#125;)</div><div class="line">        item.addEventListener(<span class="string">"input"</span>, () =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>[model] = item.value;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> pss = <span class="built_in">document</span>.querySelector(data.el).childNodes;</div><div class="line">    <span class="keyword">let</span> ps = [];</div><div class="line">    <span class="keyword">let</span> arr = [];</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getText</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = value.length; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (value[i].nodeType === <span class="number">1</span>) &#123;</div><div class="line">                getText(value[i].childNodes);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value[i].nodeType === <span class="number">3</span>) &#123;</div><div class="line">                ps.push(value[i]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    getText(pss);</div><div class="line">    <span class="keyword">const</span> reg = <span class="regexp">/&#123;&#123;(.*)&#125;&#125;/</span>;</div><div class="line">    ps.forEach(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span> (reg.test(i.nodeValue)) &#123;</div><div class="line">            arr.push(i);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="built_in">console</span>.log(arr);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> p <span class="keyword">of</span> arr) &#123;</div><div class="line">        <span class="keyword">let</span> $p = reg.exec(p.nodeValue)[<span class="number">0</span>].slice(<span class="number">2</span>, p.nodeValue.length - <span class="number">2</span>).replace(<span class="regexp">/\s/g</span>, <span class="string">''</span>);</div><div class="line">        p.nodeValue = data.data[$p];</div><div class="line">        <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, $p, &#123;</div><div class="line">            configurable: <span class="literal">true</span>,</div><div class="line">            enumerable: <span class="literal">true</span>,</div><div class="line">            get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> data.data[$p];</div><div class="line">            &#125;,</div><div class="line">            set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</div><div class="line">                p.nodeValue = data.data[$p] = newVal;</div><div class="line">            &#125;,</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 错在多次赋值被覆盖的错误,所以思路应该变为找到所有绑定a, b, c的值,然后统一赋值</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="4-实现v-bind-v-on的绑定"><a href="#4-实现v-bind-v-on的绑定" class="headerlink" title="4,实现v-bind,v-on的绑定"></a>4,实现v-bind,v-on的绑定</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"form"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>这是测试v-model的效果<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>这是测试&#123;&#123;&#125;&#125;的效果<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        &#123;&#123; a &#125;&#125;&#123;&#123; b &#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"b"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; b &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"c"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; c &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>这是测试v-bind和v-on的效果<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">"src"</span> <span class="attr">v-bind:width</span>=<span class="string">"width1"</span> <span class="attr">:height</span>=<span class="string">"height"</span> <span class="attr">v-on:click</span>=<span class="string">"log"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>打开控制台,点击img,查看v-on的绑定效果<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- &lt;script src="https://cdn.bootcss.com/vue/2.4.2/vue.js"&gt;&lt;/script&gt; --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">        <span class="built_in">window</span>.obj = &#123;</span></div><div class="line"><span class="undefined">            a: 0,</span></div><div class="line"><span class="undefined">            b: 100,</span></div><div class="line"><span class="javascript">            c: <span class="string">'这是测试'</span>,</span></div><div class="line"><span class="javascript">            src: <span class="string">"http://cdn.suisuijiang.com/message_1492395396308.png?imageView2/2/w/40/h/40"</span>,</span></div><div class="line"><span class="undefined">            width1: 100,</span></div><div class="line"><span class="undefined">            height: 100,</span></div><div class="line"><span class="undefined">        &#125;;</span></div><div class="line"><span class="javascript">        <span class="built_in">window</span>.vm = <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="javascript">            el: <span class="string">'#form'</span>,</span></div><div class="line"><span class="undefined">            data: obj,</span></div><div class="line"><span class="undefined">            methods: &#123;</span></div><div class="line"><span class="javascript">                log: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">'你点击了图片'</span>);</span></div><div class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">`当前c的值为 <span class="subst">$&#123;<span class="keyword">this</span>.c&#125;</span>`</span>);</span></div><div class="line"><span class="undefined">                &#125;</span></div><div class="line"><span class="undefined">            &#125;</span></div><div class="line"><span class="undefined">        &#125;);</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<pre><code class="js"><span class="comment">/**</span>
<span class="comment"> * 解析dom指令</span>
<span class="comment"> * @param {*} $dom 根节点</span>
<span class="comment"> * @param {*} instructs 解析结果</span>
<span class="comment"> */</span>
<span class="function"><span class="keyword">function</span> <span class="title">handleInstruct</span>(<span class="params">$dom, instructs = {}</span>) </span>{
    <span class="function"><span class="keyword">function</span> <span class="title">addInstruct</span>(<span class="params">model, type, $node</span>) </span>{
        <span class="keyword">if</span> (instructs[model]) {
            <span class="keyword">if</span> (instructs[model][type]) {
                instructs[model][type].push($node);
            } <span class="keyword">else</span> {
                instructs[model][type] = [$node];
            }
        } <span class="keyword">else</span> {
            instructs[model] = {
                [type]: [$node]
            };
        }
    }

    <span class="keyword">if</span> ($dom.attributes) {
        <span class="keyword">for</span> (<span class="keyword">const</span> attr <span class="keyword">of</span> $dom.attributes) {
            <span class="keyword">if</span> (attr.name === <span class="string">'v-model'</span>) {
                <span class="keyword">const</span> model = $dom.getAttribute(<span class="string">'v-model'</span>);
                addInstruct(model, <span class="string">'model'</span>, $dom);
            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/^(v-bind|:)/</span>.test(attr.nodeName)) {
                <span class="keyword">const</span> parseResult = attr.nodeName.match(<span class="regexp">/^(?:v-bind)?:([a-zA-Z_$][a-zA-Z0-9_$]*)/</span>);
                <span class="keyword">if</span> (parseResult &amp;&amp; parseResult[<span class="number">1</span>]) {
                    addInstruct(attr.nodeValue.trim(), <span class="string">'bind'</span>, {
                        $dom,
                        attr: parseResult[<span class="number">1</span>]
                    });
                }
            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/^(v-on|@)/</span>.test(attr.name)) {
                <span class="keyword">const</span> parseResult = attr.name.match(<span class="regexp">/^(?:v-on:|@)?([a-zA-Z_$][a-zA-Z0-9_$]*)/</span>);
                <span class="keyword">if</span> (parseResult &amp;&amp; parseResult[<span class="number">1</span>]) {
                    addInstruct(attr.nodeValue.trim(), <span class="string">'on'</span>, {
                        $dom,
                        event: parseResult[<span class="number">1</span>]
                    });
                }
            }
        }
    }

    <span class="keyword">if</span> ($dom.childNodes) {
        <span class="keyword">for</span> (<span class="keyword">const</span> $child <span class="keyword">of</span> $dom.childNodes) {
            <span class="keyword">switch</span> ($child.nodeType) {
                <span class="comment">// ELEMENT_NODE</span>
                <span class="keyword">case</span> <span class="number">1</span>: {
                    handleInstruct($child, instructs);
                    <span class="keyword">break</span>;
                }
                <span class="comment">// TEXT_NODE</span>
                <span class="keyword">case</span> <span class="number">3</span>: {
                    <span class="keyword">const</span> parseResult = $child.data.match(<span class="regexp">/{{[ ]*([a-zA-Z_$][a-zA-Z0-9_$]*)[ ]*}}/g</span>);
                    <span class="keyword">if</span> (parseResult) {
                        parseResult.forEach(<span class="function"><span class="params">x</span> =&gt;</span> {
                            <span class="keyword">const</span> model = x.match(<span class="regexp">/[a-zA-Z_$][a-zA-Z0-9_$]*/</span>);
                            <span class="keyword">if</span> (model) {
                                addInstruct(model, <span class="string">'expression'</span>, {
                                    $dom: $child,
                                    exp: $child.data
                                });
                            }
                        });
                    }
                    <span class="keyword">break</span>;
                }
                <span class="keyword">default</span>:
                    <span class="keyword">break</span>;
            }
        }
    }

    <span class="keyword">return</span> instructs;
}

<span class="function"><span class="keyword">function</span> <span class="title">updateDom</span>(<span class="params">vm, instructs, model, shouldRegisterEvent = false</span>) </span>{
    <span class="comment">// 实现v-model的绑定</span>
    <span class="keyword">if</span> (instructs[model].model) {
        <span class="keyword">for</span> (<span class="keyword">const</span> $el <span class="keyword">of</span> instructs[model].model) {
            $el.value =  vm[model];
            <span class="keyword">if</span> (shouldRegisterEvent) {
                $el.oninput = <span class="function"><span class="params">()</span> =&gt;</span> {
                    <span class="keyword">this</span>[model] = $el.value;
                };
            }
        }
    }
    <span class="comment">// 实现{{}}的绑定</span>
    <span class="keyword">if</span> (instructs[model].expression) {
        <span class="keyword">for</span> (<span class="keyword">let</span> { $dom, exp } <span class="keyword">of</span> instructs[model].expression) {
            <span class="keyword">const</span> parseResult = exp.match(<span class="regexp">/{{[ ]*([a-zA-Z_$][a-zA-Z0-9_$]*)[ ]*}}/g</span>);
            <span class="keyword">if</span> (parseResult) {
                parseResult.forEach(<span class="function"><span class="params">x</span> =&gt;</span> {
                    <span class="keyword">const</span> m = x.match(<span class="regexp">/[a-zA-Z_$][a-zA-Z0-9_$]*/</span>);
                    <span class="keyword">if</span> (m) {
                        exp = exp.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`{{[ ]*${m[0]}[ ]*}}`</span>), vm[m[<span class="number">0</span>]]);
                    }
                });
            }
            $dom.textContent = exp;
        }
    }
    <span class="comment">// 实现v-bind的绑定</span>
    <span class="keyword">if</span> (instructs[model].bind) {
        <span class="keyword">for</span> (<span class="keyword">const</span> {$dom, attr} <span class="keyword">of</span> instructs[model].bind) {
            $dom.setAttribute(attr, vm[model]);
        }
    }
}

<span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params">params</span>) </span>{
    <span class="keyword">const</span> $dom = <span class="built_in">document</span>.querySelector(params.el);
    <span class="keyword">if</span> (!$dom) {
        <span class="built_in">console</span>.error(<span class="string">`dom "<span class="subst">${params.el}</span>" not exist`</span>);
        <span class="keyword">return</span>;
    }

    <span class="keyword">const</span> vm = {};
    <span class="keyword">const</span> instructs = handleInstruct($dom);
    <span class="comment">// console.log(instructs);</span>

    <span class="keyword">for</span> (<span class="keyword">const</span> model <span class="keyword">in</span> instructs) {
        <span class="keyword">if</span> (model &amp;&amp; params.data &amp;&amp; <span class="built_in">Object</span>.prototype.hasOwnProperty.call(params.data, model)) {
            vm[model] = params.data[model];
            <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, model, {
                get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
                    <span class="keyword">return</span> vm[model];
                },
                set: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>{
                    vm[model] = newValue;
                    updateDom(vm, instructs, model);
                }
            });
            updateDom.call(<span class="keyword">this</span>, vm, instructs, model, <span class="literal">true</span>);
        }
        <span class="comment">// 实现v-on的绑定</span>
        <span class="keyword">if</span> (instructs[model].on) {
            <span class="keyword">for</span> (<span class="keyword">const</span> { $dom, event } <span class="keyword">of</span> instructs[model].on) {
                $dom.addEventListener(event, params.methods[model].bind(<span class="keyword">this</span>));
            }
        }
    }
}

<span class="built_in">window</span>.Vue = Vue;
</code></pre>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[小记-iweb峰会]]></title>
      <url>/2017/08/12/2017-08-11-%E5%B0%8F%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1581250268,3885048217&amp;fm=173&amp;s=0947AB42C3E4BCEC264DC41301008093&amp;w=640&amp;h=401&amp;img.JPEG" alt="title"><br>看到了好多大佬,而且很幸运的中奖了,一个金三角的耳机~<br><a id="more"></a><br>今天早上起来的时候下着雨,本来以为不会有那么多人了,可是到的时候会议室真的是坐满了人;<br>上午将的都是h5游戏的发展,自从2014年7月22日起，’围住神经猫’这款小游戏在微信朋友圈疯传开来之后,h5小游戏就开始非常火,看来js还是很强大的.</p>
]]></content>
      
        <categories>
            
            <category> life </category>
            
        </categories>
        
        
        <tags>
            
            <tag> life </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[for in vs for of]]></title>
      <url>/2017/07/03/2017-07-03-for-in-vs-for-of/</url>
      <content type="html"><![CDATA[<p><img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1652442167,4081781189&amp;fm=173&amp;s=67CAF30748133CC46E9D988C0300F083&amp;w=630&amp;h=379&amp;img.JPEG" alt="title"><br><a id="more"></a></p>
<h3 id="for-in-和-for-of-的区别"><a href="#for-in-和-for-of-的区别" class="headerlink" title="for in 和 for of 的区别"></a>for in 和 for of 的区别</h3><ul>
<li><p>for in 更适合遍历对象，不要使用for in 遍历数组</p>
</li>
<li><p>for in 遍历的是数组的索引(即键名)，而for of 遍历的是数组元素值</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.methods = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> myObject = &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">    c: <span class="number">3</span>,</div><div class="line">&#125;;</div><div class="line">使用<span class="keyword">for</span> <span class="keyword">in</span> 遍历对象的键名</div><div class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</div><div class="line">   <span class="built_in">console</span>.log(key);</div><div class="line"> &#125;</div><div class="line"> a</div><div class="line"> b</div><div class="line"> c</div><div class="line"> methods</div><div class="line"><span class="keyword">for</span> <span class="keyword">in</span> 可以遍历到myObject的原型方法methods，如果不想遍历原型方法和属性的话.可以用hasOwnPropery方法可以判断某属性是否是该对象的实例属性</div><div class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</div><div class="line">     <span class="keyword">if</span>(myObject.hasOwnProperty(key))&#123;</div><div class="line">       <span class="built_in">console</span>.log(key);</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"> a</div><div class="line"> b</div><div class="line"> c</div><div class="line"></div><div class="line"> <span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(myObject));  [ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ]</div><div class="line"><span class="built_in">Object</span>.keys(myObject).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key, index</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(key, myObject[key]);</div><div class="line">&#125;)</div><div class="line"> a <span class="number">1</span></div><div class="line"> b <span class="number">2</span></div><div class="line"> c <span class="number">3</span></div><div class="line"> 同样可以通过ES5的<span class="built_in">Object</span>.keys(myObject)获取对象的实例属性组成的数组，不包括原型方法和属性。</div></pre></td></tr></table></figure>
<ul>
<li>for of 用来遍历数组的值</li>
</ul>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[vue中scroll的用法]]></title>
      <url>/2017/06/23/2017-06-23-vue-scroll/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1541368-d9be1b3b39abc037?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br><a id="more"></a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">data () &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    scrolled: <span class="literal">false</span></div><div class="line">  &#125;;</div><div class="line">&#125;,</div><div class="line">methods: &#123;</div><div class="line">  handleScroll () &#123;</div><div class="line">    <span class="keyword">this</span>.scrolled = <span class="built_in">window</span>.scrollY &gt; <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">&#125;,</div><div class="line">created () &#123;</div><div class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.handleScroll);</div><div class="line">&#125;,</div><div class="line">destroyed () &#123;</div><div class="line">  <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.handleScroll);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[函数式编程之尾调用]]></title>
      <url>/2017/06/01/2017-06-01-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%B0%BE%E8%B0%83%E7%94%A8/</url>
      <content type="html"><![CDATA[<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017022201.jpg" alt="title"><br><a id="more"></a></p>
<h2 id="尾调用，就是在函数的最后一步调用另一个函数"><a href="#尾调用，就是在函数的最后一步调用另一个函数" class="headerlink" title="尾调用，就是在函数的最后一步调用另一个函数"></a>尾调用，就是在函数的最后一步调用另一个函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> g(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>尾调用不一定出现在函数尾部，只要是最后一步操作就行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> m(x)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> n(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>函数m和n都属于尾调用，他们都是函数的最后一步操作</p>
<h2 id="尾调用优化"><a href="#尾调用优化" class="headerlink" title="尾调用优化"></a>尾调用优化</h2><p>函数调用会在内存形成一个’调用记录‘，保存调用位置和内部变量等信息，如果在A函数中调用B函数，在A函数的调用记录上还会形成一个B的调用记录，等到B函数运行结束后，把结果返回到A，B的调用记录才会消失。如果函数B内部还调用C函数，那就是还有一个C的调用记录栈，以此类推，所有的调用记录，就会形成一个’调用栈‘。</p>
<p>尾调用在于它特殊的调用位置。由于是函数最后一步操作，所以不需要保留外层函数的调用记录，因为调用位置和内部变量都不会再用到了。</p>
<p>’尾调用优化‘，只调用内层函数的调用记录。如果所有函数都是尾调用，那么完全可以做到每次执行时，调用记录只有一项，这将大大节省内存。</p>
]]></content>
      
        <categories>
            
            <category> javascript </category>
            
        </categories>
        
        
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[react-redux]]></title>
      <url>/2017/05/24/2017-05-24-react-redux/</url>
      <content type="html"><![CDATA[<p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016092101.jpg" alt="title"><br><a id="more"></a></p>
<h2 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h2><p>redux的三个概念: action reducer store</p>
<ul>
<li>action: 一个包含type的object, 通常把一个返回action对象的函数称为action函数, 直接简称为action</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">action</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        type: <span class="string">'Action1'</span>,</div><div class="line">        data,</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>reducer: 一个根据action type来更新数据的函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = &#123; data: <span class="number">1</span> &#125;, action</span>) </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'action1'</span>: &#123;</div><div class="line">            <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state));</div><div class="line">            <span class="keyword">return</span> newState;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">case</span> <span class="string">'action2'</span>: &#123;</div><div class="line">             <span class="keyword">const</span> newState = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(state));</div><div class="line">             <span class="keyword">return</span> newState;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">default</span>: &#123;</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>store: 使用createStore从reducer函数创建的数据对象, 包含getState和dispatch方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">let</span> store = createStore(reducer);</div><div class="line"><span class="built_in">console</span>.log(store.getState())</div><div class="line"></div><div class="line">store.dispatch(action(<span class="number">0</span>))</div><div class="line"><span class="built_in">console</span>.log(store.getState())</div></pre></td></tr></table></figure>
<p><em>注意! 更新数据需要dispatch对应的action</em></p>
<h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p>用于将redux于react结合</p>
<ul>
<li>Provider: 顶层组件, 注入store对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"></div><div class="line">ReactDom.render(</div><div class="line">    &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">        &lt;App /&gt;</div><div class="line">    &lt;<span class="regexp">/Provider&gt;,</span></div><div class="line"><span class="regexp">    document.getElementById('app'),</span></div><div class="line"><span class="regexp">);</span></div></pre></td></tr></table></figure>
<ul>
<li>connect: 工具函数, 参数一为函数, 该函数接收state, 返回一个对象, 对象包含一系列数据. 参数二为函数, 该函数接收dispatch, 返回一个对象, 对象包含一系列方法<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;  </div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    componentDidMount() &#123;</div><div class="line">        <span class="keyword">this</span>.props.dispatch(&#123;</div><div class="line">            type: <span class="string">'action1'</span>,</div><div class="line">            data: <span class="number">1</span>,</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    render() &#123;</div><div class="line">        <span class="comment">// this.props.func1();</span></div><div class="line">        <span class="comment">// this.props.func2();</span></div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div&gt;</div><div class="line">            &lt;<span class="regexp">/div &gt;</span></div><div class="line"><span class="regexp">        );</span></div><div class="line"><span class="regexp">    &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">export default connect(</span></div><div class="line"><span class="regexp">    state =&gt; (&#123;</span></div><div class="line"><span class="regexp">        data: state.data,</span></div><div class="line"><span class="regexp">        obj: state.obj,</span></div><div class="line"><span class="regexp">    &#125;),</span></div><div class="line"><span class="regexp">    dispatch =&gt; (&#123; dispatch &#125;),</span></div><div class="line"><span class="regexp">)(App);</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="immutable-js"><a href="#immutable-js" class="headerlink" title="immutable.js"></a>immutable.js</h2><p>特殊的object(MAP)/array(LIST)</p>
<ul>
<li>更新数据: set setIn update updateIn</li>
<li>读取数据: get getIn</li>
<li>可以直接比较(深层比较)</li>
<li>创建(fromJS), 还原(toJS)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">上述的reducer可以用下面的代码优化</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = immutable.fromJS(&#123; data: <span class="number">1</span>, obj: &#123; aa: <span class="number">1</span> &#125; &#125;</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'action1'</span>: &#123;</div><div class="line">            <span class="keyword">return</span> state.set(<span class="string">'data'</span>, action.data * <span class="number">10</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">case</span> <span class="string">'action2'</span>: &#123;</div><div class="line">            <span class="keyword">return</span> state.setIn([<span class="string">'obj'</span>, <span class="string">'aa'</span>], action.data);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">default</span>: &#123;</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>无需深复制, 更新数据自动返回一个新对象</li>
<li>适合与react shouldComponentUpdate结合来优化性能</li>
</ul>
<h2 id="pure-render-decorator"><a href="#pure-render-decorator" class="headerlink" title="pure-render-decorator"></a>pure-render-decorator</h2><p>自动创建shouldComponentUpdate的工具, 需要配置babel decorator特性才能使用</p>
]]></content>
      
        <categories>
            
            <category> react </category>
            
        </categories>
        
        
        <tags>
            
            <tag> redux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[vue全家桶+crawler+koa2 实现阴阳师小助手]]></title>
      <url>/2017/05/20/2017-5-20-vue%E5%85%A8%E5%AE%B6%E6%A1%B6-crawler-koa2-%E5%AE%9E%E7%8E%B0%E9%98%B4%E9%98%B3%E5%B8%88%E5%B0%8F%E5%8A%A9%E6%89%8B/</url>
      <content type="html"><![CDATA[<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1502713315793&amp;di=f4c278533dc65215060e4dd216b01a20&amp;imgtype=0&amp;src=http%3A%2F%2Fupload.chinaz.com%2F2016%2F0928%2F6361065295044373028726125.png" alt="title"><br>最近一直在玩阴阳师，看了好多小助手，觉得太复杂了，还得登录什么的，想着自己写一个简单的小助手，只要输入要搜索的式神，我想知道的关于这个式神的数据就能显示出来。<br>只是第一版，前端用vue全家桶实现的，很适合刚开始接触vue的，后端用node实现的，如果有更好的建议或者想一起合作写个更好用点的，欢迎联系 <a href="https://github.com/funnycoderstar/yys-fe" target="_blank" rel="external">作者</a>。<br><a id="more"></a></p>
<h1 id="yys-fe-阴阳师小助手前端"><a href="#yys-fe-阴阳师小助手前端" class="headerlink" title="yys-fe(阴阳师小助手前端)"></a>yys-fe(阴阳师小助手前端)</h1><blockquote>
<p>A Vue.js project</p>
</blockquote>
<h3 id="github"><a href="#github" class="headerlink" title="github"></a><a href="https://github.com/funnycoderstar/yys-fe" target="_blank" rel="external">github</a></h3><h3 id="项目链接"><a href="#项目链接" class="headerlink" title="项目链接"></a><a href="http://yys.wangyaxing.top/#/" target="_blank" rel="external">项目链接</a></h3><p><img src="http://upload-images.jianshu.io/upload_images/3297464-bcc37825a913c8ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="阴阳师小助手后端实现"><a href="#阴阳师小助手后端实现" class="headerlink" title="阴阳师小助手后端实现"></a><a href="https://github.com/funnycoderstar/yys-be" target="_blank" rel="external">阴阳师小助手后端实现</a></h3><ul>
<li>nodejs + crawler + koa2 + mongoose</li>
</ul>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://upload-images.jianshu.io/upload_images/3297464-7c42da95d346c282.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="search.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/3297464-3e76f027626a4124.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="searchResult.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/3297464-c776e7602061a23a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="heroList.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/3297464-c266c0669e263d00.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="heroTab.png"></p>
<h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><pre><code>- 构建工具：webpack；
- 语言：Es6；
- 代码规范：eslint
- 应用：vue，
     vuex（数据管理架构），
     vue-router（路由），
     mint-ui（ul组件），
     vue-axios（vue做的ajax请求）
</code></pre><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">|-- [build]                          //构建服务和webpack配置</div><div class="line">|-- [config]                        //项目不同环境的配置</div><div class="line">|-- [dist]                            //文件服务器根目录  </div><div class="line">|-- [node_modules]          //项目依赖</div><div class="line">|-- [src]                             //源码</div><div class="line">|   |-- [assets]                    //资源文件</div><div class="line">|   |-- [components]           //项目模块文件夹</div><div class="line">|   |-- [store]                      //存储数据</div><div class="line">|   |       |-- index.js            //vuex store 定义</div><div class="line">|   |-- App.vue                   //主页面   </div><div class="line">|   |-- main.js                     //webpack预编译入口</div><div class="line">|   |-- [router]                     //全局路由定义</div><div class="line">|-- .babelrc                       //babel配置</div><div class="line">|-- .eslintrc.js                    //eslint rule 定义</div><div class="line">|-- index.html                    //项目入口文件</div><div class="line">|-- package.json               //项目配置文件</div><div class="line">|-- README.md               //关于启动项目的命令和含义</div></pre></td></tr></table></figure>
<h2 id="已经完成的模块"><a href="#已经完成的模块" class="headerlink" title="已经完成的模块"></a>已经完成的模块</h2><ul>
<li style="list-style: none"><input type="checkbox" checked> 式神搜索页面(支持模糊搜索)</li>
<li style="list-style: none"><input type="checkbox" checked> 式神搜索结果页面</li>
<li style="list-style: none"><input type="checkbox" checked> 式神列表页面</li>
<li style="list-style: none"><input type="checkbox" checked> 式神详细信息页面</li>
<li>[X] 推荐御魂</li>
<li>[X] 推荐搭配</li>
<li>[X] 式神点评</li>
</ul>
<h2 id="待完成与优化"><a href="#待完成与优化" class="headerlink" title="待完成与优化"></a>待完成与优化</h2><ul>
<li style="list-style: none"><input type="checkbox"> 搜索功能添加历史搜索和热门搜索</li>
<li style="list-style: none"><input type="checkbox"> 式神攻略</li>
<li style="list-style: none"><input type="checkbox"> 式神视频</li>
<li style="list-style: none"><input type="checkbox"> 页面样式的优化</li>
</ul>
<h2 id="Build-Setup"><a href="#Build-Setup" class="headerlink" title="Build Setup"></a>Build Setup</h2><p>``` bash</p>
<h1 id="install-dependencies"><a href="#install-dependencies" class="headerlink" title="install dependencies"></a>install dependencies</h1><p>npm install</p>
<h1 id="serve-with-hot-reload-at-localhost-8080"><a href="#serve-with-hot-reload-at-localhost-8080" class="headerlink" title="serve with hot reload at localhost:8080"></a>serve with hot reload at localhost:8080</h1><p>npm run dev</p>
<h1 id="build-for-production-with-minification"><a href="#build-for-production-with-minification" class="headerlink" title="build for production with minification"></a>build for production with minification</h1><p>npm run build</p>
<p>关于用vue时遇到的坑，记录在我的<a href="https://github.com/funnycoderstar/blog/issues?utf8=%E2%9C%93&amp;q=vue" target="_blank" rel="external">博客</a>,希望可以对大家有用<br>目前小编在学react，所以用<a href="https://github.com/funnycoderstar/yys_v2" target="_blank" rel="external">react也写了一版</a>,所以刚开始接触react的童鞋也可以看一下，想着第二版的ui设计的好看一点儿，功能再多一点儿，期待更多的建议。</p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p><a href="http://wangyaxing.deercv.com/" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="https://github.com/funnycoderstar/blog" target="_blank" rel="external">blog</a></p>
]]></content>
      
        <categories>
            
            <category> vue </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[排序算法]]></title>
      <url>/2017/05/03/2017-05-03-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<p><img src="http://www.runoob.com/wp-content/uploads/2015/09/1240" alt="title"><br>所谓排序，就是使一串记录，按照其中的某个或某些关键字的大小，递增或递减的排列起来的操作。排序算法，就是如何使得记录按照要求排列的方法。排序算法在很多领域得到相当地重视，尤其是在大量数据的处理方面。<br><a id="more"></a></p>
<h3 id="排序算法"><a href="#排序算法" class="headerlink" title="排序算法"></a>排序算法</h3><ul>
<li>冒泡算法</li>
<li>比较相邻的元素。如果第一个比第二个大，就交换他们两个。</li>
<li>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。</li>
<li>针对所有的元素重复以上的步骤，除了最后一个。</li>
<li><p>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</div><div class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j+<span class="number">1</span>]) &#123;        <span class="comment">//相邻元素两两对比</span></div><div class="line">                <span class="keyword">var</span> temp = arr[j+<span class="number">1</span>];        <span class="comment">//元素交换</span></div><div class="line">                arr[j+<span class="number">1</span>] = arr[j];</div><div class="line">                arr[j] = temp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(bubbleSort([<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>,<span class="number">3</span>]));</div></pre></td></tr></table></figure>
</li>
<li><p>快速排序,通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> leftArr = [];</div><div class="line">    <span class="keyword">let</span> rightArr = [];</div><div class="line">    <span class="keyword">let</span> q = arr[<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i&lt;arr.length;i++) &#123;</div><div class="line">        <span class="keyword">if</span>(arr[i] &gt; q) &#123;</div><div class="line">            rightArr.push(arr[i]);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            leftArr.push(arr[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> [].concat(quickSort(leftArr),[q],quickSort(rightArr));</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(quickSort([<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>,<span class="number">3</span>]));</div></pre></td></tr></table></figure></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 算法 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[前端拿高薪必看面试题]]></title>
      <url>/2017/05/02/2017-05-02-js%E7%BB%8F%E5%85%B8%E7%AC%94%E8%AF%95%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/2098593-15e01329776ddf2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="title"><br>面试之前都会从网上找很多面试题来看,尤其是看到经典面试题,及必会的面试题,都是好好的看上几遍(其实更多的时候都是在背),可是总感觉面试之前看题作用并不大,因为你不理解的问题,还是会不理解,面试管随便一问,就不行了.其实面试几次后就会发现,经常问的问题也就那几个,比如,闭包,原型链,this,等.刚开始的时候真的是理解不了,然后就看书,强烈推荐<code>《javascript高级程序设计(第三版)》</code>以及<code>《你不知道的javascript系列》</code>,在实际项目中遇到坑的时候,就反复看,看的时候很难受,但是当真正理解了之后,就会恍然大悟,所以功夫还是下在平时,临时抱佛脚真的没啥用~</p>
<blockquote>
<p>以下是我总结的面试题中常问到的,很多都是<code>我亲身经历的面试</code>中遇到的一些问题,刚开始遇到的时候也不是太清楚,面试完之后就深入的学习了一下相关的知识😜</p>
</blockquote>
<a id="more"></a>
<h3 id="1-考察this"><a href="#1-考察this" class="headerlink" title="1,考察this"></a>1,考察this</h3> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> length = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  length: <span class="number">5</span>,</div><div class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    fn();</div><div class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>]();</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.method(fn, <span class="number">1</span>);</div></pre></td></tr></table></figure>
<ul>
<li>10 ，2</li>
<li>第一次输出10应该没有问题。我们知道取对象属于除了点操作符还可以用中括号，所以第二次执行时相当于arguments调用方法，this指向arguments，而这里传了两个参数，故输出arguments长度为2。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> length = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  length: <span class="number">5</span>,</div><div class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    fn();</div><div class="line">    <span class="keyword">const</span> fun = <span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">    fun()；</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.method(fn, <span class="number">1</span>);</div></pre></td></tr></table></figure>
<ul>
<li>10 10<h3 id="2-var和函数的提前声明"><a href="#2-var和函数的提前声明" class="headerlink" title="2,var和函数的提前声明"></a>2,var和函数的提前声明</h3></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a); </div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  <span class="built_in">console</span>.log(a); </div><div class="line">&#125;</div><div class="line"></div><div class="line">fn(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<ul>
<li>function a() {} </li>
<li>2</li>
<li>var和function是会提前声明的.而且function是优先于var声明的(如果同时存在的话),所以刚开始输出的就是一个funciton,接着往下执行a进行重新赋值了,故第二次输出的是2；</li>
</ul>
<h3 id="3，局部变量和全局变量"><a href="#3，局部变量和全局变量" class="headerlink" title="3，局部变量和全局变量"></a>3，局部变量和全局变量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="literal">true</span>;</div><div class="line"><span class="keyword">if</span> (f === <span class="literal">true</span>) &#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> b = <span class="number">20</span>;</div><div class="line">  c = <span class="number">30</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fn();</div><div class="line"><span class="built_in">console</span>.log(a);</div><div class="line"><span class="built_in">console</span>.log(b);</div><div class="line"><span class="built_in">console</span>.log(c);</div></pre></td></tr></table></figure>
<ul>
<li>输出 10 报错 30</li>
<li>这是个我犯了很久的错误，很长一段时间我都以为{…}内的新声明的变量是局部变量，后来我才发现function内的新声明的变量才是局部变量，而没有用var声明的变量在哪里都是全局变量。再次提醒切记只有function(){}内新声明的才能是局部变量，while{…}、if{…}、for(..) 之内的都是全局变量（除非本身包含在function内）。</li>
</ul>
<h3 id="4，变量隐式声明"><a href="#4，变量隐式声明" class="headerlink" title="4，变量隐式声明"></a>4，变量隐式声明</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>( <span class="string">'a'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</div><div class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a);</div></pre></td></tr></table></figure>
<ul>
<li>10</li>
<li>funciton和var会提前声明,而其实{…}内的变量也会提前声明，于是代码还没执行前a已经被声明了。所以 ‘a’ in window会返回true,a被赋值</li>
</ul>
<h3 id="5，给基本类型数据添加属性，不报错，但取值时是undefined"><a href="#5，给基本类型数据添加属性，不报错，但取值时是undefined" class="headerlink" title="5，给基本类型数据添加属性，不报错，但取值时是undefined"></a>5，给基本类型数据添加属性，不报错，但取值时是undefined</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">a.pro = <span class="number">10</span>;</div><div class="line"><span class="built_in">console</span>.log(a.pro + a);</div><div class="line"></div><div class="line"><span class="keyword">var</span> s = <span class="string">'hello'</span>;</div><div class="line">s.pro = <span class="string">'world'</span>;</div><div class="line"><span class="built_in">console</span>.log(s.pro + s);</div></pre></td></tr></table></figure>
<ul>
<li>NaN undefinedhello</li>
<li>给基本类型数据加属性不报错，但是引用的话返回undefined,10+undefined返回NaN,而undefined和string相加时转变成了字符串</li>
</ul>
<h4 id="6，函数声明优先于变量声明"><a href="#6，函数声明优先于变量声明" class="headerlink" title="6，函数声明优先于变量声明"></a>6，函数声明优先于变量声明</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="keyword">var</span> fn;</div></pre></td></tr></table></figure>
<ul>
<li>function</li>
<li>因为函数声明优于变量声明。我们知道在代码逐行执行前，函数声明和变量声明会提前进行，而函数声明又会优于变量声明，这里的优于可以理解为晚于变量声明后，如果函数名和变量名相同，函数声明就能覆盖变量声明。所以以上代码将函数声明和变量声明调换顺序还是一样结果。</li>
</ul>
<h4 id="7-判断一个字符串中出现次数最多的字符，并统计次数"><a href="#7-判断一个字符串中出现次数最多的字符，并统计次数" class="headerlink" title="7,判断一个字符串中出现次数最多的字符，并统计次数"></a>7,判断一个字符串中出现次数最多的字符，并统计次数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="string">'aaabbbcccaaabbbaaa'</span>;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> letter;</div><div class="line"><span class="keyword">var</span> maxn = <span class="number">-1</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; s.length; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(obj[s[i]]) &#123;</div><div class="line">            obj[s[i]] ++;</div><div class="line">            <span class="keyword">if</span>(obj[s[i]] &gt; maxn) &#123;</div><div class="line">                maxn = obj[s[i]];</div><div class="line">                letter = s[i];</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            obj[s[i]] = <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(obj[s[i]] &gt; maxn) &#123;</div><div class="line">                maxn = obj[s[i]];</div><div class="line">                letter = s[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;letter&#125;</span>:<span class="subst">$&#123;maxn&#125;</span>`</span>);</div></pre></td></tr></table></figure>
<ul>
<li>正则<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="string">'aaabbbcccaaabbbaaa'</span>;</div><div class="line"><span class="keyword">var</span> a = s.split(<span class="string">''</span>);</div><div class="line">a.sort();</div><div class="line">s = a.join(<span class="string">''</span>);</div><div class="line"><span class="keyword">var</span> pattern = <span class="regexp">/(\w)\1*/g</span>;</div><div class="line"><span class="keyword">var</span> ans = s.match(pattern);</div><div class="line">ans.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.length &lt; b.length;</div><div class="line">&#125;)</div><div class="line"><span class="built_in">console</span>.log(ans[<span class="number">0</span>][<span class="number">0</span>] + <span class="string">':'</span> + ans[<span class="number">0</span>].length);</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="8，-经典闭包"><a href="#8，-经典闭包" class="headerlink" title="8， 经典闭包"></a>8， <a href="https://juejin.im/post/58f558efac502e006c3e5c97" target="_blank" rel="external">经典闭包</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;!--html--&gt;</div><div class="line">&lt;ul&gt;</div><div class="line">    &lt;li&gt;这是第<span class="number">1</span>个&lt;<span class="regexp">/li&gt;</span></div><div class="line"><span class="regexp">    &lt;li&gt;这是第2个&lt;/</span>li&gt;</div><div class="line">    &lt;li&gt;这是第<span class="number">3</span>个&lt;<span class="regexp">/li&gt;</span></div><div class="line"><span class="regexp">    &lt;li&gt;这是第4个&lt;/</span>li&gt;</div><div class="line">&lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">&lt;!--js--&gt;</span></div><div class="line"><span class="regexp">一：</span></div><div class="line"><span class="regexp">for(var i = 0; i &lt; lis.length; i++) &#123;</span></div><div class="line"><span class="regexp">    lis[i].index = i;</span></div><div class="line"><span class="regexp">    lis[i].onclick = function() &#123;</span></div><div class="line"><span class="regexp">      alert(this.index);</span></div><div class="line"><span class="regexp">    &#125;;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp">二:</span></div><div class="line"><span class="regexp">for(var i = 0; i &lt; lis.length; i++) &#123;</span></div><div class="line"><span class="regexp">    (function(i) &#123;</span></div><div class="line"><span class="regexp">      lis[i].onclick = function() &#123;</span></div><div class="line"><span class="regexp">        alert(i);</span></div><div class="line"><span class="regexp">      &#125;;</span></div><div class="line"><span class="regexp">    &#125;)(i); </span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp">三：</span></div><div class="line"><span class="regexp">for(let i = 0; i &lt; lis.length; i++) &#123;</span></div><div class="line"><span class="regexp">    lis[i].onclick = function() &#123;</span></div><div class="line"><span class="regexp">    alert(i);</span></div><div class="line"><span class="regexp">    &#125;;</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<ul>
<li>从0开始隔10s按顺序出现’第一次出现’,’第二次出现’,’第三次出现‘<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> datas = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>];</div><div class="line"><span class="keyword">let</span> timer = <span class="literal">null</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</div><div class="line">    <span class="comment">//    const index = i;</span></div><div class="line">    <span class="keyword">if</span> (timer) &#123;</div><div class="line">        clearTimeout(timer);</div><div class="line">        <span class="keyword">let</span> timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(datas[i]);</div><div class="line">        &#125;, <span class="number">10000</span> * i)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">let</span> timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(datas[i]);</div><div class="line">        &#125;, <span class="number">10000</span> * i)</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="9，请编写一个JavaScript函数-parseQueryString，它的用途是把URL参数解析为一个对象，如：-var-url-“http-witmax-cn-index-php-key0-0-amp-key1-1-amp-key2-2″"><a href="#9，请编写一个JavaScript函数-parseQueryString，它的用途是把URL参数解析为一个对象，如：-var-url-“http-witmax-cn-index-php-key0-0-amp-key1-1-amp-key2-2″" class="headerlink" title="9，请编写一个JavaScript函数 parseQueryString，它的用途是把URL参数解析为一个对象，如： var url = “http://witmax.cn/index.php?key0=0&amp;key1=1&amp;key2=2″"></a>9，请编写一个JavaScript函数 parseQueryString，它的用途是把URL参数解析为一个对象，如： var url = “<a href="http://witmax.cn/index.php?key0=0&amp;key1=1&amp;key2=2″" target="_blank" rel="external">http://witmax.cn/index.php?key0=0&amp;key1=1&amp;key2=2″</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQueryString</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> a = url.split(<span class="string">'?'</span>);</div><div class="line">  <span class="keyword">if</span>(a.length === <span class="number">1</span>) <span class="keyword">return</span> obj;</div><div class="line">  <span class="keyword">var</span> b = a[<span class="number">1</span>].split(<span class="string">'&amp;'</span>);</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, length = b.length; i &lt; length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> c = b[i].split(<span class="string">'='</span>);</div><div class="line">    obj[c[<span class="number">0</span>]] = c[<span class="number">1</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> obj;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> url = <span class="string">'http://witmax.cn/index.php?key0=0&amp;key1=1&amp;key2=2'</span>;</div><div class="line"><span class="keyword">var</span> obj = parseQueryString(url);</div><div class="line"><span class="built_in">console</span>.log(obj.key0, obj.key1, obj.key2);  <span class="comment">// 0 1 2</span></div></pre></td></tr></table></figure>
<h4 id="10-this"><a href="#10-this" class="headerlink" title="10,this"></a>10,this</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> baz=<span class="number">3</span>;</div><div class="line"><span class="keyword">var</span> bazz=&#123;</div><div class="line">   baz: <span class="number">2</span>,</div><div class="line">   getbaz: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">         <span class="keyword">return</span> <span class="keyword">this</span>.baz</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(bazz.getbaz())</div><div class="line"><span class="keyword">var</span> g=bazz.getbaz;</div><div class="line"><span class="built_in">console</span>.log(g());</div><div class="line">第一个输出<span class="number">2</span>，第二个输出<span class="number">3</span>,函数作为对象本身属性调用的时候<span class="keyword">this</span>指向对象，作为普通函数调用的时候就指向全局了</div></pre></td></tr></table></figure>
<h4 id="11，数组方法"><a href="#11，数组方法" class="headerlink" title="11，数组方法"></a>11，数组方法</h4><ul>
<li>数组排序:写一个js函数,将数组对象按照一定的顺序进行排序，且可通过参数决定升降序</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = [</div><div class="line">    &#123;</div><div class="line">        <span class="string">"name"</span>: <span class="string">"first"</span>,</div><div class="line">        <span class="string">"index"</span>: <span class="number">1</span>,</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"name"</span>: <span class="string">"second"</span>,</div><div class="line">        <span class="string">"index"</span>: <span class="number">2</span>,</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"name"</span>: <span class="string">"third"</span>,</div><div class="line">        <span class="string">"index"</span>: <span class="number">3</span>,</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">"name"</span>: <span class="string">"fourth"</span>,</div><div class="line">        <span class="string">"index"</span>: <span class="number">4</span>,</div><div class="line">    &#125;,</div><div class="line">]</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">property</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> a[property] - a[property];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(list.sort(compare(<span class="string">'index'</span>)))</div></pre></td></tr></table></figure>
<h4 id="12-求一个字符串的字节长度"><a href="#12-求一个字符串的字节长度" class="headerlink" title="12,求一个字符串的字节长度"></a>12,求一个字符串的字节长度</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetBytes</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> len = str.length;</div><div class="line">        <span class="keyword">var</span> bytes = len;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</div><div class="line">            <span class="keyword">if</span> (str.charCodeAt(i) &gt; <span class="number">255</span>) bytes++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> bytes;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">alert(GetBytes(<span class="string">"你好,as"</span>));</div><div class="line">str = <span class="string">'hello world'</span>;</div><div class="line"><span class="built_in">console</span>.log(str.charCodeAt(<span class="number">0</span>)); <span class="comment">// 104, 返回指定索引处字符的 Unicode 数值,大于255为中文</span></div><div class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">0</span>)); <span class="comment">// h, 返回指定位置的字符,</span></div></pre></td></tr></table></figure>
<h4 id="13-jsonp原理及过程"><a href="#13-jsonp原理及过程" class="headerlink" title="13 jsonp原理及过程"></a>13 jsonp原理及过程</h4><ul>
<li>利用<script>标签没有跨域限制的“漏洞”（历史遗迹啊）来达到与第三方通讯的目的。</li>
<li>当需要通讯时，本站脚本创建一个<script>元素，地址指向第三方的API网址，形如 <script src="http://www.example.net/api?param1=1&param2=2"></script></li>
<li>并提供一个回调函数来接收数据（函数名可约定，或通过地址参数传递）。</li>
<li>第三方产生的响应为json数据的包装（故称之为jsonp，即json padding），形如：callback({“name”:”hax”,”gender”:”Male”})这样浏览器会调用callback函数，并传递解析后json对象作为参数。本站脚本可在callback函数里处理所传入的数据。</li>
</ul>
<h4 id="14-link和-import区别"><a href="#14-link和-import区别" class="headerlink" title="14, link和@import区别"></a>14, link和@import区别</h4><ul>
<li>link属于html标签，而@import是css提供的。</li>
<li>页面被加载时，link会同时被加载，而@import引用的css会等到页面加载结束后加载。</li>
<li>link是html标签，因此没有兼容性，而@import只有IE5以上才能识别。</li>
<li>link方式样式的权重高于@import的</li>
</ul>
<h3 id="15-一个页面从输入url到页面加载显示完成-这个过程都发生了什么"><a href="#15-一个页面从输入url到页面加载显示完成-这个过程都发生了什么" class="headerlink" title="15,一个页面从输入url到页面加载显示完成,这个过程都发生了什么?"></a>15,一个页面从输入url到页面加载显示完成,这个过程都发生了什么?</h3><ul>
<li>1,浏览器开启一个线程来处理这个请求</li>
<li>2,查找浏览器缓存(浏览器缓存-系统缓存-路由器缓存)</li>
<li>3,DNS解析,查找该域名对应的IP地址,重定向(301),</li>
<li>4,向真实IP地址服务器发出tcp连接,tcp三次握手</li>
<li>5,握手成功后,进行http协议会话,浏览器发送报头</li>
<li>6,进入到web服务器上的 Web Server，如 Apache、Tomcat、Node.JS 等服务器;</li>
<li>7,进入部署好的后端应用，如 PHP、Java、JavaScript、Python 等，找到对应的请求处理;</li>
<li>8,处理结束回馈报头，将数据返回至浏览器;</li>
<li>9,浏览器开始下载html文档(响应报头，状态码200)，同时设置缓存;</li>
<li>10,之后浏览器对整个 HTML 结构进行解析，形成 DOM 树；与此同时，它还需要对相应的 CSS 文件进行解析，形成 CSS 树（CSSOM）。</li>
<li>11,得到绘制树之后，需要计算每个结点在页面中的位置，这一个过程称为layout </li>
</ul>
<p>浏览器这边做的工作大致分为以下几步：<br>加载：根据请求的URL进行域名解析，向服务器发起请求，接收文件（HTML、JS、CSS、图象等）。<br>解析：对加载到的资源（HTML、JS、CSS等）进行语法解析，建议相应的内部数据结构（比如HTML的DOM树，JS的（对象）属性表，CSS的样式规则等等）</p>
<h3 id="16-TCP传输的三次握手四次挥手策略"><a href="#16-TCP传输的三次握手四次挥手策略" class="headerlink" title="16,TCP传输的三次握手四次挥手策略"></a>16,TCP传输的三次握手四次挥手策略</h3><blockquote>
<p>三次握手 SYN和ACK</p>
</blockquote>
<p>发送端首先发送一个带SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。 最后，发送端再回传一个带ACK标志的数据包，代表“握手”结束。 若在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。</p>
<blockquote>
<p>四次挥手</p>
<ul>
<li>第一次挥手：主动关闭方发送一个FIN，用来关闭主动方到被动关闭方的数据传送，也就是主动关闭方告诉被动关闭方：我已经不 会再给你发数据了(当然，在fin包之前发送出去的数据，如果没有收到对应的ack确认报文，主动关闭方依然会重发这些数据)，但是，此时主动关闭方还可 以接受数据。</li>
<li>第二次挥手：被动关闭方收到FIN包后，发送一个ACK给对方，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号）。</li>
<li>第三次挥手：被动关闭方发送一个FIN，用来关闭被动关闭方到主动关闭方的数据传送，也就是告诉主动关闭方，我的数据也发送完了，不会再给你发数据了。</li>
<li>第四次挥手：主动关闭方收到FIN后，发送一个ACK给被动关闭方，确认序号为收到序号+1，至此，完成四次挥手。<h3 id="17-new操作符到底干了什么-深入了解"><a href="#17-new操作符到底干了什么-深入了解" class="headerlink" title="17, new操作符到底干了什么?深入了解"></a>17, new操作符到底干了什么?<a href="http://www.cnblogs.com/onepixel/p/5043523.html" target="_blank" rel="external">深入了解</a></h3></li>
<li>1,创建一个空对象,而且this变量引用该对象,同时还继承了该函数的原型.</li>
<li>2,属性和方法被加入到this引用的对象中,</li>
<li>3,新创建的对象由this所引用,而且最后隐式的返回this<h3 id="18-null和undefined的区别"><a href="#18-null和undefined的区别" class="headerlink" title="18, null和undefined的区别?"></a>18, null和undefined的区别?</h3></li>
</ul>
<p>undefined</p>
<ul>
<li>(1)变量被声明了,但是没有赋值,就等于undefined</li>
<li>(2)调用函数时,应该提供的参数没有提供,该参数等于undefined</li>
<li>(3)对象没有赋值的属性,该属性的值为undefined</li>
<li>(4)函数没有返回值时,默认返回undefined<br>null</li>
<li>(1)作为函数的参数,表示该函数的参数不是对象</li>
<li>(2)作为对象原型链的终点</li>
</ul>
</blockquote>
<h3 id="19-js的基本数据类型"><a href="#19-js的基本数据类型" class="headerlink" title="19, js的基本数据类型"></a>19, js的基本数据类型</h3><p>Number,String,Boolean,Null, Undefined,Object,Symbol</p>
<h3 id="20-DOM怎样添加-移除-复制-和创建节点"><a href="#20-DOM怎样添加-移除-复制-和创建节点" class="headerlink" title="20,DOM怎样添加,移除,复制,和创建节点"></a>20,DOM怎样添加,移除,复制,和创建节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建新节点</span></div><div class="line">createDocumentFragment(); <span class="comment">// 创建一个DOM片段</span></div><div class="line">createElement(); <span class="comment">// 创建一个具体的元素</span></div><div class="line">createTextNode(); <span class="comment">// 创建一个文本节点</span></div><div class="line"><span class="comment">//添加,移除,替换</span></div><div class="line">appendChild()</div><div class="line">removeChild()</div><div class="line">replaceChild()</div><div class="line">insertBefore() <span class="comment">// 在已有的子节点前插入一个新的子节点</span></div><div class="line"><span class="comment">// 查找</span></div><div class="line">getElementByTagName() <span class="comment">// 通过标签名称</span></div><div class="line">getElementByName() <span class="comment">// 通过元素的Name属性的值(IE容错能力较强，会得到一个数组，其中包括id等于name值的)</span></div><div class="line">getElementById() <span class="comment">// 通过元素ID,唯一性</span></div></pre></td></tr></table></figure>
<h4 id="参考总结"><a href="#参考总结" class="headerlink" title="参考总结"></a>参考总结</h4><p><a href="http://www.cnblogs.com/zichi/p/4359786.html" target="_blank" rel="external">这10道javaScript笔试题你都会么</a><br><a href="https://segmentfault.com/a/1190000007602848" target="_blank" rel="external">正则</a><br><a href="http://www.cnblogs.com/xxcanghai/p/5205998.html" target="_blank" rel="external">2016年十家公司面试小记</a><br><a href="http://www.alloyteam.com/2012/11/javascript-throttle/" target="_blank" rel="external">浅谈javascript的函数节流</a><br><a href="https://github.com/jayli/jayli.github.com/issues/19" target="_blank" rel="external">面试题1</a><br><a href="https://github.com/hawx1993/Front-end-Interview-questions" target="_blank" rel="external">面试题2</a><br><a href="https://github.com/h5bp/Front-end-Developer-Interview-Questions/tree/master/Translations/Chinese" target="_blank" rel="external">面试题3</a><br><a href="https://github.com/jawil/blog/issues/22" target="_blank" rel="external">html与css</a><br><a href="https://segmentfault.com/a/1190000010631325?_ea=2359607" target="_blank" rel="external">道阻且长啊TAT(前端面试总结),17年春招面试总结</a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p><a href="http://wangyaxing.deercv.com/" target="_blank" rel="external">aboutme</a><br><a href="https://github.com/funnycoderstar" target="_blank" rel="external">github</a><br><a href="http://wangyaxing.top/">blog</a></p>
]]></content>
      
        <categories>
            
            <category> interview </category>
            
        </categories>
        
        
        <tags>
            
            <tag> interview </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[关于斐波那契数列]]></title>
      <url>/2017/04/09/2017-04-09-%E5%85%B3%E4%BA%8E%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/</url>
      <content type="html"><![CDATA[<p><img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3463546863,3949490182&amp;fm=26&amp;gp=0.jpg" alt="title"></p>
<h1 id="用js实现斐波那契数列"><a href="#用js实现斐波那契数列" class="headerlink" title="用js实现斐波那契数列"></a>用js实现斐波那契数列</h1><p>首先介绍一下，斐波那契数列(Fibonacci sequence)又称黄金分割数列，斐波那契数列（Fibonacci sequence），又称黄金分割数列、因数学家列昂纳多·斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为“兔子数列”，指的是这样一个数列：1、1、2、3、5、8、13、21、34、……在数学上，斐波纳契数列以如下被以递归的方法定义：F(0)=1，F(1)=1, F(n)=F(n-1)+F(n-2)（n&gt;=2，n∈N*）在现代物理、准晶体结构、化学等领域，斐波纳契数列都有直接的应用，<br><a id="more"></a></p>
<ul>
<li><p>斐波那契数列指的是这样一个数列 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233，377，610，987，1597，2584，4181，6765，10946，17711，28657，46368……..</p>
</li>
<li><p>这个数列从第3项开始，每一项都等于前两项之和。</p>
<h2 id="实现方法一"><a href="#实现方法一" class="headerlink" title="实现方法一"></a>实现方法一</h2></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(n === <span class="number">0</span>) &#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125; <span class="keyword">else</span>  <span class="keyword">if</span>(n ===<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> fib(n<span class="number">-1</span>)+fib(n<span class="number">-2</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">以上的发法是能想到的最直观的实现，现在我们测试一下他的运行结果。</div><div class="line">fib(<span class="number">1</span>);</div><div class="line">fib(<span class="number">10</span>)</div><div class="line">fib(<span class="number">50</span>);</div><div class="line">运行发现n=<span class="number">1</span>时，会快速输出<span class="number">1</span>，n=<span class="number">10</span>,时，运行速度稍慢，但是当n=<span class="number">10</span>时，运行就非常慢，原因是什么呢，因为n=<span class="number">50</span>时，要进行差不多<span class="number">50</span>次的函数调用，每次调用，都会重新走<span class="keyword">if</span>的那三个判断条件，而且每次都是从最开始开始计算，当n越大时，性能越差，所以有没有更好的方法来实现它呢？</div></pre></td></tr></table></figure>
<h2 id="实现方法二"><a href="#实现方法二" class="headerlink" title="实现方法二"></a>实现方法二</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(n === <span class="number">0</span>) &#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125; <span class="keyword">else</span>  <span class="keyword">if</span>(n ===<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">let</span> a = <span class="number">0</span>, b = <span class="number">1</span>;</div><div class="line">        <span class="keyword">let</span> current = <span class="literal">null</span>;</div><div class="line">       <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</div><div class="line">           current = b + a;</div><div class="line">           a = b;</div><div class="line">           b = current;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> current;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">方法二与方法一不同之处在于，最后一个判断加入了一个<span class="keyword">for</span>循环，current = b + a;当前享等于前两项的和，a = b;把前一项的值赋给a(第前两项)，b = current;把当前值赋给前b(第前一项)，这样当n&gt;<span class="number">1</span>时，只需要在第三个判断走一个循环可以，而不需要一直调用函数，这样做比方法一性能上优化了很多，但是还有没有更好的方法呢?</div></pre></td></tr></table></figure>
<h2 id="实现方法三"><a href="#实现方法三" class="headerlink" title="实现方法三"></a>实现方法三</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> cache = &#123;</div><div class="line">    <span class="number">0</span>: <span class="number">0</span>,</div><div class="line">    <span class="number">1</span>: <span class="number">1</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> cache[n] === <span class="string">'number'</span></div><div class="line">           ? cache[n]</div><div class="line">           : cache[n] = fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</div><div class="line">&#125;</div><div class="line">该方法的实现利用了缓存，这样每次计算的时候，都会把计算出的值存放到cache这个缓存中，等下次传入较大的n时，如果缓存中有需要的值，则直接用缓存中的值，这种方法大大提高了函数的性能。</div><div class="line">还存在一个问题,fib(<span class="number">10000</span>) = <span class="literal">Infinity</span>;这有是为什么呢，</div><div class="line">我们可以从js中数值的取值范围考虑，如何知道js中数值的范围呢，</div><div class="line"> <span class="built_in">console</span>.log(<span class="built_in">Number</span>.MAX_VALUE, <span class="built_in">Number</span>.MIN_VALUE); <span class="comment">//取得最大和最小的数</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.MAX_SAFE_INTEGER, <span class="built_in">Number</span>.MIN_SAFE_INTEGER);取得最大和最小的整数</div><div class="line"><span class="number">1.7976931348623157e+308</span> <span class="number">5e-324</span></div><div class="line"><span class="number">9007199254740991</span> <span class="number">-9007199254740991</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(fib(<span class="number">400</span>));</div><div class="line"><span class="built_in">console</span>.log(fib(<span class="number">500</span>));</div><div class="line"><span class="number">1.760236806450138e+83</span></div><div class="line"><span class="number">1.394232245616977e+104</span></div><div class="line">n 在大于<span class="number">500</span>的时候差不多已超出范围</div></pre></td></tr></table></figure>
<p>如果有更好的方法，欢迎指正</p>
]]></content>
      
        <categories>
            
            <category> 算法 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
